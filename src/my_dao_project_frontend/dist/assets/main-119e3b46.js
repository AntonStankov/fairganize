import{t as q,C as L,l as O,R as T,P as m,I as Ie,g as H,h as Y,d as De,i as Le,j as et,k as tt,H as ee}from"./proxy-fe1d1820.js";function Z(){const e=typeof window>"u"?typeof global>"u"?typeof self>"u"?void 0:self.ic.agent:global.ic.agent:window.ic.agent;if(!e)throw new Error("No Agent could be found.");return e}const nt=5*60*1e3;function te(){return ot(at(st(),1e3),ct(1e3,1.2),rt(nt))}function st(){let e=!0;return async()=>e?(e=!1,!0):!1}function at(e,t){return async(n,a,s)=>{if(await e(n,a,s))return new Promise(c=>setTimeout(c,t))}}function rt(e){const t=Date.now()+e;return async(n,a,s)=>{if(Date.now()>t)throw new Error(`Request timed out after ${e} msec:
  Request ID: ${q(a)}
  Request status: ${s}
`)}}function ct(e,t){let n=e;return()=>new Promise(a=>setTimeout(()=>{n*=t,a()},n))}function ot(...e){return async(t,n,a)=>{for(const s of e)await s(t,n,a)}}async function ne(e,t,n,a=te(),s,c){var r;const i=[new TextEncoder().encode("request_status"),n],d=s??await((r=e.createReadStateRequest)===null||r===void 0?void 0:r.call(e,{paths:[i]})),l=await e.readState(t,{paths:[i]},void 0,d);if(e.rootKey==null)throw new Error("Agent root key not initialized before polling");const _=await L.create({certificate:l.certificate,rootKey:e.rootKey,canisterId:t,blsVerify:c}),b=O(_.lookup([...i,new TextEncoder().encode("status")]));let y;switch(typeof b>"u"?y=T.Unknown:y=new TextDecoder().decode(b),y){case T.Replied:return{reply:O(_.lookup([...i,"reply"])),certificate:_};case T.Received:case T.Unknown:case T.Processing:return await a(t,n,y),ne(e,t,n,a,d,c);case T.Rejected:{const p=new Uint8Array(O(_.lookup([...i,"reject_code"])))[0],N=new TextDecoder().decode(O(_.lookup([...i,"reject_message"])));throw new Error(`Call was rejected:
  Request ID: ${q(n)}
  Reject code: ${p}
  Reject text: ${N}
`)}case T.Done:throw new Error(`Call was marked as done but we never saw the reply:
  Request ID: ${q(n)}
`)}throw new Error("unreachable")}const it=({IDL:e})=>{const t=e.Variant({mainnet:e.Null,testnet:e.Null}),n=e.Text,a=e.Record({network:t,address:n,min_confirmations:e.Opt(e.Nat32)}),s=e.Nat64,c=s,r=e.Nat32,i=e.Record({start_height:r,end_height:e.Opt(r),network:t}),d=e.Vec(e.Nat8),l=e.Record({tip_height:r,block_headers:e.Vec(d)}),_=e.Record({network:t}),b=e.Nat64,y=e.Vec(b),p=e.Record({network:t,filter:e.Opt(e.Variant({page:e.Vec(e.Nat8),min_confirmations:e.Nat32})),address:n}),N=e.Vec(e.Nat8),P=e.Record({txid:e.Vec(e.Nat8),vout:e.Nat32}),S=e.Record({height:e.Nat32,value:s,outpoint:P}),k=e.Record({next_page:e.Opt(e.Vec(e.Nat8)),tip_height:r,tip_block_hash:N,utxos:e.Vec(S)}),u=e.Record({transaction:e.Vec(e.Nat8),network:t}),o=e.Principal,w=e.Record({canister_id:o,num_requested_changes:e.Opt(e.Nat64)}),f=e.Variant({from_user:e.Record({user_id:e.Principal}),from_canister:e.Record({canister_version:e.Opt(e.Nat64),canister_id:e.Principal})}),R=e.Vec(e.Nat8),C=e.Variant({creation:e.Record({controllers:e.Vec(e.Principal)}),code_deployment:e.Record({mode:e.Variant({reinstall:e.Null,upgrade:e.Null,install:e.Null}),module_hash:e.Vec(e.Nat8)}),load_snapshot:e.Record({canister_version:e.Nat64,taken_at_timestamp:e.Nat64,snapshot_id:R}),controllers_change:e.Record({controllers:e.Vec(e.Principal)}),code_uninstall:e.Null}),A=e.Record({timestamp_nanos:e.Nat64,canister_version:e.Nat64,origin:f,details:C}),v=e.Record({controllers:e.Vec(e.Principal),module_hash:e.Opt(e.Vec(e.Nat8)),recent_changes:e.Vec(A),total_num_changes:e.Nat64}),g=e.Record({canister_id:o}),j=e.Variant({controllers:e.Null,public:e.Null,allowed_viewers:e.Vec(e.Principal)}),B=e.Record({freezing_threshold:e.Nat,controllers:e.Vec(e.Principal),reserved_cycles_limit:e.Nat,log_visibility:j,wasm_memory_limit:e.Nat,memory_allocation:e.Nat,compute_allocation:e.Nat}),z=e.Record({status:e.Variant({stopped:e.Null,stopping:e.Null,running:e.Null}),memory_size:e.Nat,cycles:e.Nat,settings:B,query_stats:e.Record({response_payload_bytes_total:e.Nat,num_instructions_total:e.Nat,num_calls_total:e.Nat,request_payload_bytes_total:e.Nat}),idle_cycles_burned_per_day:e.Nat,module_hash:e.Opt(e.Vec(e.Nat8)),reserved_cycles:e.Nat}),E=e.Record({canister_id:o}),x=e.Record({freezing_threshold:e.Opt(e.Nat),controllers:e.Opt(e.Vec(e.Principal)),reserved_cycles_limit:e.Opt(e.Nat),log_visibility:e.Opt(j),wasm_memory_limit:e.Opt(e.Nat),memory_allocation:e.Opt(e.Nat),compute_allocation:e.Opt(e.Nat)}),ie=e.Record({settings:e.Opt(x),sender_canister_version:e.Opt(e.Nat64)}),le=e.Record({canister_id:o}),_e=e.Record({canister_id:o}),de=e.Record({canister_id:o,snapshot_id:R}),ue=e.Record({canister_id:o}),W=e.Variant({secp256k1:e.Null}),pe=e.Record({key_id:e.Record({name:e.Text,curve:W}),canister_id:e.Opt(o),derivation_path:e.Vec(e.Vec(e.Nat8))}),ge=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),he=e.Record({canister_id:o}),me=e.Record({idx:e.Nat64,timestamp_nanos:e.Nat64,content:e.Vec(e.Nat8)}),ye=e.Record({canister_log_records:e.Vec(me)}),G=e.Record({value:e.Text,name:e.Text}),$=e.Record({status:e.Nat,body:e.Vec(e.Nat8),headers:e.Vec(G)}),fe=e.Record({url:e.Text,method:e.Variant({get:e.Null,head:e.Null,post:e.Null}),max_response_bytes:e.Opt(e.Nat64),body:e.Opt(e.Vec(e.Nat8)),transform:e.Opt(e.Record({function:e.Func([e.Record({context:e.Vec(e.Nat8),response:$})],[$],["query"]),context:e.Vec(e.Nat8)})),headers:e.Vec(G)}),J=e.Variant({reinstall:e.Null,upgrade:e.Opt(e.Record({wasm_memory_persistence:e.Opt(e.Variant({keep:e.Null,replace:e.Null})),skip_pre_upgrade:e.Opt(e.Bool)})),install:e.Null}),U=e.Record({hash:e.Vec(e.Nat8)}),be=e.Record({arg:e.Vec(e.Nat8),wasm_module_hash:e.Vec(e.Nat8),mode:J,chunk_hashes_list:e.Vec(U),target_canister:o,store_canister:e.Opt(o),sender_canister_version:e.Opt(e.Nat64)}),Ne=e.Vec(e.Nat8),we=e.Record({arg:e.Vec(e.Nat8),wasm_module:Ne,mode:J,canister_id:o,sender_canister_version:e.Opt(e.Nat64)}),Re=e.Record({canister_id:o}),Q=e.Record({id:R,total_size:e.Nat64,taken_at_timestamp:e.Nat64}),Oe=e.Vec(Q),ve=e.Record({canister_id:o,sender_canister_version:e.Opt(e.Nat64),snapshot_id:R}),Te=e.Record({start_at_timestamp_nanos:e.Nat64,subnet_id:e.Principal}),ke=e.Record({num_block_failures_total:e.Nat64,node_id:e.Principal,num_blocks_proposed_total:e.Nat64}),Ve=e.Vec(e.Record({timestamp_nanos:e.Nat64,node_metrics:e.Vec(ke)})),je=e.Record({settings:e.Opt(x),specified_id:e.Opt(o),amount:e.Opt(e.Nat),sender_canister_version:e.Opt(e.Nat64)}),xe=e.Record({canister_id:o}),Fe=e.Record({canister_id:o,amount:e.Nat}),Pe=e.Vec(e.Nat8),X=e.Variant({ed25519:e.Null,bip340secp256k1:e.Null}),Ce=e.Record({key_id:e.Record({algorithm:X,name:e.Text}),canister_id:e.Opt(o),derivation_path:e.Vec(e.Vec(e.Nat8))}),Ae=e.Record({public_key:e.Vec(e.Nat8),chain_code:e.Vec(e.Nat8)}),Ee=e.Record({key_id:e.Record({name:e.Text,curve:W}),derivation_path:e.Vec(e.Vec(e.Nat8)),message_hash:e.Vec(e.Nat8)}),qe=e.Record({signature:e.Vec(e.Nat8)}),Se=e.Variant({bip341:e.Record({merkle_root_hash:e.Vec(e.Nat8)})}),Be=e.Record({aux:e.Opt(Se),key_id:e.Record({algorithm:X,name:e.Text}),derivation_path:e.Vec(e.Vec(e.Nat8)),message:e.Vec(e.Nat8)}),ze=e.Record({signature:e.Vec(e.Nat8)}),$e=e.Record({canister_id:o}),Ue=e.Record({canister_id:o}),He=e.Record({canister_id:o}),Me=e.Vec(U),Ke=e.Record({subnet_id:e.Principal}),We=e.Record({replica_version:e.Text}),Ge=e.Record({replace_snapshot:e.Opt(R),canister_id:o}),Je=Q,Qe=e.Record({canister_id:o,sender_canister_version:e.Opt(e.Nat64)}),Xe=e.Record({canister_id:e.Principal,settings:x,sender_canister_version:e.Opt(e.Nat64)}),Ye=e.Record({chunk:e.Vec(e.Nat8),canister_id:e.Principal}),Ze=U;return e.Service({bitcoin_get_balance:e.Func([a],[c],[]),bitcoin_get_block_headers:e.Func([i],[l],[]),bitcoin_get_current_fee_percentiles:e.Func([_],[y],[]),bitcoin_get_utxos:e.Func([p],[k],[]),bitcoin_send_transaction:e.Func([u],[],[]),canister_info:e.Func([w],[v],[]),canister_status:e.Func([g],[z],[]),clear_chunk_store:e.Func([E],[],[]),create_canister:e.Func([ie],[le],[]),delete_canister:e.Func([_e],[],[]),delete_canister_snapshot:e.Func([de],[],[]),deposit_cycles:e.Func([ue],[],[]),ecdsa_public_key:e.Func([pe],[ge],[]),fetch_canister_logs:e.Func([he],[ye],["query"]),http_request:e.Func([fe],[$],[]),install_chunked_code:e.Func([be],[],[]),install_code:e.Func([we],[],[]),list_canister_snapshots:e.Func([Re],[Oe],[]),load_canister_snapshot:e.Func([ve],[],[]),node_metrics_history:e.Func([Te],[Ve],[]),provisional_create_canister_with_cycles:e.Func([je],[xe],[]),provisional_top_up_canister:e.Func([Fe],[],[]),raw_rand:e.Func([],[Pe],[]),schnorr_public_key:e.Func([Ce],[Ae],[]),sign_with_ecdsa:e.Func([Ee],[qe],[]),sign_with_schnorr:e.Func([Be],[ze],[]),start_canister:e.Func([$e],[],[]),stop_canister:e.Func([Ue],[],[]),stored_chunks:e.Func([He],[Me],[]),subnet_info:e.Func([Ke],[We],[]),take_canister_snapshot:e.Func([Ge],[Je],[]),uninstall_code:e.Func([Qe],[],[]),update_settings:e.Func([Xe],[],[]),upload_chunk:e.Func([Ye],[Ze],[])})};class se extends H{constructor(t,n,a,s){super(["Call failed:",`  Canister: ${t.toText()}`,`  Method: ${n} (${a})`,...Object.getOwnPropertyNames(s).map(c=>`  "${c}": ${JSON.stringify(s[c])}`)].join(`
`)),this.canisterId=t,this.methodName=n,this.type=a,this.props=s}}class lt extends se{constructor(t,n,a){var s;super(t,n,"query",{Status:a.status,Code:(s=Le[a.reject_code])!==null&&s!==void 0?s:`Unknown Code "${a.reject_code}"`,Message:a.reject_message}),this.result=a}}class I extends se{constructor(t,n,a,s,c,r,i){super(t,n,"update",Object.assign({"Request ID":q(a)},s.body?Object.assign(Object.assign({},i?{"Error code":i}:{}),{"Reject code":String(c),"Reject message":r}):{"HTTP status code":s.status.toString(),"HTTP status text":s.statusText})),this.requestId=a,this.response=s,this.reject_code=c,this.reject_message=r,this.error_code=i}}const h=Symbol.for("ic-agent-metadata");class F{constructor(t){this[h]=Object.freeze(t)}static agentOf(t){return t[h].config.agent}static interfaceOf(t){return t[h].service}static canisterIdOf(t){return m.from(t[h].config.canisterId)}static async install(t,n){const a=t.mode===void 0?{install:null}:t.mode,s=t.arg?[...new Uint8Array(t.arg)]:[],c=[...new Uint8Array(t.module)],r=typeof n.canisterId=="string"?m.fromText(n.canisterId):n.canisterId;await D(n).install_code({mode:a,arg:s,wasm_module:c,canister_id:r,sender_canister_version:[]})}static async createCanister(t,n){function a(c){return[{controllers:c.controllers?[c.controllers]:[],compute_allocation:c.compute_allocation?[c.compute_allocation]:[],freezing_threshold:c.freezing_threshold?[c.freezing_threshold]:[],memory_allocation:c.memory_allocation?[c.memory_allocation]:[],reserved_cycles_limit:[],log_visibility:[],wasm_memory_limit:[]}]}const{canister_id:s}=await D(t||{}).provisional_create_canister_with_cycles({amount:[],settings:a(n||{}),specified_id:[],sender_canister_version:[]});return s}static async createAndInstallCanister(t,n,a){const s=await this.createCanister(a);return await this.install(Object.assign({},n),Object.assign(Object.assign({},a),{canisterId:s})),this.createActor(t,Object.assign(Object.assign({},a),{canisterId:s}))}static createActorClass(t,n){const a=t({IDL:Ie});class s extends F{constructor(r){if(!r.canisterId)throw new H(`Canister ID is required, but received ${typeof r.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);const i=typeof r.canisterId=="string"?m.fromText(r.canisterId):r.canisterId;super({config:Object.assign(Object.assign(Object.assign({},ae),r),{canisterId:i}),service:a});for(const[d,l]of a._fields)n!=null&&n.httpDetails&&l.annotations.push(M),n!=null&&n.certificate&&l.annotations.push(re),this[d]=_t(this,d,l,r.blsVerify)}}return s}static createActor(t,n){if(!n.canisterId)throw new H(`Canister ID is required, but received ${typeof n.canisterId} instead. If you are using automatically generated declarations, this may be because your application is not setting the canister ID in process.env correctly.`);return new(this.createActorClass(t))(n)}static createActorWithHttpDetails(t,n){return new(this.createActorClass(t,{httpDetails:!0}))(n)}static createActorWithExtendedDetails(t,n,a={httpDetails:!0,certificate:!0}){return new(this.createActorClass(t,a))(n)}}function V(e,t){const n=et(e,tt.Buffer.from(t));switch(n.length){case 0:return;case 1:return n[0];default:return n}}const ae={pollingStrategyFactory:te},M="http-details",re="certificate";function _t(e,t,n,a){let s;n.annotations.includes("query")||n.annotations.includes("composite_query")?s=async(r,...i)=>{var d,l;r=Object.assign(Object.assign({},r),(l=(d=e[h].config).queryTransform)===null||l===void 0?void 0:l.call(d,t,i,Object.assign(Object.assign({},e[h].config),r)));const _=r.agent||e[h].config.agent||Z(),b=m.from(r.canisterId||e[h].config.canisterId),y=Y(n.argTypes,i),p=await _.query(b,{methodName:t,arg:y,effectiveCanisterId:r.effectiveCanisterId}),N=Object.assign(Object.assign({},p.httpDetails),{requestDetails:p.requestDetails});switch(p.status){case"rejected":throw new lt(b,t,p);case"replied":return n.annotations.includes(M)?{httpDetails:N,result:V(n.retTypes,p.reply.arg)}:V(n.retTypes,p.reply.arg)}}:s=async(r,...i)=>{var d,l;r=Object.assign(Object.assign({},r),(l=(d=e[h].config).callTransform)===null||l===void 0?void 0:l.call(d,t,i,Object.assign(Object.assign({},e[h].config),r)));const _=r.agent||e[h].config.agent||Z(),{canisterId:b,effectiveCanisterId:y,pollingStrategyFactory:p}=Object.assign(Object.assign(Object.assign({},ae),e[h].config),r),N=m.from(b),P=y!==void 0?m.from(y):N,S=Y(n.argTypes,i),{requestId:k,response:u,requestDetails:o}=await _.call(N,{methodName:t,arg:S,effectiveCanisterId:P});let w,f;if(u.body&&u.body.certificate){if(_.rootKey==null)throw new Error("Agent is missing root key");const v=u.body.certificate;f=await L.create({certificate:De(v),rootKey:_.rootKey,canisterId:m.from(b),blsVerify:a});const g=[new TextEncoder().encode("request_status"),k];switch(new TextDecoder().decode(O(f.lookup([...g,"status"])))){case"replied":w=O(f.lookup([...g,"reply"]));break;case"rejected":{const B=new Uint8Array(O(f.lookup([...g,"reject_code"])))[0],z=new TextDecoder().decode(O(f.lookup([...g,"reject_message"]))),E=O(f.lookup([...g,"error_code"])),x=E?new TextDecoder().decode(E):void 0;throw new I(N,t,k,u,B,z,x)}}}else if(u.body&&"reject_message"in u.body){const{reject_code:v,reject_message:g,error_code:j}=u.body;throw new I(N,t,k,u,v,g,j)}if(u.status===202){const v=p(),g=await ne(_,P,k,v,a);f=g.certificate,w=g.reply}const R=n.annotations.includes(M),C=n.annotations.includes(re),A=Object.assign(Object.assign({},u),{requestDetails:o});if(w!==void 0)return R&&C?{httpDetails:A,certificate:f,result:V(n.retTypes,w)}:C?{certificate:f,result:V(n.retTypes,w)}:R?{httpDetails:A,result:V(n.retTypes,w)}:V(n.retTypes,w);if(n.retTypes.length===0)return R?{httpDetails:u,result:void 0}:void 0;throw new Error(`Call was returned undefined, but type [${n.retTypes.join(",")}].`)};const c=(...r)=>s({},...r);return c.withOptions=r=>(...i)=>s(r,...i),c}function D(e){function t(n,a){if(e.effectiveCanisterId)return{effectiveCanisterId:m.from(e.effectiveCanisterId)};const s=a[0];let c=m.fromHex("");return s&&typeof s=="object"&&s.target_canister&&n==="install_chunked_code"&&(c=m.from(s.target_canister)),s&&typeof s=="object"&&s.canister_id&&(c=m.from(s.canister_id)),{effectiveCanisterId:c}}return F.createActor(it,Object.assign(Object.assign(Object.assign({},e),{canisterId:m.fromHex("")}),{callTransform:t,queryTransform:t}))}const ce=({IDL:e})=>{const t=e.Int,n=e.Record({principal:e.Principal,name:e.Text}),a=e.Variant({removeMember:e.Principal,general:e.Null}),s=e.Record({id:e.Nat,status:e.Text,title:e.Text,creator:e.Principal,description:e.Text,deadline:t,voters:e.Vec(e.Tuple(e.Principal,e.Bool)),proposalType:a,votes_for:e.Nat,vote_arguments:e.Vec(e.Tuple(e.Principal,e.Text)),votes_against:e.Nat}),c=e.Record({id:e.Nat,members:e.Vec(e.Principal),owner:e.Principal,name:e.Text,proposals:e.Vec(s),quorum:e.Nat});return e.Service({addMember:e.Func([e.Nat,e.Principal],[e.Text],[]),createMemberRemovalProposal:e.Func([e.Nat,e.Principal,e.Text,t],[e.Nat],[]),createOrganization:e.Func([e.Text],[e.Nat],[]),createProposal:e.Func([e.Nat,e.Text,e.Text,t],[e.Nat],[]),createUser:e.Func([e.Text],[n],[]),createUserForTesting:e.Func([e.Text,e.Principal],[n],[]),finalizeProposal:e.Func([e.Nat,e.Nat],[e.Text],[]),getAllOrganizations:e.Func([],[e.Vec(c)],["query"]),getOrganization:e.Func([e.Nat],[e.Opt(c)],["query"]),getUserByPrincipal:e.Func([e.Principal],[e.Opt(n)],["query"]),voteOnProposal:e.Func([e.Nat,e.Nat,e.Bool,e.Text],[e.Text],[])})},oe="bw4dl-smaaa-aaaaa-qaacq-cai",dt=(e,t={})=>{const n=t.agent||new ee({...t.agentOptions});return t.agent&&t.agentOptions&&console.warn("Detected both agent and agentOptions passed to createActor. Ignoring agentOptions and proceeding with the provided agent."),n.fetchRootKey().catch(a=>{console.warn("Unable to fetch root key. Check to ensure that your local replica is running"),console.error(a)}),F.createActor(ce,{agent:n,canisterId:e,...t.actorOptions})};dt(oe);const ut=document.getElementById("nameInput"),pt=document.getElementById("submitNameButton"),gt=document.getElementById("loginSection"),ht=document.getElementById("mainPage"),mt=document.getElementById("createOrgButton");let K;const yt=async()=>{const e=new ee;K=F.createActor(ce,{agent:e,canisterId:oe})};pt.addEventListener("click",async()=>{const e=ut.value.trim();if(!e){alert("Please enter a valid name.");return}await K.createUser(e),gt.style.display="none",ht.style.display="block"});mt.addEventListener("click",async()=>{const e=prompt("Enter the name of the organization:");if(!e){alert("Organization name cannot be empty.");return}const t=await K.createOrganization(e);alert(`Organization created with ID: ${t}`)});yt();
