(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(i){if(i.ep)return;i.ep=!0;const c=t(i);fetch(i.href,c)}})();var Ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ec(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var tc={},Wr={};Wr.byteLength=ic;Wr.toByteArray=oc;Wr.fromByteArray=uc;var Nt=[],ft=[],rc=typeof Uint8Array<"u"?Uint8Array:Array,ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var hr=0,nc=ri.length;hr<nc;++hr)Nt[hr]=ri[hr],ft[ri.charCodeAt(hr)]=hr;ft["-".charCodeAt(0)]=62;ft["_".charCodeAt(0)]=63;function Vs(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function ic(r){var e=Vs(r),t=e[0],n=e[1];return(t+n)*3/4-n}function sc(r,e,t){return(e+t)*3/4-t}function oc(r){var e,t=Vs(r),n=t[0],i=t[1],c=new rc(sc(r,n,i)),l=0,u=i>0?n-4:n,y;for(y=0;y<u;y+=4)e=ft[r.charCodeAt(y)]<<18|ft[r.charCodeAt(y+1)]<<12|ft[r.charCodeAt(y+2)]<<6|ft[r.charCodeAt(y+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=e&255;return i===2&&(e=ft[r.charCodeAt(y)]<<2|ft[r.charCodeAt(y+1)]>>4,c[l++]=e&255),i===1&&(e=ft[r.charCodeAt(y)]<<10|ft[r.charCodeAt(y+1)]<<4|ft[r.charCodeAt(y+2)]>>2,c[l++]=e>>8&255,c[l++]=e&255),c}function ac(r){return Nt[r>>18&63]+Nt[r>>12&63]+Nt[r>>6&63]+Nt[r&63]}function cc(r,e,t){for(var n,i=[],c=e;c<t;c+=3)n=(r[c]<<16&16711680)+(r[c+1]<<8&65280)+(r[c+2]&255),i.push(ac(n));return i.join("")}function uc(r){for(var e,t=r.length,n=t%3,i=[],c=16383,l=0,u=t-n;l<u;l+=c)i.push(cc(r,l,l+c>u?u:l+c));return n===1?(e=r[t-1],i.push(Nt[e>>2]+Nt[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Nt[e>>10]+Nt[e>>4&63]+Nt[e<<2&63]+"=")),i.join("")}var Kr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Kr.read=function(r,e,t,n,i){var c,l,u=i*8-n-1,y=(1<<u)-1,E=y>>1,I=-7,T=t?i-1:0,U=t?-1:1,v=r[e+T];for(T+=U,c=v&(1<<-I)-1,v>>=-I,I+=u;I>0;c=c*256+r[e+T],T+=U,I-=8);for(l=c&(1<<-I)-1,c>>=-I,I+=n;I>0;l=l*256+r[e+T],T+=U,I-=8);if(c===0)c=1-E;else{if(c===y)return l?NaN:(v?-1:1)*(1/0);l=l+Math.pow(2,n),c=c-E}return(v?-1:1)*l*Math.pow(2,c-n)};Kr.write=function(r,e,t,n,i,c){var l,u,y,E=c*8-i-1,I=(1<<E)-1,T=I>>1,U=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:c-1,w=n?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=I):(l=Math.floor(Math.log(e)/Math.LN2),e*(y=Math.pow(2,-l))<1&&(l--,y*=2),l+T>=1?e+=U/y:e+=U*Math.pow(2,1-T),e*y>=2&&(l++,y/=2),l+T>=I?(u=0,l=I):l+T>=1?(u=(e*y-1)*Math.pow(2,i),l=l+T):(u=e*Math.pow(2,T-1)*Math.pow(2,i),l=0));i>=8;r[t+v]=u&255,v+=w,u/=256,i-=8);for(l=l<<i|u,E+=i;E>0;r[t+v]=l&255,v+=w,l/=256,E-=8);r[t+v-w]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=Wr,t=Kr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=j,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const d=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(d,a),d.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const a=new Uint8Array(d);return Object.setPrototypeOf(a,u.prototype),a}function u(d,a,f){if(typeof d=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(d)}return y(d,a,f)}u.poolSize=8192;function y(d,a,f){if(typeof d=="string")return U(d,a);if(ArrayBuffer.isView(d))return w(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if($(d,ArrayBuffer)||d&&$(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(d,SharedArrayBuffer)||d&&$(d.buffer,SharedArrayBuffer)))return C(d,a,f);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=d.valueOf&&d.valueOf();if(_!=null&&_!==d)return u.from(_,a,f);const O=k(d);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return u.from(d[Symbol.toPrimitive]("string"),a,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}u.from=function(d,a,f){return y(d,a,f)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function I(d,a,f){return E(d),d<=0?l(d):a!==void 0?typeof f=="string"?l(d).fill(a,f):l(d).fill(a):l(d)}u.alloc=function(d,a,f){return I(d,a,f)};function T(d){return E(d),l(d<0?0:z(d)|0)}u.allocUnsafe=function(d){return T(d)},u.allocUnsafeSlow=function(d){return T(d)};function U(d,a){if((typeof a!="string"||a==="")&&(a="utf8"),!u.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const f=q(d,a)|0;let _=l(f);const O=_.write(d,a);return O!==f&&(_=_.slice(0,O)),_}function v(d){const a=d.length<0?0:z(d.length)|0,f=l(a);for(let _=0;_<a;_+=1)f[_]=d[_]&255;return f}function w(d){if($(d,Uint8Array)){const a=new Uint8Array(d);return C(a.buffer,a.byteOffset,a.byteLength)}return v(d)}function C(d,a,f){if(a<0||d.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<a+(f||0))throw new RangeError('"length" is outside of buffer bounds');let _;return a===void 0&&f===void 0?_=new Uint8Array(d):f===void 0?_=new Uint8Array(d,a):_=new Uint8Array(d,a,f),Object.setPrototypeOf(_,u.prototype),_}function k(d){if(u.isBuffer(d)){const a=z(d.length)|0,f=l(a);return f.length===0||d.copy(f,0,0,a),f}if(d.length!==void 0)return typeof d.length!="number"||se(d.length)?l(0):v(d);if(d.type==="Buffer"&&Array.isArray(d.data))return v(d.data)}function z(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function j(d){return+d!=d&&(d=0),u.alloc(+d)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,f){if($(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),$(f,Uint8Array)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(a)||!u.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;let _=a.length,O=f.length;for(let H=0,D=Math.min(_,O);H<D;++H)if(a[H]!==f[H]){_=a[H],O=f[H];break}return _<O?-1:O<_?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let _;if(f===void 0)for(f=0,_=0;_<a.length;++_)f+=a[_].length;const O=u.allocUnsafe(f);let H=0;for(_=0;_<a.length;++_){let D=a[_];if($(D,Uint8Array))H+D.length>O.length?(u.isBuffer(D)||(D=u.from(D)),D.copy(O,H)):Uint8Array.prototype.set.call(O,D,H);else if(u.isBuffer(D))D.copy(O,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=D.length}return O};function q(d,a){if(u.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||$(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const f=d.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&f===0)return 0;let O=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return s(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return b(d).length;default:if(O)return _?-1:s(d).length;a=(""+a).toLowerCase(),O=!0}}u.byteLength=q;function ie(d,a,f){let _=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,a>>>=0,f<=a))return"";for(d||(d="utf8");;)switch(d){case"hex":return ee(this,a,f);case"utf8":case"utf-8":return L(this,a,f);case"ascii":return Z(this,a,f);case"latin1":case"binary":return G(this,a,f);case"base64":return S(this,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,a,f);default:if(_)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),_=!0}}u.prototype._isBuffer=!0;function M(d,a,f){const _=d[a];d[a]=d[f],d[f]=_}u.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<a;f+=2)M(this,f,f+1);return this},u.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<a;f+=4)M(this,f,f+3),M(this,f+1,f+2);return this},u.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<a;f+=8)M(this,f,f+7),M(this,f+1,f+6),M(this,f+2,f+5),M(this,f+3,f+4);return this},u.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?L(this,0,a):ie.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="";const f=r.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(a,f,_,O,H){if($(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(f===void 0&&(f=0),_===void 0&&(_=a?a.length:0),O===void 0&&(O=0),H===void 0&&(H=this.length),f<0||_>a.length||O<0||H>this.length)throw new RangeError("out of range index");if(O>=H&&f>=_)return 0;if(O>=H)return-1;if(f>=_)return 1;if(f>>>=0,_>>>=0,O>>>=0,H>>>=0,this===a)return 0;let D=H-O,xe=_-f;const Ie=Math.min(D,xe),Ee=this.slice(O,H),be=a.slice(f,_);for(let Ne=0;Ne<Ie;++Ne)if(Ee[Ne]!==be[Ne]){D=Ee[Ne],xe=be[Ne];break}return D<xe?-1:xe<D?1:0};function W(d,a,f,_,O){if(d.length===0)return-1;if(typeof f=="string"?(_=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,se(f)&&(f=O?0:d.length-1),f<0&&(f=d.length+f),f>=d.length){if(O)return-1;f=d.length-1}else if(f<0)if(O)f=0;else return-1;if(typeof a=="string"&&(a=u.from(a,_)),u.isBuffer(a))return a.length===0?-1:Y(d,a,f,_,O);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(d,a,f):Uint8Array.prototype.lastIndexOf.call(d,a,f):Y(d,[a],f,_,O);throw new TypeError("val must be string, number or Buffer")}function Y(d,a,f,_,O){let H=1,D=d.length,xe=a.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(d.length<2||a.length<2)return-1;H=2,D/=2,xe/=2,f/=2}function Ie(be,Ne){return H===1?be[Ne]:be.readUInt16BE(Ne*H)}let Ee;if(O){let be=-1;for(Ee=f;Ee<D;Ee++)if(Ie(d,Ee)===Ie(a,be===-1?0:Ee-be)){if(be===-1&&(be=Ee),Ee-be+1===xe)return be*H}else be!==-1&&(Ee-=Ee-be),be=-1}else for(f+xe>D&&(f=D-xe),Ee=f;Ee>=0;Ee--){let be=!0;for(let Ne=0;Ne<xe;Ne++)if(Ie(d,Ee+Ne)!==Ie(a,Ne)){be=!1;break}if(be)return Ee}return-1}u.prototype.includes=function(a,f,_){return this.indexOf(a,f,_)!==-1},u.prototype.indexOf=function(a,f,_){return W(this,a,f,_,!0)},u.prototype.lastIndexOf=function(a,f,_){return W(this,a,f,_,!1)};function J(d,a,f,_){f=Number(f)||0;const O=d.length-f;_?(_=Number(_),_>O&&(_=O)):_=O;const H=a.length;_>H/2&&(_=H/2);let D;for(D=0;D<_;++D){const xe=parseInt(a.substr(D*2,2),16);if(se(xe))return D;d[f+D]=xe}return D}function re(d,a,f,_){return A(s(a,d.length-f),d,f,_)}function K(d,a,f,_){return A(o(a),d,f,_)}function ye(d,a,f,_){return A(b(a),d,f,_)}function he(d,a,f,_){return A(p(a,d.length-f),d,f,_)}u.prototype.write=function(a,f,_,O){if(f===void 0)O="utf8",_=this.length,f=0;else if(_===void 0&&typeof f=="string")O=f,_=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(_)?(_=_>>>0,O===void 0&&(O="utf8")):(O=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-f;if((_===void 0||_>H)&&(_=H),a.length>0&&(_<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let D=!1;for(;;)switch(O){case"hex":return J(this,a,f,_);case"utf8":case"utf-8":return re(this,a,f,_);case"ascii":case"latin1":case"binary":return K(this,a,f,_);case"base64":return ye(this,a,f,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,a,f,_);default:if(D)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),D=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(d,a,f){return a===0&&f===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(a,f))}function L(d,a,f){f=Math.min(d.length,f);const _=[];let O=a;for(;O<f;){const H=d[O];let D=null,xe=H>239?4:H>223?3:H>191?2:1;if(O+xe<=f){let Ie,Ee,be,Ne;switch(xe){case 1:H<128&&(D=H);break;case 2:Ie=d[O+1],(Ie&192)===128&&(Ne=(H&31)<<6|Ie&63,Ne>127&&(D=Ne));break;case 3:Ie=d[O+1],Ee=d[O+2],(Ie&192)===128&&(Ee&192)===128&&(Ne=(H&15)<<12|(Ie&63)<<6|Ee&63,Ne>2047&&(Ne<55296||Ne>57343)&&(D=Ne));break;case 4:Ie=d[O+1],Ee=d[O+2],be=d[O+3],(Ie&192)===128&&(Ee&192)===128&&(be&192)===128&&(Ne=(H&15)<<18|(Ie&63)<<12|(Ee&63)<<6|be&63,Ne>65535&&Ne<1114112&&(D=Ne))}}D===null?(D=65533,xe=1):D>65535&&(D-=65536,_.push(D>>>10&1023|55296),D=56320|D&1023),_.push(D),O+=xe}return X(_)}const V=4096;function X(d){const a=d.length;if(a<=V)return String.fromCharCode.apply(String,d);let f="",_=0;for(;_<a;)f+=String.fromCharCode.apply(String,d.slice(_,_+=V));return f}function Z(d,a,f){let _="";f=Math.min(d.length,f);for(let O=a;O<f;++O)_+=String.fromCharCode(d[O]&127);return _}function G(d,a,f){let _="";f=Math.min(d.length,f);for(let O=a;O<f;++O)_+=String.fromCharCode(d[O]);return _}function ee(d,a,f){const _=d.length;(!a||a<0)&&(a=0),(!f||f<0||f>_)&&(f=_);let O="";for(let H=a;H<f;++H)O+=pe[d[H]];return O}function le(d,a,f){const _=d.slice(a,f);let O="";for(let H=0;H<_.length-1;H+=2)O+=String.fromCharCode(_[H]+_[H+1]*256);return O}u.prototype.slice=function(a,f){const _=this.length;a=~~a,f=f===void 0?_:~~f,a<0?(a+=_,a<0&&(a=0)):a>_&&(a=_),f<0?(f+=_,f<0&&(f=0)):f>_&&(f=_),f<a&&(f=a);const O=this.subarray(a,f);return Object.setPrototypeOf(O,u.prototype),O};function oe(d,a,f){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+a>f)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,f,_){a=a>>>0,f=f>>>0,_||oe(a,f,this.length);let O=this[a],H=1,D=0;for(;++D<f&&(H*=256);)O+=this[a+D]*H;return O},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,f,_){a=a>>>0,f=f>>>0,_||oe(a,f,this.length);let O=this[a+--f],H=1;for(;f>0&&(H*=256);)O+=this[a+--f]*H;return O},u.prototype.readUint8=u.prototype.readUInt8=function(a,f){return a=a>>>0,f||oe(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||oe(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||oe(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=ge(function(a){a=a>>>0,R(a,"offset");const f=this[a],_=this[a+7];(f===void 0||_===void 0)&&F(a,this.length-8);const O=f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,H=this[++a]+this[++a]*2**8+this[++a]*2**16+_*2**24;return BigInt(O)+(BigInt(H)<<BigInt(32))}),u.prototype.readBigUInt64BE=ge(function(a){a=a>>>0,R(a,"offset");const f=this[a],_=this[a+7];(f===void 0||_===void 0)&&F(a,this.length-8);const O=f*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],H=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+_;return(BigInt(O)<<BigInt(32))+BigInt(H)}),u.prototype.readIntLE=function(a,f,_){a=a>>>0,f=f>>>0,_||oe(a,f,this.length);let O=this[a],H=1,D=0;for(;++D<f&&(H*=256);)O+=this[a+D]*H;return H*=128,O>=H&&(O-=Math.pow(2,8*f)),O},u.prototype.readIntBE=function(a,f,_){a=a>>>0,f=f>>>0,_||oe(a,f,this.length);let O=f,H=1,D=this[a+--O];for(;O>0&&(H*=256);)D+=this[a+--O]*H;return H*=128,D>=H&&(D-=Math.pow(2,8*f)),D},u.prototype.readInt8=function(a,f){return a=a>>>0,f||oe(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,f){a=a>>>0,f||oe(a,2,this.length);const _=this[a]|this[a+1]<<8;return _&32768?_|4294901760:_},u.prototype.readInt16BE=function(a,f){a=a>>>0,f||oe(a,2,this.length);const _=this[a+1]|this[a]<<8;return _&32768?_|4294901760:_},u.prototype.readInt32LE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=ge(function(a){a=a>>>0,R(a,"offset");const f=this[a],_=this[a+7];(f===void 0||_===void 0)&&F(a,this.length-8);const O=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(_<<24);return(BigInt(O)<<BigInt(32))+BigInt(f+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),u.prototype.readBigInt64BE=ge(function(a){a=a>>>0,R(a,"offset");const f=this[a],_=this[a+7];(f===void 0||_===void 0)&&F(a,this.length-8);const O=(f<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(O)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+_)}),u.prototype.readFloatLE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),t.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,f){return a=a>>>0,f||oe(a,4,this.length),t.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||oe(a,8,this.length),t.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||oe(a,8,this.length),t.read(this,a,!1,52,8)};function fe(d,a,f,_,O,H){if(!u.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>O||a<H)throw new RangeError('"value" argument is out of bounds');if(f+_>d.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,f,_,O){if(a=+a,f=f>>>0,_=_>>>0,!O){const xe=Math.pow(2,8*_)-1;fe(this,a,f,_,xe,0)}let H=1,D=0;for(this[f]=a&255;++D<_&&(H*=256);)this[f+D]=a/H&255;return f+_},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,f,_,O){if(a=+a,f=f>>>0,_=_>>>0,!O){const xe=Math.pow(2,8*_)-1;fe(this,a,f,_,xe,0)}let H=_-1,D=1;for(this[f+H]=a&255;--H>=0&&(D*=256);)this[f+H]=a/D&255;return f+_},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,1,255,0),this[f]=a&255,f+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function Q(d,a,f,_,O){B(a,_,O,d,f,7);let H=Number(a&BigInt(4294967295));d[f++]=H,H=H>>8,d[f++]=H,H=H>>8,d[f++]=H,H=H>>8,d[f++]=H;let D=Number(a>>BigInt(32)&BigInt(4294967295));return d[f++]=D,D=D>>8,d[f++]=D,D=D>>8,d[f++]=D,D=D>>8,d[f++]=D,f}function g(d,a,f,_,O){B(a,_,O,d,f,7);let H=Number(a&BigInt(4294967295));d[f+7]=H,H=H>>8,d[f+6]=H,H=H>>8,d[f+5]=H,H=H>>8,d[f+4]=H;let D=Number(a>>BigInt(32)&BigInt(4294967295));return d[f+3]=D,D=D>>8,d[f+2]=D,D=D>>8,d[f+1]=D,D=D>>8,d[f]=D,f+8}u.prototype.writeBigUInt64LE=ge(function(a,f=0){return Q(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=ge(function(a,f=0){return g(this,a,f,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,f,_,O){if(a=+a,f=f>>>0,!O){const Ie=Math.pow(2,8*_-1);fe(this,a,f,_,Ie-1,-Ie)}let H=0,D=1,xe=0;for(this[f]=a&255;++H<_&&(D*=256);)a<0&&xe===0&&this[f+H-1]!==0&&(xe=1),this[f+H]=(a/D>>0)-xe&255;return f+_},u.prototype.writeIntBE=function(a,f,_,O){if(a=+a,f=f>>>0,!O){const Ie=Math.pow(2,8*_-1);fe(this,a,f,_,Ie-1,-Ie)}let H=_-1,D=1,xe=0;for(this[f+H]=a&255;--H>=0&&(D*=256);)a<0&&xe===0&&this[f+H+1]!==0&&(xe=1),this[f+H]=(a/D>>0)-xe&255;return f+_},u.prototype.writeInt8=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},u.prototype.writeInt16LE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},u.prototype.writeInt16BE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},u.prototype.writeInt32LE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},u.prototype.writeInt32BE=function(a,f,_){return a=+a,f=f>>>0,_||fe(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},u.prototype.writeBigInt64LE=ge(function(a,f=0){return Q(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=ge(function(a,f=0){return g(this,a,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(d,a,f,_,O,H){if(f+_>d.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function ue(d,a,f,_,O){return a=+a,f=f>>>0,O||ne(d,a,f,4),t.write(d,a,f,_,23,4),f+4}u.prototype.writeFloatLE=function(a,f,_){return ue(this,a,f,!0,_)},u.prototype.writeFloatBE=function(a,f,_){return ue(this,a,f,!1,_)};function de(d,a,f,_,O){return a=+a,f=f>>>0,O||ne(d,a,f,8),t.write(d,a,f,_,52,8),f+8}u.prototype.writeDoubleLE=function(a,f,_){return de(this,a,f,!0,_)},u.prototype.writeDoubleBE=function(a,f,_){return de(this,a,f,!1,_)},u.prototype.copy=function(a,f,_,O){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(_||(_=0),!O&&O!==0&&(O=this.length),f>=a.length&&(f=a.length),f||(f=0),O>0&&O<_&&(O=_),O===_||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),a.length-f<O-_&&(O=a.length-f+_);const H=O-_;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,_,O):Uint8Array.prototype.set.call(a,this.subarray(_,O),f),H},u.prototype.fill=function(a,f,_,O){if(typeof a=="string"){if(typeof f=="string"?(O=f,f=0,_=this.length):typeof _=="string"&&(O=_,_=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!u.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(a.length===1){const D=a.charCodeAt(0);(O==="utf8"&&D<128||O==="latin1")&&(a=D)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<_)throw new RangeError("Out of range index");if(_<=f)return this;f=f>>>0,_=_===void 0?this.length:_>>>0,a||(a=0);let H;if(typeof a=="number")for(H=f;H<_;++H)this[H]=a;else{const D=u.isBuffer(a)?a:u.from(a,O),xe=D.length;if(xe===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(H=0;H<_-f;++H)this[H+f]=D[H%xe]}return this};const te={};function ae(d,a,f){te[d]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(d,a){return`The "${d}" argument must be of type number. Received type ${typeof a}`},TypeError),ae("ERR_OUT_OF_RANGE",function(d,a,f){let _=`The value of "${d}" is out of range.`,O=f;return Number.isInteger(f)&&Math.abs(f)>2**32?O=m(String(f)):typeof f=="bigint"&&(O=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(O=m(O)),O+="n"),_+=` It must be ${a}. Received ${O}`,_},RangeError);function m(d){let a="",f=d.length;const _=d[0]==="-"?1:0;for(;f>=_+4;f-=3)a=`_${d.slice(f-3,f)}${a}`;return`${d.slice(0,f)}${a}`}function x(d,a,f){R(a,"offset"),(d[a]===void 0||d[a+f]===void 0)&&F(a,d.length-(f+1))}function B(d,a,f,_,O,H){if(d>f||d<a){const D=typeof a=="bigint"?"n":"";let xe;throw H>3?a===0||a===BigInt(0)?xe=`>= 0${D} and < 2${D} ** ${(H+1)*8}${D}`:xe=`>= -(2${D} ** ${(H+1)*8-1}${D}) and < 2 ** ${(H+1)*8-1}${D}`:xe=`>= ${a}${D} and <= ${f}${D}`,new te.ERR_OUT_OF_RANGE("value",xe,d)}x(_,O,H)}function R(d,a){if(typeof d!="number")throw new te.ERR_INVALID_ARG_TYPE(a,"number",d)}function F(d,a,f){throw Math.floor(d)!==d?(R(d,f),new te.ERR_OUT_OF_RANGE(f||"offset","an integer",d)):a<0?new te.ERR_BUFFER_OUT_OF_BOUNDS:new te.ERR_OUT_OF_RANGE(f||"offset",`>= ${f?1:0} and <= ${a}`,d)}const P=/[^+/0-9A-Za-z-_]/g;function h(d){if(d=d.split("=")[0],d=d.trim().replace(P,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function s(d,a){a=a||1/0;let f;const _=d.length;let O=null;const H=[];for(let D=0;D<_;++D){if(f=d.charCodeAt(D),f>55295&&f<57344){if(!O){if(f>56319){(a-=3)>-1&&H.push(239,191,189);continue}else if(D+1===_){(a-=3)>-1&&H.push(239,191,189);continue}O=f;continue}if(f<56320){(a-=3)>-1&&H.push(239,191,189),O=f;continue}f=(O-55296<<10|f-56320)+65536}else O&&(a-=3)>-1&&H.push(239,191,189);if(O=null,f<128){if((a-=1)<0)break;H.push(f)}else if(f<2048){if((a-=2)<0)break;H.push(f>>6|192,f&63|128)}else if(f<65536){if((a-=3)<0)break;H.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((a-=4)<0)break;H.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return H}function o(d){const a=[];for(let f=0;f<d.length;++f)a.push(d.charCodeAt(f)&255);return a}function p(d,a){let f,_,O;const H=[];for(let D=0;D<d.length&&!((a-=2)<0);++D)f=d.charCodeAt(D),_=f>>8,O=f%256,H.push(O),H.push(_);return H}function b(d){return e.toByteArray(h(d))}function A(d,a,f,_){let O;for(O=0;O<_&&!(O+f>=a.length||O>=d.length);++O)a[O+f]=d[O];return O}function $(d,a){return d instanceof a||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===a.name}function se(d){return d!==d}const pe=function(){const d="0123456789abcdef",a=new Array(256);for(let f=0;f<16;++f){const _=f*16;for(let O=0;O<16;++O)a[_+O]=d[f]+d[O]}return a}();function ge(d){return typeof BigInt>"u"?_e:d}function _e(){throw new Error("BigInt not supported")}})(tc);var Qi;(function(r){r[r.SysFatal=1]="SysFatal",r[r.SysTransient=2]="SysTransient",r[r.DestinationInvalid=3]="DestinationInvalid",r[r.CanisterReject=4]="CanisterReject",r[r.CanisterError=5]="CanisterError"})(Qi||(Qi={}));const fc="modulepreload",lc=function(r){return"/"+r},es={},hc=function(e,t,n){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(c=>{if(c=lc(c),c in es)return;es[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!n)for(let I=i.length-1;I>=0;I--){const T=i[I];if(T.href===c&&(!l||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const E=document.createElement("link");if(E.rel=l?"stylesheet":fc,l||(E.as="script",E.crossOrigin=""),E.href=c,document.head.appendChild(E),l)return new Promise((I,T)=>{E.addEventListener("load",I),E.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>e()).catch(c=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c})},Pn="abcdefghijklmnopqrstuvwxyz234567",Sr=Object.create(null);for(let r=0;r<Pn.length;r++)Sr[Pn[r]]=r;Sr[0]=Sr.o;Sr[1]=Sr.i;function dc(r){let e=0,t=0,n="";function i(c){return e<0?t|=c>>-e:t=c<<e&248,e>3?(e-=8,1):(e<4&&(n+=Pn[t>>3],e+=5),0)}for(let c=0;c<r.length;)c+=i(r[c]);return n+(e<0?Pn[t>>3]:"")}function pc(r){let e=0,t=0;const n=new Uint8Array(r.length*4/3|0);let i=0;function c(l){let u=Sr[l.toLowerCase()];if(u===void 0)throw new Error(`Invalid character: ${JSON.stringify(l)}`);u<<=3,t|=u>>>e,e+=5,e>=8&&(n[i++]=t,e-=8,e>0?t=u<<5-e&255:t=0)}for(const l of r)c(l);return n.slice(0,i)}const yc=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]);function wc(r){const e=new Uint8Array(r);let t=-1;for(let n=0;n<e.length;n++){const c=(e[n]^t)&255;t=yc[c]^t>>>8}return(t^-1)>>>0}function gc(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function zs(r,...e){if(!gc(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function ts(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function mc(r,e){zs(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const dr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ni(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Et(r,e){return r<<32-e|r>>>e}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function bc(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function js(r){return typeof r=="string"&&(r=bc(r)),zs(r),r}class xc{clone(){return this._cloneInto()}}function $i(r){const e=n=>r().update(js(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Ys(r=32){if(dr&&typeof dr.getRandomValues=="function")return dr.getRandomValues(new Uint8Array(r));if(dr&&typeof dr.randomBytes=="function")return Uint8Array.from(dr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function Ec(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),c=BigInt(4294967295),l=Number(t>>i&c),u=Number(t&c),y=n?4:0,E=n?0:4;r.setUint32(e+y,l,n),r.setUint32(e+E,u,n)}function _c(r,e,t){return r&e^~r&t}function Bc(r,e,t){return r&e^r&t^e&t}class Zs extends xc{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=ni(this.buffer)}update(e){ts(this);const{view:t,buffer:n,blockLen:i}=this;e=js(e);const c=e.length;for(let l=0;l<c;){const u=Math.min(i-this.pos,c-l);if(u===i){const y=ni(e);for(;i<=c-l;l+=i)this.process(y,l);continue}n.set(e.subarray(l,l+u),this.pos),this.pos+=u,l+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ts(this),mc(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:c}=this;let{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>i-l&&(this.process(n,0),l=0);for(let T=l;T<i;T++)t[T]=0;Ec(n,i-8,BigInt(this.length*8),c),this.process(n,0);const u=ni(e),y=this.outputLen;if(y%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const E=y/4,I=this.get();if(E>I.length)throw new Error("_sha2: outputLen bigger than state");for(let T=0;T<E;T++)u.setUint32(4*T,I[T],c)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:c,destroyed:l,pos:u}=this;return e.length=i,e.pos=u,e.finished=c,e.destroyed=l,i%t&&e.buffer.set(n),e}}const Ic=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$t=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dt=new Uint32Array(64);class Ws extends Zs{constructor(e=32){super(64,e,8,!1),this.A=$t[0]|0,this.B=$t[1]|0,this.C=$t[2]|0,this.D=$t[3]|0,this.E=$t[4]|0,this.F=$t[5]|0,this.G=$t[6]|0,this.H=$t[7]|0}get(){const{A:e,B:t,C:n,D:i,E:c,F:l,G:u,H:y}=this;return[e,t,n,i,c,l,u,y]}set(e,t,n,i,c,l,u,y){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=c|0,this.F=l|0,this.G=u|0,this.H=y|0}process(e,t){for(let T=0;T<16;T++,t+=4)Dt[T]=e.getUint32(t,!1);for(let T=16;T<64;T++){const U=Dt[T-15],v=Dt[T-2],w=Et(U,7)^Et(U,18)^U>>>3,C=Et(v,17)^Et(v,19)^v>>>10;Dt[T]=C+Dt[T-7]+w+Dt[T-16]|0}let{A:n,B:i,C:c,D:l,E:u,F:y,G:E,H:I}=this;for(let T=0;T<64;T++){const U=Et(u,6)^Et(u,11)^Et(u,25),v=I+U+_c(u,y,E)+Ic[T]+Dt[T]|0,C=(Et(n,2)^Et(n,13)^Et(n,22))+Bc(n,i,c)|0;I=E,E=y,y=u,u=l+v|0,l=c,c=i,i=n,n=v+C|0}n=n+this.A|0,i=i+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,y=y+this.F|0,E=E+this.G|0,I=I+this.H|0,this.set(n,i,c,l,u,y,E,I)}roundClean(){Dt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Ac extends Ws{constructor(){super(28),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868}}const Di=$i(()=>new Ws),Sc=$i(()=>new Ac);function vc(r){return Sc.create().update(new Uint8Array(r)).digest()}const nn="__principal__",Tc=2,rs=4,Nc="aaaaa-aa",Uc=r=>{var e;return new Uint8Array(((e=r.match(/.{1,2}/g))!==null&&e!==void 0?e:[]).map(t=>parseInt(t,16)))},Fc=r=>r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"");let Le=class yn{constructor(e){this._arr=e,this._isPrincipal=!0}static anonymous(){return new this(new Uint8Array([rs]))}static managementCanister(){return this.fromText(Nc)}static selfAuthenticating(e){const t=vc(e);return new this(new Uint8Array([...t,Tc]))}static from(e){if(typeof e=="string")return yn.fromText(e);if(Object.getPrototypeOf(e)===Uint8Array.prototype)return new yn(e);if(typeof e=="object"&&e!==null&&e._isPrincipal===!0)return new yn(e._arr);throw new Error(`Impossible to convert ${JSON.stringify(e)} to Principal.`)}static fromHex(e){return new this(Uc(e))}static fromText(e){let t=e;if(e.includes(nn)){const l=JSON.parse(e);nn in l&&(t=l[nn])}const n=t.toLowerCase().replace(/-/g,"");let i=pc(n);i=i.slice(4,i.length);const c=new this(i);if(c.toText()!==t)throw new Error(`Principal "${c.toText()}" does not have a valid checksum (original value "${t}" may not be a valid Principal ID).`);return c}static fromUint8Array(e){return new this(e)}isAnonymous(){return this._arr.byteLength===1&&this._arr[0]===rs}toUint8Array(){return this._arr}toHex(){return Fc(this._arr).toUpperCase()}toText(){const e=new ArrayBuffer(4);new DataView(e).setUint32(0,wc(this._arr));const n=new Uint8Array(e),i=Uint8Array.from(this._arr),c=new Uint8Array([...n,...i]),u=dc(c).match(/.{1,5}/g);if(!u)throw new Error;return u.join("-")}toString(){return this.toText()}toJSON(){return{[nn]:this.toText()}}compareTo(e){for(let t=0;t<Math.min(this._arr.length,e._arr.length);t++){if(this._arr[t]<e._arr[t])return"lt";if(this._arr[t]>e._arr[t])return"gt"}return this._arr.length<e._arr.length?"lt":this._arr.length>e._arr.length?"gt":"eq"}ltEq(e){const t=this.compareTo(e);return t=="lt"||t=="eq"}gtEq(e){const t=this.compareTo(e);return t=="gt"||t=="eq"}};function bt(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.byteLength,0));let t=0;for(const n of r)e.set(new Uint8Array(n),t),t+=n.byteLength;return e.buffer}function ct(r){return[...new Uint8Array(r)].map(e=>e.toString(16).padStart(2,"0")).join("")}const Rc=new RegExp(/^[0-9a-fA-F]+$/);function Mn(r){if(!Rc.test(r))throw new Error("Invalid hexadecimal string.");const e=[...r].reduce((t,n,i)=>(t[i/2|0]=(t[i/2|0]||"")+n,t),[]).map(t=>Number.parseInt(t,16));return new Uint8Array(e).buffer}function Ks(r,e){if(r.byteLength!==e.byteLength)return r.byteLength-e.byteLength;const t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]!==n[i])return t[i]-n[i];return 0}function zn(r,e){return Ks(r,e)===0}function wn(r){return new DataView(r.buffer,r.byteOffset,r.byteLength).buffer}function Or(r){return r instanceof Uint8Array?wn(r):r instanceof ArrayBuffer?r:Array.isArray(r)?wn(new Uint8Array(r)):"buffer"in r?Or(r.buffer):wn(new Uint8Array(r))}class Ve extends Error{constructor(e){super(e),this.message=e,this.name="AgentError",this.__proto__=Ve.prototype,Object.setPrototypeOf(this,Ve.prototype)}}function Ue(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.byteLength,0));let t=0;for(const n of r)e.set(new Uint8Array(n),t),t+=n.byteLength;return e}class Nr{constructor(e,t=(e==null?void 0:e.byteLength)||0){this._buffer=bi(e||new ArrayBuffer(0)),this._view=new Uint8Array(this._buffer,0,t)}save(){return this._view}restore(e){this._view=e}get buffer(){return bi(this._view.slice())}get byteLength(){return this._view.byteLength}read(e){const t=this._view.subarray(0,e);return this._view=this._view.subarray(e),t.slice().buffer}readUint8(){const e=this._view[0];return this._view=this._view.subarray(1),e}write(e){const t=new Uint8Array(e),n=this._view.byteLength;this._view.byteOffset+this._view.byteLength+t.byteLength>=this._buffer.byteLength?this.alloc(t.byteLength):this._view=new Uint8Array(this._buffer,this._view.byteOffset,this._view.byteLength+t.byteLength),this._view.set(t,n)}get end(){return this._view.byteLength===0}alloc(e){const t=new ArrayBuffer((this._buffer.byteLength+e)*1.2|0),n=new Uint8Array(t,0,this._view.byteLength+e);n.set(this._view),this._buffer=t,this._view=n}}function ii(r){return new DataView(r.buffer,r.byteOffset,r.byteLength).buffer}function bi(r){return r instanceof Uint8Array?ii(r):r instanceof ArrayBuffer?r:Array.isArray(r)?ii(new Uint8Array(r)):"buffer"in r?bi(r.buffer):ii(new Uint8Array(r))}function Oc(r){const t=new TextEncoder().encode(r);let n=0;for(const i of t)n=(n*223+i)%2**32;return n}function Ut(r){if(/^_\d+_$/.test(r)||/^_0x[0-9a-fA-F]+_$/.test(r)){const e=+r.slice(1,-1);if(Number.isSafeInteger(e)&&e>=0&&e<2**32)return e}return Oc(r)}function Xs(){throw new Error("unexpected end of buffer")}function or(r,e){return r.byteLength<e&&Xs(),r.read(e)}function ar(r){const e=r.readUint8();return e===void 0&&Xs(),e}function Ce(r){if(typeof r=="number"&&(r=BigInt(r)),r<BigInt(0))throw new Error("Cannot leb encode negative values.");const e=(r===BigInt(0)?0:Math.ceil(Math.log2(Number(r))))+1,t=new Nr(new ArrayBuffer(e),0);for(;;){const n=Number(r&BigInt(127));if(r/=BigInt(128),r===BigInt(0)){t.write(new Uint8Array([n]));break}else t.write(new Uint8Array([n|128]))}return t.buffer}function Ze(r){let e=BigInt(1),t=BigInt(0),n;do n=ar(r),t+=BigInt(n&127).valueOf()*e,e*=BigInt(128);while(n>=128);return t}function ze(r){typeof r=="number"&&(r=BigInt(r));const e=r<BigInt(0);e&&(r=-r-BigInt(1));const t=(r===BigInt(0)?0:Math.ceil(Math.log2(Number(r))))+1,n=new Nr(new ArrayBuffer(t),0);for(;;){const c=i(r);if(r/=BigInt(128),e&&r===BigInt(0)&&c&64||!e&&r===BigInt(0)&&!(c&64)){n.write(new Uint8Array([c]));break}else n.write(new Uint8Array([c|128]))}function i(c){const l=c%BigInt(128);return Number(e?BigInt(128)-l-BigInt(1):l)}return n.buffer}function Vt(r){const e=new Uint8Array(r.buffer);let t=0;for(;t<e.byteLength;t++)if(e[t]<128){if(!(e[t]&64))return Ze(r);break}const n=new Uint8Array(or(r,t+1));let i=BigInt(0);for(let c=n.byteLength-1;c>=0;c--)i=i*BigInt(128)+BigInt(128-(n[c]&127)-1);return-i-BigInt(1)}function Lc(r,e){if(BigInt(r)<BigInt(0))throw new Error("Cannot write negative values.");return Js(r,e)}function Js(r,e){r=BigInt(r);const t=new Nr(new ArrayBuffer(Math.min(1,e)),0);let n=0,i=BigInt(256),c=BigInt(0),l=Number(r%i);for(t.write(new Uint8Array([l]));++n<e;)r<0&&c===BigInt(0)&&l!==0&&(c=BigInt(1)),l=Number((r/i-c)%BigInt(256)),t.write(new Uint8Array([l])),i*=BigInt(256);return t.buffer}function Qs(r,e){let t=BigInt(ar(r)),n=BigInt(1),i=0;for(;++i<e;){n*=BigInt(256);const c=BigInt(ar(r));t=t+n*c}return t}function Pc(r,e){let t=Qs(r,e);const n=BigInt(2)**(BigInt(8)*BigInt(e-1)+BigInt(7));return t>=n&&(t-=n*BigInt(2)),t}function xi(r){const e=BigInt(r);if(r<0)throw new RangeError("Input must be non-negative");return BigInt(1)<<e}const gn="DIDL",ns=400;function zr(r,e,t){return r.map((n,i)=>t(n,e[i]))}class Mc{constructor(){this._typs=[],this._idx=new Map}has(e){return this._idx.has(e.name)}add(e,t){const n=this._typs.length;this._idx.set(e.name,n),this._typs.push(t)}merge(e,t){const n=this._idx.get(e.name),i=this._idx.get(t);if(n===void 0)throw new Error("Missing type index for "+e);if(i===void 0)throw new Error("Missing type index for "+t);this._typs[n]=this._typs[i],this._typs.splice(i,1),this._idx.delete(t)}encode(){const e=Ce(this._typs.length),t=Ue(...this._typs);return Ue(e,t)}indexOf(e){if(!this._idx.has(e))throw new Error("Missing type index for "+e);return ze(this._idx.get(e)||0)}}class kc{visitType(e,t){throw new Error("Not implemented")}visitPrimitive(e,t){return this.visitType(e,t)}visitEmpty(e,t){return this.visitPrimitive(e,t)}visitBool(e,t){return this.visitPrimitive(e,t)}visitNull(e,t){return this.visitPrimitive(e,t)}visitReserved(e,t){return this.visitPrimitive(e,t)}visitText(e,t){return this.visitPrimitive(e,t)}visitNumber(e,t){return this.visitPrimitive(e,t)}visitInt(e,t){return this.visitNumber(e,t)}visitNat(e,t){return this.visitNumber(e,t)}visitFloat(e,t){return this.visitPrimitive(e,t)}visitFixedInt(e,t){return this.visitNumber(e,t)}visitFixedNat(e,t){return this.visitNumber(e,t)}visitPrincipal(e,t){return this.visitPrimitive(e,t)}visitConstruct(e,t){return this.visitType(e,t)}visitVec(e,t,n){return this.visitConstruct(e,n)}visitOpt(e,t,n){return this.visitConstruct(e,n)}visitRecord(e,t,n){return this.visitConstruct(e,n)}visitTuple(e,t,n){const i=t.map((c,l)=>[`_${l}_`,c]);return this.visitRecord(e,i,n)}visitVariant(e,t,n){return this.visitConstruct(e,n)}visitRec(e,t,n){return this.visitConstruct(t,n)}visitFunc(e,t){return this.visitConstruct(e,t)}visitService(e,t){return this.visitConstruct(e,t)}}class jn{display(){return this.name}valueToString(e){return De(e)}buildTypeTable(e){e.has(this)||this._buildTypeTableImpl(e)}}class ht extends jn{checkType(e){if(this.name!==e.name)throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`);return e}_buildTypeTableImpl(e){}}class Xt extends jn{checkType(e){if(e instanceof Ct){const t=e.getType();if(typeof t>"u")throw new Error("type mismatch with uninitialized type");return t}throw new Error(`type mismatch: type on the wire ${e.name}, expect type ${this.name}`)}encodeType(e){return e.indexOf(this.name)}}class eo extends ht{accept(e,t){return e.visitEmpty(this,t)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(){throw new Error("Empty cannot appear as a function argument")}valueToString(){throw new Error("Empty cannot appear as a value")}encodeType(){return ze(-17)}decodeValue(){throw new Error("Empty cannot appear as an output")}get name(){return"empty"}}class to extends jn{checkType(e){throw new Error("Method not implemented for unknown.")}accept(e,t){throw e.visitType(this,t)}covariant(e){throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(){throw new Error("Unknown cannot appear as a function argument")}valueToString(){throw new Error("Unknown cannot appear as a value")}encodeType(){throw new Error("Unknown cannot be serialized")}decodeValue(e,t){let n=t.decodeValue(e,t);Object(n)!==n&&(n=Object(n));let i;return t instanceof Ct?i=()=>t.getType():i=()=>t,Object.defineProperty(n,"type",{value:i,writable:!0,enumerable:!1,configurable:!0}),n}_buildTypeTableImpl(){throw new Error("Unknown cannot be serialized")}get name(){return"Unknown"}}class ro extends ht{accept(e,t){return e.visitBool(this,t)}covariant(e){if(typeof e=="boolean")return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return new Uint8Array([e?1:0])}encodeType(){return ze(-2)}decodeValue(e,t){switch(this.checkType(t),ar(e)){case 0:return!1;case 1:return!0;default:throw new Error("Boolean value out of range")}}get name(){return"bool"}}class kn extends ht{accept(e,t){return e.visitNull(this,t)}covariant(e){if(e===null)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(){return new ArrayBuffer(0)}encodeType(){return ze(-1)}decodeValue(e,t){return this.checkType(t),null}get name(){return"null"}}class vr extends ht{accept(e,t){return e.visitReserved(this,t)}covariant(e){return!0}encodeValue(){return new ArrayBuffer(0)}encodeType(){return ze(-16)}decodeValue(e,t){return t.name!==this.name&&t.decodeValue(e,t),null}get name(){return"reserved"}}class no extends ht{accept(e,t){return e.visitText(this,t)}covariant(e){if(typeof e=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=new TextEncoder().encode(e),n=Ce(t.byteLength);return Ue(n,t)}encodeType(){return ze(-15)}decodeValue(e,t){this.checkType(t);const n=Ze(e),i=or(e,Number(n));return new TextDecoder("utf8",{fatal:!0}).decode(i)}get name(){return"text"}valueToString(e){return'"'+e+'"'}}class io extends ht{accept(e,t){return e.visitInt(this,t)}covariant(e){if(typeof e=="bigint"||Number.isInteger(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return ze(e)}encodeType(){return ze(-4)}decodeValue(e,t){return this.checkType(t),Vt(e)}get name(){return"int"}valueToString(e){return e.toString()}}class so extends ht{accept(e,t){return e.visitNat(this,t)}covariant(e){if(typeof e=="bigint"&&e>=BigInt(0)||Number.isInteger(e)&&e>=0)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return Ce(e)}encodeType(){return ze(-3)}decodeValue(e,t){return this.checkType(t),Ze(e)}get name(){return"nat"}valueToString(e){return e.toString()}}class qi extends ht{constructor(e){if(super(),this._bits=e,e!==32&&e!==64)throw new Error("not a valid float type")}accept(e,t){return e.visitFloat(this,t)}covariant(e){if(typeof e=="number"||e instanceof Number)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=new ArrayBuffer(this._bits/8),n=new DataView(t);return this._bits===32?n.setFloat32(0,e,!0):n.setFloat64(0,e,!0),t}encodeType(){const e=this._bits===32?-13:-14;return ze(e)}decodeValue(e,t){this.checkType(t);const n=or(e,this._bits/8),i=new DataView(n);return this._bits===32?i.getFloat32(0,!0):i.getFloat64(0,!0)}get name(){return"float"+this._bits}valueToString(e){return e.toString()}}class cr extends ht{constructor(e){super(),this._bits=e}accept(e,t){return e.visitFixedInt(this,t)}covariant(e){const t=xi(this._bits-1)*BigInt(-1),n=xi(this._bits-1)-BigInt(1);let i=!1;if(typeof e=="bigint")i=e>=t&&e<=n;else if(Number.isInteger(e)){const c=BigInt(e);i=c>=t&&c<=n}else i=!1;if(i)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return Js(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ze(-9-e)}decodeValue(e,t){this.checkType(t);const n=Pc(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`int${this._bits}`}valueToString(e){return e.toString()}}class Wt extends ht{constructor(e){super(),this._bits=e}accept(e,t){return e.visitFixedNat(this,t)}covariant(e){const t=xi(this._bits);let n=!1;if(typeof e=="bigint"&&e>=BigInt(0)?n=e<t:Number.isInteger(e)&&e>=0?n=BigInt(e)<t:n=!1,n)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return Lc(e,this._bits/8)}encodeType(){const e=Math.log2(this._bits)-3;return ze(-5-e)}decodeValue(e,t){this.checkType(t);const n=Qs(e,this._bits/8);return this._bits<=32?Number(n):n}get name(){return`nat${this._bits}`}valueToString(e){return e.toString()}}class Yn extends Xt{constructor(e){super(),this._type=e,this._blobOptimization=!1,e instanceof Wt&&e._bits===8&&(this._blobOptimization=!0)}accept(e,t){return e.visitVec(this,this._type,t)}covariant(e){const t=this._type instanceof Wt?this._type._bits:this._type instanceof cr?this._type._bits:0;if(ArrayBuffer.isView(e)&&t==e.BYTES_PER_ELEMENT*8||Array.isArray(e)&&e.every((n,i)=>{try{return this._type.covariant(n)}catch(c){throw new Error(`Invalid ${this.display()} argument: 

index ${i} -> ${c.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=Ce(e.length);if(this._blobOptimization)return Ue(t,new Uint8Array(e));if(ArrayBuffer.isView(e))return Ue(t,new Uint8Array(e.buffer));const n=new Nr(new ArrayBuffer(t.byteLength+e.length),0);n.write(t);for(const i of e){const c=this._type.encodeValue(i);n.write(new Uint8Array(c))}return n.buffer}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const t=ze(-19),n=this._type.encodeType(e);e.add(this,Ue(t,n))}decodeValue(e,t){const n=this.checkType(t);if(!(n instanceof Yn))throw new Error("Not a vector type");const i=Number(Ze(e));if(this._type instanceof Wt){if(this._type._bits==8)return new Uint8Array(e.read(i));if(this._type._bits==16)return new Uint16Array(e.read(i*2));if(this._type._bits==32)return new Uint32Array(e.read(i*4));if(this._type._bits==64)return new BigUint64Array(e.read(i*8))}if(this._type instanceof cr){if(this._type._bits==8)return new Int8Array(e.read(i));if(this._type._bits==16)return new Int16Array(e.read(i*2));if(this._type._bits==32)return new Int32Array(e.read(i*4));if(this._type._bits==64)return new BigInt64Array(e.read(i*8))}const c=[];for(let l=0;l<i;l++)c.push(this._type.decodeValue(e,n._type));return c}get name(){return`vec ${this._type.name}`}display(){return`vec ${this._type.display()}`}valueToString(e){return"vec {"+e.map(n=>this._type.valueToString(n)).join("; ")+"}"}}class ur extends Xt{constructor(e){super(),this._type=e}accept(e,t){return e.visitOpt(this,this._type,t)}covariant(e){try{if(Array.isArray(e)&&(e.length===0||e.length===1&&this._type.covariant(e[0])))return!0}catch(t){throw new Error(`Invalid ${this.display()} argument: ${De(e)} 

-> ${t.message}`)}throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){return e.length===0?new Uint8Array([0]):Ue(new Uint8Array([1]),this._type.encodeValue(e[0]))}_buildTypeTableImpl(e){this._type.buildTypeTable(e);const t=ze(-18),n=this._type.encodeType(e);e.add(this,Ue(t,n))}decodeValue(e,t){if(t instanceof kn)return[];if(t instanceof vr)return[];let n=t;if(t instanceof Ct){const i=t.getType();if(typeof i>"u")throw new Error("type mismatch with uninitialized type");n=i}if(n instanceof ur)switch(ar(e)){case 0:return[];case 1:{const i=e.save();try{return[this._type.decodeValue(e,n._type)]}catch{return e.restore(i),n._type.decodeValue(e,n._type),[]}}default:throw new Error("Not an option value")}else{if(this._type instanceof kn||this._type instanceof ur||this._type instanceof vr)return n.decodeValue(e,n),[];{const i=e.save();try{return[this._type.decodeValue(e,t)]}catch{return e.restore(i),n.decodeValue(e,t),[]}}}}get name(){return`opt ${this._type.name}`}display(){return`opt ${this._type.display()}`}valueToString(e){return e.length===0?"null":`opt ${this._type.valueToString(e[0])}`}}class Xr extends Xt{constructor(e={}){super(),this._fields=Object.entries(e).sort((t,n)=>Ut(t[0])-Ut(n[0]))}accept(e,t){return e.visitRecord(this,this._fields,t)}tryAsTuple(){const e=[];for(let t=0;t<this._fields.length;t++){const[n,i]=this._fields[t];if(n!==`_${t}_`)return null;e.push(i)}return e}covariant(e){if(typeof e=="object"&&this._fields.every(([t,n])=>{if(!e.hasOwnProperty(t))throw new Error(`Record is missing key "${t}".`);try{return n.covariant(e[t])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

field ${t} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=this._fields.map(([i])=>e[i]),n=zr(this._fields,t,([,i],c)=>i.encodeValue(c));return Ue(...n)}_buildTypeTableImpl(e){this._fields.forEach(([c,l])=>l.buildTypeTable(e));const t=ze(-20),n=Ce(this._fields.length),i=this._fields.map(([c,l])=>Ue(Ce(Ut(c)),l.encodeType(e)));e.add(this,Ue(t,n,Ue(...i)))}decodeValue(e,t){const n=this.checkType(t);if(!(n instanceof Xr))throw new Error("Not a record type");const i={};let c=0,l=0;for(;l<n._fields.length;){const[u,y]=n._fields[l];if(c>=this._fields.length){y.decodeValue(e,y),l++;continue}const[E,I]=this._fields[c],T=Ut(this._fields[c][0]),U=Ut(u);if(T===U)i[E]=I.decodeValue(e,y),c++,l++;else if(U>T)if(I instanceof ur||I instanceof vr)i[E]=[],c++;else throw new Error("Cannot find required field "+E);else y.decodeValue(e,y),l++}for(const[u,y]of this._fields.slice(c))if(y instanceof ur||y instanceof vr)i[u]=[];else throw new Error("Cannot find required field "+u);return i}get name(){return`record {${this._fields.map(([t,n])=>t+":"+n.name).join("; ")}}`}display(){return`record {${this._fields.map(([t,n])=>t+":"+n.display()).join("; ")}}`}valueToString(e){const t=this._fields.map(([i])=>e[i]);return`record {${zr(this._fields,t,([i,c],l)=>i+"="+c.valueToString(l)).join("; ")}}`}}class Zn extends Xr{constructor(e){const t={};e.forEach((n,i)=>t["_"+i+"_"]=n),super(t),this._components=e}accept(e,t){return e.visitTuple(this,this._components,t)}covariant(e){if(Array.isArray(e)&&e.length>=this._fields.length&&this._components.every((t,n)=>{try{return t.covariant(e[n])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

index ${n} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=zr(this._components,e,(n,i)=>n.encodeValue(i));return Ue(...t)}decodeValue(e,t){const n=this.checkType(t);if(!(n instanceof Zn))throw new Error("not a tuple type");if(n._components.length<this._components.length)throw new Error("tuple mismatch");const i=[];for(const[c,l]of n._components.entries())c>=this._components.length?l.decodeValue(e,l):i.push(this._components[c].decodeValue(e,l));return i}display(){return`record {${this._components.map(t=>t.display()).join("; ")}}`}valueToString(e){return`record {${zr(this._components,e,(n,i)=>n.valueToString(i)).join("; ")}}`}}class Wn extends Xt{constructor(e={}){super(),this._fields=Object.entries(e).sort((t,n)=>Ut(t[0])-Ut(n[0]))}accept(e,t){return e.visitVariant(this,this._fields,t)}covariant(e){if(typeof e=="object"&&Object.entries(e).length===1&&this._fields.every(([t,n])=>{try{return!e.hasOwnProperty(t)||n.covariant(e[t])}catch(i){throw new Error(`Invalid ${this.display()} argument: 

variant ${t} -> ${i.message}`)}}))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){for(let t=0;t<this._fields.length;t++){const[n,i]=this._fields[t];if(e.hasOwnProperty(n)){const c=Ce(t),l=i.encodeValue(e[n]);return Ue(c,l)}}throw Error("Variant has no data: "+e)}_buildTypeTableImpl(e){this._fields.forEach(([,c])=>{c.buildTypeTable(e)});const t=ze(-21),n=Ce(this._fields.length),i=this._fields.map(([c,l])=>Ue(Ce(Ut(c)),l.encodeType(e)));e.add(this,Ue(t,n,...i))}decodeValue(e,t){const n=this.checkType(t);if(!(n instanceof Wn))throw new Error("Not a variant type");const i=Number(Ze(e));if(i>=n._fields.length)throw Error("Invalid variant index: "+i);const[c,l]=n._fields[i];for(const[u,y]of this._fields)if(Ut(c)===Ut(u)){const E=y.decodeValue(e,l);return{[u]:E}}throw new Error("Cannot find field hash "+c)}get name(){return`variant {${this._fields.map(([t,n])=>t+":"+n.name).join("; ")}}`}display(){return`variant {${this._fields.map(([t,n])=>t+(n.name==="null"?"":`:${n.display()}`)).join("; ")}}`}valueToString(e){for(const[t,n]of this._fields)if(e.hasOwnProperty(t)){const i=n.valueToString(e[t]);return i==="null"?`variant {${t}}`:`variant {${t}=${i}}`}throw new Error("Variant has no data: "+e)}}class Ct extends Xt{constructor(){super(...arguments),this._id=Ct._counter++,this._type=void 0}accept(e,t){if(!this._type)throw Error("Recursive type uninitialized.");return e.visitRec(this,this._type,t)}fill(e){this._type=e}getType(){return this._type}covariant(e){if(this._type&&this._type.covariant(e))return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.encodeValue(e)}_buildTypeTableImpl(e){if(!this._type)throw Error("Recursive type uninitialized.");e.add(this,new Uint8Array([])),this._type.buildTypeTable(e),e.merge(this,this._type.name)}decodeValue(e,t){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.decodeValue(e,t)}get name(){return`rec_${this._id}`}display(){if(!this._type)throw Error("Recursive type uninitialized.");return`${this.name}.${this._type.name}`}valueToString(e){if(!this._type)throw Error("Recursive type uninitialized.");return this._type.valueToString(e)}}Ct._counter=0;function Gi(r){if(ar(r)!==1)throw new Error("Cannot decode principal");const t=Number(Ze(r));return Le.fromUint8Array(new Uint8Array(or(r,t)))}class oo extends ht{accept(e,t){return e.visitPrincipal(this,t)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=e.toUint8Array(),n=Ce(t.byteLength);return Ue(new Uint8Array([1]),n,t)}encodeType(){return ze(-24)}decodeValue(e,t){return this.checkType(t),Gi(e)}get name(){return"principal"}valueToString(e){return`${this.name} "${e.toText()}"`}}class Hi extends Xt{constructor(e,t,n=[]){super(),this.argTypes=e,this.retTypes=t,this.annotations=n}static argsToString(e,t){if(e.length!==t.length)throw new Error("arity mismatch");return"("+e.map((n,i)=>n.valueToString(t[i])).join(", ")+")"}accept(e,t){return e.visitFunc(this,t)}covariant(e){if(Array.isArray(e)&&e.length===2&&e[0]&&e[0]._isPrincipal&&typeof e[1]=="string")return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue([e,t]){const n=e.toUint8Array(),i=Ce(n.byteLength),c=Ue(new Uint8Array([1]),i,n),l=new TextEncoder().encode(t),u=Ce(l.byteLength);return Ue(new Uint8Array([1]),c,u,l)}_buildTypeTableImpl(e){this.argTypes.forEach(E=>E.buildTypeTable(e)),this.retTypes.forEach(E=>E.buildTypeTable(e));const t=ze(-22),n=Ce(this.argTypes.length),i=Ue(...this.argTypes.map(E=>E.encodeType(e))),c=Ce(this.retTypes.length),l=Ue(...this.retTypes.map(E=>E.encodeType(e))),u=Ce(this.annotations.length),y=Ue(...this.annotations.map(E=>this.encodeAnnotation(E)));e.add(this,Ue(t,n,i,c,l,u,y))}decodeValue(e){if(ar(e)!==1)throw new Error("Cannot decode function reference");const n=Gi(e),i=Number(Ze(e)),c=or(e,i),u=new TextDecoder("utf8",{fatal:!0}).decode(c);return[n,u]}get name(){const e=this.argTypes.map(i=>i.name).join(", "),t=this.retTypes.map(i=>i.name).join(", "),n=" "+this.annotations.join(" ");return`(${e}) -> (${t})${n}`}valueToString([e,t]){return`func "${e.toText()}".${t}`}display(){const e=this.argTypes.map(i=>i.display()).join(", "),t=this.retTypes.map(i=>i.display()).join(", "),n=" "+this.annotations.join(" ");return`(${e})  (${t})${n}`}encodeAnnotation(e){if(e==="query")return new Uint8Array([1]);if(e==="oneway")return new Uint8Array([2]);if(e==="composite_query")return new Uint8Array([3]);throw new Error("Illegal function annotation")}}class ao extends Xt{constructor(e){super(),this._fields=Object.entries(e).sort((t,n)=>t[0]<n[0]?-1:t[0]>n[0]?1:0)}accept(e,t){return e.visitService(this,t)}covariant(e){if(e&&e._isPrincipal)return!0;throw new Error(`Invalid ${this.display()} argument: ${De(e)}`)}encodeValue(e){const t=e.toUint8Array(),n=Ce(t.length);return Ue(new Uint8Array([1]),n,t)}_buildTypeTableImpl(e){this._fields.forEach(([c,l])=>l.buildTypeTable(e));const t=ze(-23),n=Ce(this._fields.length),i=this._fields.map(([c,l])=>{const u=new TextEncoder().encode(c),y=Ce(u.length);return Ue(y,u,l.encodeType(e))});e.add(this,Ue(t,n,...i))}decodeValue(e){return Gi(e)}get name(){return`service {${this._fields.map(([t,n])=>t+":"+n.name).join("; ")}}`}valueToString(e){return`service "${e.toText()}"`}}function De(r){const e=JSON.stringify(r,(t,n)=>typeof n=="bigint"?`BigInt(${n})`:n);return e&&e.length>ns?e.substring(0,ns-3)+"...":e}function Cc(r,e){if(e.length<r.length)throw Error("Wrong number of message arguments");const t=new Mc;r.forEach(y=>y.buildTypeTable(t));const n=new TextEncoder().encode(gn),i=t.encode(),c=Ce(e.length),l=Ue(...r.map(y=>y.encodeType(t))),u=Ue(...zr(r,e,(y,E)=>{try{y.covariant(E)}catch(I){throw new Error(I.message+`

`)}return y.encodeValue(E)}));return Ue(n,i,c,l,u)}function $c(r,e){const t=new Nr(e);if(e.byteLength<gn.length)throw new Error("Message length smaller than magic number");const n=or(t,gn.length),i=new TextDecoder().decode(n);if(i!==gn)throw new Error("Wrong magic number: "+JSON.stringify(i));function c(v){const w=[],C=Number(Ze(v));for(let j=0;j<C;j++){const q=Number(Vt(v));switch(q){case-18:case-19:{const ie=Number(Vt(v));w.push([q,ie]);break}case-20:case-21:{const ie=[];let M=Number(Ze(v)),W;for(;M--;){const Y=Number(Ze(v));if(Y>=Math.pow(2,32))throw new Error("field id out of 32-bit range");if(typeof W=="number"&&W>=Y)throw new Error("field id collision or not sorted");W=Y;const J=Number(Vt(v));ie.push([Y,J])}w.push([q,ie]);break}case-22:{const ie=[];let M=Number(Ze(v));for(;M--;)ie.push(Number(Vt(v)));const W=[];let Y=Number(Ze(v));for(;Y--;)W.push(Number(Vt(v)));const J=[];let re=Number(Ze(v));for(;re--;)switch(Number(Ze(v))){case 1:{J.push("query");break}case 2:{J.push("oneway");break}case 3:{J.push("composite_query");break}default:throw new Error("unknown annotation")}w.push([q,[ie,W,J]]);break}case-23:{let ie=Number(Ze(v));const M=[];for(;ie--;){const W=Number(Ze(v)),Y=new TextDecoder().decode(or(v,W)),J=Vt(v);M.push([Y,J])}w.push([q,M]);break}default:throw new Error("Illegal op_code: "+q)}}const k=[],z=Number(Ze(v));for(let j=0;j<z;j++)k.push(Number(Vt(v)));return[w,k]}const[l,u]=c(t);if(u.length<r.length)throw new Error("Wrong number of return values");const y=l.map(v=>Ro());function E(v){if(v<-24)throw new Error("future value not supported");if(v<0)switch(v){case-1:return lo;case-2:return fo;case-3:return yo;case-4:return po;case-5:return _o;case-6:return Bo;case-7:return Io;case-8:return Ao;case-9:return mo;case-10:return bo;case-11:return xo;case-12:return Eo;case-13:return wo;case-14:return go;case-15:return ho;case-16:return uo;case-17:return co;case-24:return So;default:throw new Error("Illegal op_code: "+v)}if(v>=l.length)throw new Error("type index out of range");return y[v]}function I(v){switch(v[0]){case-19:{const w=E(v[1]);return To(w)}case-18:{const w=E(v[1]);return No(w)}case-20:{const w={};for(const[z,j]of v[1]){const q=`_${z}_`;w[q]=E(j)}const C=Uo(w),k=C.tryAsTuple();return Array.isArray(k)?vo(...k):C}case-21:{const w={};for(const[C,k]of v[1]){const z=`_${C}_`;w[z]=E(k)}return Fo(w)}case-22:{const[w,C,k]=v[1];return Oo(w.map(z=>E(z)),C.map(z=>E(z)),k)}case-23:{const w={},C=v[1];for(const[k,z]of C){let j=E(z);if(j instanceof Ct&&(j=j.getType()),!(j instanceof Hi))throw new Error("Illegal service definition: services can only contain functions");w[k]=j}return Lo(w)}default:throw new Error("Illegal op_code: "+v[0])}}l.forEach((v,w)=>{if(v[0]===-22){const C=I(v);y[w].fill(C)}}),l.forEach((v,w)=>{if(v[0]!==-22){const C=I(v);y[w].fill(C)}});const T=u.map(v=>E(v)),U=r.map((v,w)=>v.decodeValue(t,T[w]));for(let v=r.length;v<T.length;v++)T[v].decodeValue(t,T[v]);if(t.byteLength>0)throw new Error("decode: Left-over bytes");return U}const co=new eo,uo=new vr,Dc=new to,fo=new ro,lo=new kn,ho=new no,po=new io,yo=new so,wo=new qi(32),go=new qi(64),mo=new cr(8),bo=new cr(16),xo=new cr(32),Eo=new cr(64),_o=new Wt(8),Bo=new Wt(16),Io=new Wt(32),Ao=new Wt(64),So=new oo;function vo(...r){return new Zn(r)}function To(r){return new Yn(r)}function No(r){return new ur(r)}function Uo(r){return new Xr(r)}function Fo(r){return new Wn(r)}function Ro(){return new Ct}function Oo(r,e,t=[]){return new Hi(r,e,t)}function Lo(r){return new ao(r)}const H0=Object.freeze(Object.defineProperty({__proto__:null,Bool:fo,BoolClass:ro,ConstructType:Xt,Empty:co,EmptyClass:eo,FixedIntClass:cr,FixedNatClass:Wt,Float32:wo,Float64:go,FloatClass:qi,Func:Oo,FuncClass:Hi,Int:po,Int16:bo,Int32:xo,Int64:Eo,Int8:mo,IntClass:io,Nat:yo,Nat16:Bo,Nat32:Io,Nat64:Ao,Nat8:_o,NatClass:so,Null:lo,NullClass:kn,Opt:No,OptClass:ur,PrimitiveType:ht,Principal:So,PrincipalClass:oo,Rec:Ro,RecClass:Ct,Record:Uo,RecordClass:Xr,Reserved:uo,ReservedClass:vr,Service:Lo,ServiceClass:ao,Text:ho,TextClass:no,Tuple:vo,TupleClass:Zn,Type:jn,Unknown:Dc,UnknownClass:to,Variant:Fo,VariantClass:Wn,Vec:To,VecClass:Yn,Visitor:kc,decode:$c,encode:Cc},Symbol.toStringTag,{value:"Module"}));var Po={},Jr={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){var e=Wr,t=Kr,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=u,r.SlowBuffer=j,r.INSPECT_MAX_BYTES=50;var i=2147483647;r.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var h=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(h,s),h.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(h){if(h>i)throw new RangeError('The value "'+h+'" is invalid for option "size"');var s=new Uint8Array(h);return Object.setPrototypeOf(s,u.prototype),s}function u(h,s,o){if(typeof h=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return T(h)}return y(h,s,o)}u.poolSize=8192;function y(h,s,o){if(typeof h=="string")return U(h,s);if(ArrayBuffer.isView(h))return w(h);if(h==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);if(R(h,ArrayBuffer)||h&&R(h.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(R(h,SharedArrayBuffer)||h&&R(h.buffer,SharedArrayBuffer)))return C(h,s,o);if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var p=h.valueOf&&h.valueOf();if(p!=null&&p!==h)return u.from(p,s,o);var b=k(h);if(b)return b;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof h[Symbol.toPrimitive]=="function")return u.from(h[Symbol.toPrimitive]("string"),s,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h)}u.from=function(h,s,o){return y(h,s,o)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function E(h){if(typeof h!="number")throw new TypeError('"size" argument must be of type number');if(h<0)throw new RangeError('The value "'+h+'" is invalid for option "size"')}function I(h,s,o){return E(h),h<=0?l(h):s!==void 0?typeof o=="string"?l(h).fill(s,o):l(h).fill(s):l(h)}u.alloc=function(h,s,o){return I(h,s,o)};function T(h){return E(h),l(h<0?0:z(h)|0)}u.allocUnsafe=function(h){return T(h)},u.allocUnsafeSlow=function(h){return T(h)};function U(h,s){if((typeof s!="string"||s==="")&&(s="utf8"),!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s);var o=q(h,s)|0,p=l(o),b=p.write(h,s);return b!==o&&(p=p.slice(0,b)),p}function v(h){for(var s=h.length<0?0:z(h.length)|0,o=l(s),p=0;p<s;p+=1)o[p]=h[p]&255;return o}function w(h){if(R(h,Uint8Array)){var s=new Uint8Array(h);return C(s.buffer,s.byteOffset,s.byteLength)}return v(h)}function C(h,s,o){if(s<0||h.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(h.byteLength<s+(o||0))throw new RangeError('"length" is outside of buffer bounds');var p;return s===void 0&&o===void 0?p=new Uint8Array(h):o===void 0?p=new Uint8Array(h,s):p=new Uint8Array(h,s,o),Object.setPrototypeOf(p,u.prototype),p}function k(h){if(u.isBuffer(h)){var s=z(h.length)|0,o=l(s);return o.length===0||h.copy(o,0,0,s),o}if(h.length!==void 0)return typeof h.length!="number"||F(h.length)?l(0):v(h);if(h.type==="Buffer"&&Array.isArray(h.data))return v(h.data)}function z(h){if(h>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return h|0}function j(h){return+h!=h&&(h=0),u.alloc(+h)}u.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==u.prototype},u.compare=function(s,o){if(R(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),R(o,Uint8Array)&&(o=u.from(o,o.offset,o.byteLength)),!u.isBuffer(s)||!u.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===o)return 0;for(var p=s.length,b=o.length,A=0,$=Math.min(p,b);A<$;++A)if(s[A]!==o[A]){p=s[A],b=o[A];break}return p<b?-1:b<p?1:0},u.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(s,o){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return u.alloc(0);var p;if(o===void 0)for(o=0,p=0;p<s.length;++p)o+=s[p].length;var b=u.allocUnsafe(o),A=0;for(p=0;p<s.length;++p){var $=s[p];if(R($,Uint8Array))A+$.length>b.length?u.from($).copy(b,A):Uint8Array.prototype.set.call(b,$,A);else if(u.isBuffer($))$.copy(b,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=$.length}return b};function q(h,s){if(u.isBuffer(h))return h.length;if(ArrayBuffer.isView(h)||R(h,ArrayBuffer))return h.byteLength;if(typeof h!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof h);var o=h.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&o===0)return 0;for(var b=!1;;)switch(s){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return te(h).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return x(h).length;default:if(b)return p?-1:te(h).length;s=(""+s).toLowerCase(),b=!0}}u.byteLength=q;function ie(h,s,o){var p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,s>>>=0,o<=s))return"";for(h||(h="utf8");;)switch(h){case"hex":return ee(this,s,o);case"utf8":case"utf-8":return L(this,s,o);case"ascii":return Z(this,s,o);case"latin1":case"binary":return G(this,s,o);case"base64":return S(this,s,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,s,o);default:if(p)throw new TypeError("Unknown encoding: "+h);h=(h+"").toLowerCase(),p=!0}}u.prototype._isBuffer=!0;function M(h,s,o){var p=h[s];h[s]=h[o],h[o]=p}u.prototype.swap16=function(){var s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var o=0;o<s;o+=2)M(this,o,o+1);return this},u.prototype.swap32=function(){var s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var o=0;o<s;o+=4)M(this,o,o+3),M(this,o+1,o+2);return this},u.prototype.swap64=function(){var s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var o=0;o<s;o+=8)M(this,o,o+7),M(this,o+1,o+6),M(this,o+2,o+5),M(this,o+3,o+4);return this},u.prototype.toString=function(){var s=this.length;return s===0?"":arguments.length===0?L(this,0,s):ie.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(s){if(!u.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:u.compare(this,s)===0},u.prototype.inspect=function(){var s="",o=r.INSPECT_MAX_BYTES;return s=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(s+=" ... "),"<Buffer "+s+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(s,o,p,b,A){if(R(s,Uint8Array)&&(s=u.from(s,s.offset,s.byteLength)),!u.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(o===void 0&&(o=0),p===void 0&&(p=s?s.length:0),b===void 0&&(b=0),A===void 0&&(A=this.length),o<0||p>s.length||b<0||A>this.length)throw new RangeError("out of range index");if(b>=A&&o>=p)return 0;if(b>=A)return-1;if(o>=p)return 1;if(o>>>=0,p>>>=0,b>>>=0,A>>>=0,this===s)return 0;for(var $=A-b,se=p-o,pe=Math.min($,se),ge=this.slice(b,A),_e=s.slice(o,p),d=0;d<pe;++d)if(ge[d]!==_e[d]){$=ge[d],se=_e[d];break}return $<se?-1:se<$?1:0};function W(h,s,o,p,b){if(h.length===0)return-1;if(typeof o=="string"?(p=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,F(o)&&(o=b?0:h.length-1),o<0&&(o=h.length+o),o>=h.length){if(b)return-1;o=h.length-1}else if(o<0)if(b)o=0;else return-1;if(typeof s=="string"&&(s=u.from(s,p)),u.isBuffer(s))return s.length===0?-1:Y(h,s,o,p,b);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?b?Uint8Array.prototype.indexOf.call(h,s,o):Uint8Array.prototype.lastIndexOf.call(h,s,o):Y(h,[s],o,p,b);throw new TypeError("val must be string, number or Buffer")}function Y(h,s,o,p,b){var A=1,$=h.length,se=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(h.length<2||s.length<2)return-1;A=2,$/=2,se/=2,o/=2}function pe(f,_){return A===1?f[_]:f.readUInt16BE(_*A)}var ge;if(b){var _e=-1;for(ge=o;ge<$;ge++)if(pe(h,ge)===pe(s,_e===-1?0:ge-_e)){if(_e===-1&&(_e=ge),ge-_e+1===se)return _e*A}else _e!==-1&&(ge-=ge-_e),_e=-1}else for(o+se>$&&(o=$-se),ge=o;ge>=0;ge--){for(var d=!0,a=0;a<se;a++)if(pe(h,ge+a)!==pe(s,a)){d=!1;break}if(d)return ge}return-1}u.prototype.includes=function(s,o,p){return this.indexOf(s,o,p)!==-1},u.prototype.indexOf=function(s,o,p){return W(this,s,o,p,!0)},u.prototype.lastIndexOf=function(s,o,p){return W(this,s,o,p,!1)};function J(h,s,o,p){o=Number(o)||0;var b=h.length-o;p?(p=Number(p),p>b&&(p=b)):p=b;var A=s.length;p>A/2&&(p=A/2);for(var $=0;$<p;++$){var se=parseInt(s.substr($*2,2),16);if(F(se))return $;h[o+$]=se}return $}function re(h,s,o,p){return B(te(s,h.length-o),h,o,p)}function K(h,s,o,p){return B(ae(s),h,o,p)}function ye(h,s,o,p){return B(x(s),h,o,p)}function he(h,s,o,p){return B(m(s,h.length-o),h,o,p)}u.prototype.write=function(s,o,p,b){if(o===void 0)b="utf8",p=this.length,o=0;else if(p===void 0&&typeof o=="string")b=o,p=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(p)?(p=p>>>0,b===void 0&&(b="utf8")):(b=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var A=this.length-o;if((p===void 0||p>A)&&(p=A),s.length>0&&(p<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");b||(b="utf8");for(var $=!1;;)switch(b){case"hex":return J(this,s,o,p);case"utf8":case"utf-8":return re(this,s,o,p);case"ascii":case"latin1":case"binary":return K(this,s,o,p);case"base64":return ye(this,s,o,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,s,o,p);default:if($)throw new TypeError("Unknown encoding: "+b);b=(""+b).toLowerCase(),$=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function S(h,s,o){return s===0&&o===h.length?e.fromByteArray(h):e.fromByteArray(h.slice(s,o))}function L(h,s,o){o=Math.min(h.length,o);for(var p=[],b=s;b<o;){var A=h[b],$=null,se=A>239?4:A>223?3:A>191?2:1;if(b+se<=o){var pe,ge,_e,d;switch(se){case 1:A<128&&($=A);break;case 2:pe=h[b+1],(pe&192)===128&&(d=(A&31)<<6|pe&63,d>127&&($=d));break;case 3:pe=h[b+1],ge=h[b+2],(pe&192)===128&&(ge&192)===128&&(d=(A&15)<<12|(pe&63)<<6|ge&63,d>2047&&(d<55296||d>57343)&&($=d));break;case 4:pe=h[b+1],ge=h[b+2],_e=h[b+3],(pe&192)===128&&(ge&192)===128&&(_e&192)===128&&(d=(A&15)<<18|(pe&63)<<12|(ge&63)<<6|_e&63,d>65535&&d<1114112&&($=d))}}$===null?($=65533,se=1):$>65535&&($-=65536,p.push($>>>10&1023|55296),$=56320|$&1023),p.push($),b+=se}return X(p)}var V=4096;function X(h){var s=h.length;if(s<=V)return String.fromCharCode.apply(String,h);for(var o="",p=0;p<s;)o+=String.fromCharCode.apply(String,h.slice(p,p+=V));return o}function Z(h,s,o){var p="";o=Math.min(h.length,o);for(var b=s;b<o;++b)p+=String.fromCharCode(h[b]&127);return p}function G(h,s,o){var p="";o=Math.min(h.length,o);for(var b=s;b<o;++b)p+=String.fromCharCode(h[b]);return p}function ee(h,s,o){var p=h.length;(!s||s<0)&&(s=0),(!o||o<0||o>p)&&(o=p);for(var b="",A=s;A<o;++A)b+=P[h[A]];return b}function le(h,s,o){for(var p=h.slice(s,o),b="",A=0;A<p.length-1;A+=2)b+=String.fromCharCode(p[A]+p[A+1]*256);return b}u.prototype.slice=function(s,o){var p=this.length;s=~~s,o=o===void 0?p:~~o,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),o<0?(o+=p,o<0&&(o=0)):o>p&&(o=p),o<s&&(o=s);var b=this.subarray(s,o);return Object.setPrototypeOf(b,u.prototype),b};function oe(h,s,o){if(h%1!==0||h<0)throw new RangeError("offset is not uint");if(h+s>o)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s],A=1,$=0;++$<o&&(A*=256);)b+=this[s+$]*A;return b},u.prototype.readUintBE=u.prototype.readUIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s+--o],A=1;o>0&&(A*=256);)b+=this[s+--o]*A;return b},u.prototype.readUint8=u.prototype.readUInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]|this[s+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(s,o){return s=s>>>0,o||oe(s,2,this.length),this[s]<<8|this[s+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},u.prototype.readIntLE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=this[s],A=1,$=0;++$<o&&(A*=256);)b+=this[s+$]*A;return A*=128,b>=A&&(b-=Math.pow(2,8*o)),b},u.prototype.readIntBE=function(s,o,p){s=s>>>0,o=o>>>0,p||oe(s,o,this.length);for(var b=o,A=1,$=this[s+--b];b>0&&(A*=256);)$+=this[s+--b]*A;return A*=128,$>=A&&($-=Math.pow(2,8*o)),$},u.prototype.readInt8=function(s,o){return s=s>>>0,o||oe(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},u.prototype.readInt16LE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},u.prototype.readInt16BE=function(s,o){s=s>>>0,o||oe(s,2,this.length);var p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},u.prototype.readInt32LE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},u.prototype.readInt32BE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},u.prototype.readFloatLE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),t.read(this,s,!0,23,4)},u.prototype.readFloatBE=function(s,o){return s=s>>>0,o||oe(s,4,this.length),t.read(this,s,!1,23,4)},u.prototype.readDoubleLE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),t.read(this,s,!0,52,8)},u.prototype.readDoubleBE=function(s,o){return s=s>>>0,o||oe(s,8,this.length),t.read(this,s,!1,52,8)};function fe(h,s,o,p,b,A){if(!u.isBuffer(h))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>b||s<A)throw new RangeError('"value" argument is out of bounds');if(o+p>h.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(s,o,p,b){if(s=+s,o=o>>>0,p=p>>>0,!b){var A=Math.pow(2,8*p)-1;fe(this,s,o,p,A,0)}var $=1,se=0;for(this[o]=s&255;++se<p&&($*=256);)this[o+se]=s/$&255;return o+p},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(s,o,p,b){if(s=+s,o=o>>>0,p=p>>>0,!b){var A=Math.pow(2,8*p)-1;fe(this,s,o,p,A,0)}var $=p-1,se=1;for(this[o+$]=s&255;--$>=0&&(se*=256);)this[o+$]=s/se&255;return o+p},u.prototype.writeUint8=u.prototype.writeUInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,255,0),this[o]=s&255,o+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,65535,0),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o+3]=s>>>24,this[o+2]=s>>>16,this[o+1]=s>>>8,this[o]=s&255,o+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,4294967295,0),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4},u.prototype.writeIntLE=function(s,o,p,b){if(s=+s,o=o>>>0,!b){var A=Math.pow(2,8*p-1);fe(this,s,o,p,A-1,-A)}var $=0,se=1,pe=0;for(this[o]=s&255;++$<p&&(se*=256);)s<0&&pe===0&&this[o+$-1]!==0&&(pe=1),this[o+$]=(s/se>>0)-pe&255;return o+p},u.prototype.writeIntBE=function(s,o,p,b){if(s=+s,o=o>>>0,!b){var A=Math.pow(2,8*p-1);fe(this,s,o,p,A-1,-A)}var $=p-1,se=1,pe=0;for(this[o+$]=s&255;--$>=0&&(se*=256);)s<0&&pe===0&&this[o+$+1]!==0&&(pe=1),this[o+$]=(s/se>>0)-pe&255;return o+p},u.prototype.writeInt8=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,1,127,-128),s<0&&(s=255+s+1),this[o]=s&255,o+1},u.prototype.writeInt16LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s&255,this[o+1]=s>>>8,o+2},u.prototype.writeInt16BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,2,32767,-32768),this[o]=s>>>8,this[o+1]=s&255,o+2},u.prototype.writeInt32LE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),this[o]=s&255,this[o+1]=s>>>8,this[o+2]=s>>>16,this[o+3]=s>>>24,o+4},u.prototype.writeInt32BE=function(s,o,p){return s=+s,o=o>>>0,p||fe(this,s,o,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[o]=s>>>24,this[o+1]=s>>>16,this[o+2]=s>>>8,this[o+3]=s&255,o+4};function Q(h,s,o,p,b,A){if(o+p>h.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function g(h,s,o,p,b){return s=+s,o=o>>>0,b||Q(h,s,o,4),t.write(h,s,o,p,23,4),o+4}u.prototype.writeFloatLE=function(s,o,p){return g(this,s,o,!0,p)},u.prototype.writeFloatBE=function(s,o,p){return g(this,s,o,!1,p)};function ne(h,s,o,p,b){return s=+s,o=o>>>0,b||Q(h,s,o,8),t.write(h,s,o,p,52,8),o+8}u.prototype.writeDoubleLE=function(s,o,p){return ne(this,s,o,!0,p)},u.prototype.writeDoubleBE=function(s,o,p){return ne(this,s,o,!1,p)},u.prototype.copy=function(s,o,p,b){if(!u.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!b&&b!==0&&(b=this.length),o>=s.length&&(o=s.length),o||(o=0),b>0&&b<p&&(b=p),b===p||s.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("sourceEnd out of bounds");b>this.length&&(b=this.length),s.length-o<b-p&&(b=s.length-o+p);var A=b-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,p,b):Uint8Array.prototype.set.call(s,this.subarray(p,b),o),A},u.prototype.fill=function(s,o,p,b){if(typeof s=="string"){if(typeof o=="string"?(b=o,o=0,p=this.length):typeof p=="string"&&(b=p,p=this.length),b!==void 0&&typeof b!="string")throw new TypeError("encoding must be a string");if(typeof b=="string"&&!u.isEncoding(b))throw new TypeError("Unknown encoding: "+b);if(s.length===1){var A=s.charCodeAt(0);(b==="utf8"&&A<128||b==="latin1")&&(s=A)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(o<0||this.length<o||this.length<p)throw new RangeError("Out of range index");if(p<=o)return this;o=o>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);var $;if(typeof s=="number")for($=o;$<p;++$)this[$]=s;else{var se=u.isBuffer(s)?s:u.from(s,b),pe=se.length;if(pe===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for($=0;$<p-o;++$)this[$+o]=se[$%pe]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function de(h){if(h=h.split("=")[0],h=h.trim().replace(ue,""),h.length<2)return"";for(;h.length%4!==0;)h=h+"=";return h}function te(h,s){s=s||1/0;for(var o,p=h.length,b=null,A=[],$=0;$<p;++$){if(o=h.charCodeAt($),o>55295&&o<57344){if(!b){if(o>56319){(s-=3)>-1&&A.push(239,191,189);continue}else if($+1===p){(s-=3)>-1&&A.push(239,191,189);continue}b=o;continue}if(o<56320){(s-=3)>-1&&A.push(239,191,189),b=o;continue}o=(b-55296<<10|o-56320)+65536}else b&&(s-=3)>-1&&A.push(239,191,189);if(b=null,o<128){if((s-=1)<0)break;A.push(o)}else if(o<2048){if((s-=2)<0)break;A.push(o>>6|192,o&63|128)}else if(o<65536){if((s-=3)<0)break;A.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((s-=4)<0)break;A.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return A}function ae(h){for(var s=[],o=0;o<h.length;++o)s.push(h.charCodeAt(o)&255);return s}function m(h,s){for(var o,p,b,A=[],$=0;$<h.length&&!((s-=2)<0);++$)o=h.charCodeAt($),p=o>>8,b=o%256,A.push(b),A.push(p);return A}function x(h){return e.toByteArray(de(h))}function B(h,s,o,p){for(var b=0;b<p&&!(b+o>=s.length||b>=h.length);++b)s[b+o]=h[b];return b}function R(h,s){return h instanceof s||h!=null&&h.constructor!=null&&h.constructor.name!=null&&h.constructor.name===s.name}function F(h){return h!==h}var P=function(){for(var h="0123456789abcdef",s=new Array(256),o=0;o<16;++o)for(var p=o*16,b=0;b<16;++b)s[p+b]=h[o]+h[b];return s}()})(Jr);var Mo={exports:{}};(function(r){(function(e){var t,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,c=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",y=1e14,E=14,I=9007199254740991,T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],U=1e7,v=1e9;function w(W){var Y,J,re,K=g.prototype={constructor:g,toString:null,valueOf:null},ye=new g(1),he=20,S=4,L=-7,V=21,X=-1e7,Z=1e7,G=!1,ee=1,le=0,oe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},fe="0123456789abcdefghijklmnopqrstuvwxyz",Q=!0;function g(m,x){var B,R,F,P,h,s,o,p,b=this;if(!(b instanceof g))return new g(m,x);if(x==null){if(m&&m._isBigNumber===!0){b.s=m.s,!m.c||m.e>Z?b.c=b.e=null:m.e<X?b.c=[b.e=0]:(b.e=m.e,b.c=m.c.slice());return}if((s=typeof m=="number")&&m*0==0){if(b.s=1/m<0?(m=-m,-1):1,m===~~m){for(P=0,h=m;h>=10;h/=10,P++);P>Z?b.c=b.e=null:(b.e=P,b.c=[m]);return}p=String(m)}else{if(!n.test(p=String(m)))return re(b,p,s);b.s=p.charCodeAt(0)==45?(p=p.slice(1),-1):1}(P=p.indexOf("."))>-1&&(p=p.replace(".","")),(h=p.search(/e/i))>0?(P<0&&(P=h),P+=+p.slice(h+1),p=p.substring(0,h)):P<0&&(P=p.length)}else{if(j(x,2,fe.length,"Base"),x==10&&Q)return b=new g(m),te(b,he+b.e+1,S);if(p=String(m),s=typeof m=="number"){if(m*0!=0)return re(b,p,s,x);if(b.s=1/m<0?(p=p.slice(1),-1):1,g.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(u+m)}else b.s=p.charCodeAt(0)===45?(p=p.slice(1),-1):1;for(B=fe.slice(0,x),P=h=0,o=p.length;h<o;h++)if(B.indexOf(R=p.charAt(h))<0){if(R=="."){if(h>P){P=o;continue}}else if(!F&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){F=!0,h=-1,P=0;continue}return re(b,String(m),s,x)}s=!1,p=J(p,x,10,b.s),(P=p.indexOf("."))>-1?p=p.replace(".",""):P=p.length}for(h=0;p.charCodeAt(h)===48;h++);for(o=p.length;p.charCodeAt(--o)===48;);if(p=p.slice(h,++o)){if(o-=h,s&&g.DEBUG&&o>15&&(m>I||m!==c(m)))throw Error(u+b.s*m);if((P=P-h-1)>Z)b.c=b.e=null;else if(P<X)b.c=[b.e=0];else{if(b.e=P,b.c=[],h=(P+1)%E,P<0&&(h+=E),h<o){for(h&&b.c.push(+p.slice(0,h)),o-=E;h<o;)b.c.push(+p.slice(h,h+=E));h=E-(p=p.slice(h)).length}else h-=o;for(;h--;p+="0");b.c.push(+p)}}else b.c=[b.e=0]}g.clone=w,g.ROUND_UP=0,g.ROUND_DOWN=1,g.ROUND_CEIL=2,g.ROUND_FLOOR=3,g.ROUND_HALF_UP=4,g.ROUND_HALF_DOWN=5,g.ROUND_HALF_EVEN=6,g.ROUND_HALF_CEIL=7,g.ROUND_HALF_FLOOR=8,g.EUCLID=9,g.config=g.set=function(m){var x,B;if(m!=null)if(typeof m=="object"){if(m.hasOwnProperty(x="DECIMAL_PLACES")&&(B=m[x],j(B,0,v,x),he=B),m.hasOwnProperty(x="ROUNDING_MODE")&&(B=m[x],j(B,0,8,x),S=B),m.hasOwnProperty(x="EXPONENTIAL_AT")&&(B=m[x],B&&B.pop?(j(B[0],-v,0,x),j(B[1],0,v,x),L=B[0],V=B[1]):(j(B,-v,v,x),L=-(V=B<0?-B:B))),m.hasOwnProperty(x="RANGE"))if(B=m[x],B&&B.pop)j(B[0],-v,-1,x),j(B[1],1,v,x),X=B[0],Z=B[1];else if(j(B,-v,v,x),B)X=-(Z=B<0?-B:B);else throw Error(l+x+" cannot be zero: "+B);if(m.hasOwnProperty(x="CRYPTO"))if(B=m[x],B===!!B)if(B)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=B;else throw G=!B,Error(l+"crypto unavailable");else G=B;else throw Error(l+x+" not true or false: "+B);if(m.hasOwnProperty(x="MODULO_MODE")&&(B=m[x],j(B,0,9,x),ee=B),m.hasOwnProperty(x="POW_PRECISION")&&(B=m[x],j(B,0,v,x),le=B),m.hasOwnProperty(x="FORMAT"))if(B=m[x],typeof B=="object")oe=B;else throw Error(l+x+" not an object: "+B);if(m.hasOwnProperty(x="ALPHABET"))if(B=m[x],typeof B=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(B))Q=B.slice(0,10)=="0123456789",fe=B;else throw Error(l+x+" invalid: "+B)}else throw Error(l+"Object expected: "+m);return{DECIMAL_PLACES:he,ROUNDING_MODE:S,EXPONENTIAL_AT:[L,V],RANGE:[X,Z],CRYPTO:G,MODULO_MODE:ee,POW_PRECISION:le,FORMAT:oe,ALPHABET:fe}},g.isBigNumber=function(m){if(!m||m._isBigNumber!==!0)return!1;if(!g.DEBUG)return!0;var x,B,R=m.c,F=m.e,P=m.s;e:if({}.toString.call(R)=="[object Array]"){if((P===1||P===-1)&&F>=-v&&F<=v&&F===c(F)){if(R[0]===0){if(F===0&&R.length===1)return!0;break e}if(x=(F+1)%E,x<1&&(x+=E),String(R[0]).length==x){for(x=0;x<R.length;x++)if(B=R[x],B<0||B>=y||B!==c(B))break e;if(B!==0)return!0}}}else if(R===null&&F===null&&(P===null||P===1||P===-1))return!0;throw Error(l+"Invalid BigNumber: "+m)},g.maximum=g.max=function(){return ue(arguments,-1)},g.minimum=g.min=function(){return ue(arguments,1)},g.random=function(){var m=9007199254740992,x=Math.random()*m&2097151?function(){return c(Math.random()*m)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(B){var R,F,P,h,s,o=0,p=[],b=new g(ye);if(B==null?B=he:j(B,0,v),h=i(B/E),G)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(h*=2));o<h;)s=R[o]*131072+(R[o+1]>>>11),s>=9e15?(F=crypto.getRandomValues(new Uint32Array(2)),R[o]=F[0],R[o+1]=F[1]):(p.push(s%1e14),o+=2);o=h/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(h*=7);o<h;)s=(R[o]&31)*281474976710656+R[o+1]*1099511627776+R[o+2]*4294967296+R[o+3]*16777216+(R[o+4]<<16)+(R[o+5]<<8)+R[o+6],s>=9e15?crypto.randomBytes(7).copy(R,o):(p.push(s%1e14),o+=7);o=h/7}else throw G=!1,Error(l+"crypto unavailable");if(!G)for(;o<h;)s=x(),s<9e15&&(p[o++]=s%1e14);for(h=p[--o],B%=E,h&&B&&(s=T[E-B],p[o]=c(h/s)*s);p[o]===0;p.pop(),o--);if(o<0)p=[P=0];else{for(P=-1;p[0]===0;p.splice(0,1),P-=E);for(o=1,s=p[0];s>=10;s/=10,o++);o<E&&(P-=E-o)}return b.e=P,b.c=p,b}}(),g.sum=function(){for(var m=1,x=arguments,B=new g(x[0]);m<x.length;)B=B.plus(x[m++]);return B},J=function(){var m="0123456789";function x(B,R,F,P){for(var h,s=[0],o,p=0,b=B.length;p<b;){for(o=s.length;o--;s[o]*=R);for(s[0]+=P.indexOf(B.charAt(p++)),h=0;h<s.length;h++)s[h]>F-1&&(s[h+1]==null&&(s[h+1]=0),s[h+1]+=s[h]/F|0,s[h]%=F)}return s.reverse()}return function(B,R,F,P,h){var s,o,p,b,A,$,se,pe,ge=B.indexOf("."),_e=he,d=S;for(ge>=0&&(b=le,le=0,B=B.replace(".",""),pe=new g(R),$=pe.pow(B.length-ge),le=b,pe.c=x(M(k($.c),$.e,"0"),10,F,m),pe.e=pe.c.length),se=x(B,R,F,h?(s=fe,m):(s=m,fe)),p=b=se.length;se[--b]==0;se.pop());if(!se[0])return s.charAt(0);if(ge<0?--p:($.c=se,$.e=p,$.s=P,$=Y($,pe,_e,d,F),se=$.c,A=$.r,p=$.e),o=p+_e+1,ge=se[o],b=F/2,A=A||o<0||se[o+1]!=null,A=d<4?(ge!=null||A)&&(d==0||d==($.s<0?3:2)):ge>b||ge==b&&(d==4||A||d==6&&se[o-1]&1||d==($.s<0?8:7)),o<1||!se[0])B=A?M(s.charAt(1),-_e,s.charAt(0)):s.charAt(0);else{if(se.length=o,A)for(--F;++se[--o]>F;)se[o]=0,o||(++p,se=[1].concat(se));for(b=se.length;!se[--b];);for(ge=0,B="";ge<=b;B+=s.charAt(se[ge++]));B=M(B,p,s.charAt(0))}return B}}(),Y=function(){function m(R,F,P){var h,s,o,p,b=0,A=R.length,$=F%U,se=F/U|0;for(R=R.slice();A--;)o=R[A]%U,p=R[A]/U|0,h=se*o+p*$,s=$*o+h%U*U+b,b=(s/P|0)+(h/U|0)+se*p,R[A]=s%P;return b&&(R=[b].concat(R)),R}function x(R,F,P,h){var s,o;if(P!=h)o=P>h?1:-1;else for(s=o=0;s<P;s++)if(R[s]!=F[s]){o=R[s]>F[s]?1:-1;break}return o}function B(R,F,P,h){for(var s=0;P--;)R[P]-=s,s=R[P]<F[P]?1:0,R[P]=s*h+R[P]-F[P];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,F,P,h,s){var o,p,b,A,$,se,pe,ge,_e,d,a,f,_,O,H,D,xe,Ie=R.s==F.s?1:-1,Ee=R.c,be=F.c;if(!Ee||!Ee[0]||!be||!be[0])return new g(!R.s||!F.s||(Ee?be&&Ee[0]==be[0]:!be)?NaN:Ee&&Ee[0]==0||!be?Ie*0:Ie/0);for(ge=new g(Ie),_e=ge.c=[],p=R.e-F.e,Ie=P+p+1,s||(s=y,p=C(R.e/E)-C(F.e/E),Ie=Ie/E|0),b=0;be[b]==(Ee[b]||0);b++);if(be[b]>(Ee[b]||0)&&p--,Ie<0)_e.push(1),A=!0;else{for(O=Ee.length,D=be.length,b=0,Ie+=2,$=c(s/(be[0]+1)),$>1&&(be=m(be,$,s),Ee=m(Ee,$,s),D=be.length,O=Ee.length),_=D,d=Ee.slice(0,D),a=d.length;a<D;d[a++]=0);xe=be.slice(),xe=[0].concat(xe),H=be[0],be[1]>=s/2&&H++;do{if($=0,o=x(be,d,D,a),o<0){if(f=d[0],D!=a&&(f=f*s+(d[1]||0)),$=c(f/H),$>1)for($>=s&&($=s-1),se=m(be,$,s),pe=se.length,a=d.length;x(se,d,pe,a)==1;)$--,B(se,D<pe?xe:be,pe,s),pe=se.length,o=1;else $==0&&(o=$=1),se=be.slice(),pe=se.length;if(pe<a&&(se=[0].concat(se)),B(d,se,a,s),a=d.length,o==-1)for(;x(be,d,D,a)<1;)$++,B(d,D<a?xe:be,a,s),a=d.length}else o===0&&($++,d=[0]);_e[b++]=$,d[0]?d[a++]=Ee[_]||0:(d=[Ee[_]],a=1)}while((_++<O||d[0]!=null)&&Ie--);A=d[0]!=null,_e[0]||_e.splice(0,1)}if(s==y){for(b=1,Ie=_e[0];Ie>=10;Ie/=10,b++);te(ge,P+(ge.e=b+p*E-1)+1,h,A)}else ge.e=p,ge.r=+A;return ge}}();function ne(m,x,B,R){var F,P,h,s,o;if(B==null?B=S:j(B,0,8),!m.c)return m.toString();if(F=m.c[0],h=m.e,x==null)o=k(m.c),o=R==1||R==2&&(h<=L||h>=V)?ie(o,h):M(o,h,"0");else if(m=te(new g(m),x,B),P=m.e,o=k(m.c),s=o.length,R==1||R==2&&(x<=P||P<=L)){for(;s<x;o+="0",s++);o=ie(o,P)}else if(x-=h,o=M(o,P,"0"),P+1>s){if(--x>0)for(o+=".";x--;o+="0");}else if(x+=P-s,x>0)for(P+1==s&&(o+=".");x--;o+="0");return m.s<0&&F?"-"+o:o}function ue(m,x){for(var B,R,F=1,P=new g(m[0]);F<m.length;F++)R=new g(m[F]),(!R.s||(B=z(P,R))===x||B===0&&P.s===x)&&(P=R);return P}function de(m,x,B){for(var R=1,F=x.length;!x[--F];x.pop());for(F=x[0];F>=10;F/=10,R++);return(B=R+B*E-1)>Z?m.c=m.e=null:B<X?m.c=[m.e=0]:(m.e=B,m.c=x),m}re=function(){var m=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,B=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,F=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(P,h,s,o){var p,b=s?h:h.replace(F,"");if(R.test(b))P.s=isNaN(b)?null:b<0?-1:1;else{if(!s&&(b=b.replace(m,function(A,$,se){return p=(se=se.toLowerCase())=="x"?16:se=="b"?2:8,!o||o==p?$:A}),o&&(p=o,b=b.replace(x,"$1").replace(B,"0.$1")),h!=b))return new g(b,p);if(g.DEBUG)throw Error(l+"Not a"+(o?" base "+o:"")+" number: "+h);P.s=null}P.c=P.e=null}}();function te(m,x,B,R){var F,P,h,s,o,p,b,A=m.c,$=T;if(A){e:{for(F=1,s=A[0];s>=10;s/=10,F++);if(P=x-F,P<0)P+=E,h=x,o=A[p=0],b=c(o/$[F-h-1]%10);else if(p=i((P+1)/E),p>=A.length)if(R){for(;A.length<=p;A.push(0));o=b=0,F=1,P%=E,h=P-E+1}else break e;else{for(o=s=A[p],F=1;s>=10;s/=10,F++);P%=E,h=P-E+F,b=h<0?0:c(o/$[F-h-1]%10)}if(R=R||x<0||A[p+1]!=null||(h<0?o:o%$[F-h-1]),R=B<4?(b||R)&&(B==0||B==(m.s<0?3:2)):b>5||b==5&&(B==4||R||B==6&&(P>0?h>0?o/$[F-h]:0:A[p-1])%10&1||B==(m.s<0?8:7)),x<1||!A[0])return A.length=0,R?(x-=m.e+1,A[0]=$[(E-x%E)%E],m.e=-x||0):A[0]=m.e=0,m;if(P==0?(A.length=p,s=1,p--):(A.length=p+1,s=$[E-P],A[p]=h>0?c(o/$[F-h]%$[h])*s:0),R)for(;;)if(p==0){for(P=1,h=A[0];h>=10;h/=10,P++);for(h=A[0]+=s,s=1;h>=10;h/=10,s++);P!=s&&(m.e++,A[0]==y&&(A[0]=1));break}else{if(A[p]+=s,A[p]!=y)break;A[p--]=0,s=1}for(P=A.length;A[--P]===0;A.pop());}m.e>Z?m.c=m.e=null:m.e<X&&(m.c=[m.e=0])}return m}function ae(m){var x,B=m.e;return B===null?m.toString():(x=k(m.c),x=B<=L||B>=V?ie(x,B):M(x,B,"0"),m.s<0?"-"+x:x)}return K.absoluteValue=K.abs=function(){var m=new g(this);return m.s<0&&(m.s=1),m},K.comparedTo=function(m,x){return z(this,new g(m,x))},K.decimalPlaces=K.dp=function(m,x){var B,R,F,P=this;if(m!=null)return j(m,0,v),x==null?x=S:j(x,0,8),te(new g(P),m+P.e+1,x);if(!(B=P.c))return null;if(R=((F=B.length-1)-C(this.e/E))*E,F=B[F])for(;F%10==0;F/=10,R--);return R<0&&(R=0),R},K.dividedBy=K.div=function(m,x){return Y(this,new g(m,x),he,S)},K.dividedToIntegerBy=K.idiv=function(m,x){return Y(this,new g(m,x),0,1)},K.exponentiatedBy=K.pow=function(m,x){var B,R,F,P,h,s,o,p,b,A=this;if(m=new g(m),m.c&&!m.isInteger())throw Error(l+"Exponent not an integer: "+ae(m));if(x!=null&&(x=new g(x)),s=m.e>14,!A.c||!A.c[0]||A.c[0]==1&&!A.e&&A.c.length==1||!m.c||!m.c[0])return b=new g(Math.pow(+ae(A),s?m.s*(2-q(m)):+ae(m))),x?b.mod(x):b;if(o=m.s<0,x){if(x.c?!x.c[0]:!x.s)return new g(NaN);R=!o&&A.isInteger()&&x.isInteger(),R&&(A=A.mod(x))}else{if(m.e>9&&(A.e>0||A.e<-1||(A.e==0?A.c[0]>1||s&&A.c[1]>=24e7:A.c[0]<8e13||s&&A.c[0]<=9999975e7)))return P=A.s<0&&q(m)?-0:0,A.e>-1&&(P=1/P),new g(o?1/P:P);le&&(P=i(le/E+2))}for(s?(B=new g(.5),o&&(m.s=1),p=q(m)):(F=Math.abs(+ae(m)),p=F%2),b=new g(ye);;){if(p){if(b=b.times(A),!b.c)break;P?b.c.length>P&&(b.c.length=P):R&&(b=b.mod(x))}if(F){if(F=c(F/2),F===0)break;p=F%2}else if(m=m.times(B),te(m,m.e+1,1),m.e>14)p=q(m);else{if(F=+ae(m),F===0)break;p=F%2}A=A.times(A),P?A.c&&A.c.length>P&&(A.c.length=P):R&&(A=A.mod(x))}return R?b:(o&&(b=ye.div(b)),x?b.mod(x):P?te(b,le,S,h):b)},K.integerValue=function(m){var x=new g(this);return m==null?m=S:j(m,0,8),te(x,x.e+1,m)},K.isEqualTo=K.eq=function(m,x){return z(this,new g(m,x))===0},K.isFinite=function(){return!!this.c},K.isGreaterThan=K.gt=function(m,x){return z(this,new g(m,x))>0},K.isGreaterThanOrEqualTo=K.gte=function(m,x){return(x=z(this,new g(m,x)))===1||x===0},K.isInteger=function(){return!!this.c&&C(this.e/E)>this.c.length-2},K.isLessThan=K.lt=function(m,x){return z(this,new g(m,x))<0},K.isLessThanOrEqualTo=K.lte=function(m,x){return(x=z(this,new g(m,x)))===-1||x===0},K.isNaN=function(){return!this.s},K.isNegative=function(){return this.s<0},K.isPositive=function(){return this.s>0},K.isZero=function(){return!!this.c&&this.c[0]==0},K.minus=function(m,x){var B,R,F,P,h=this,s=h.s;if(m=new g(m,x),x=m.s,!s||!x)return new g(NaN);if(s!=x)return m.s=-x,h.plus(m);var o=h.e/E,p=m.e/E,b=h.c,A=m.c;if(!o||!p){if(!b||!A)return b?(m.s=-x,m):new g(A?h:NaN);if(!b[0]||!A[0])return A[0]?(m.s=-x,m):new g(b[0]?h:S==3?-0:0)}if(o=C(o),p=C(p),b=b.slice(),s=o-p){for((P=s<0)?(s=-s,F=b):(p=o,F=A),F.reverse(),x=s;x--;F.push(0));F.reverse()}else for(R=(P=(s=b.length)<(x=A.length))?s:x,s=x=0;x<R;x++)if(b[x]!=A[x]){P=b[x]<A[x];break}if(P&&(F=b,b=A,A=F,m.s=-m.s),x=(R=A.length)-(B=b.length),x>0)for(;x--;b[B++]=0);for(x=y-1;R>s;){if(b[--R]<A[R]){for(B=R;B&&!b[--B];b[B]=x);--b[B],b[R]+=y}b[R]-=A[R]}for(;b[0]==0;b.splice(0,1),--p);return b[0]?de(m,b,p):(m.s=S==3?-1:1,m.c=[m.e=0],m)},K.modulo=K.mod=function(m,x){var B,R,F=this;return m=new g(m,x),!F.c||!m.s||m.c&&!m.c[0]?new g(NaN):!m.c||F.c&&!F.c[0]?new g(F):(ee==9?(R=m.s,m.s=1,B=Y(F,m,0,3),m.s=R,B.s*=R):B=Y(F,m,0,ee),m=F.minus(B.times(m)),!m.c[0]&&ee==1&&(m.s=F.s),m)},K.multipliedBy=K.times=function(m,x){var B,R,F,P,h,s,o,p,b,A,$,se,pe,ge,_e,d=this,a=d.c,f=(m=new g(m,x)).c;if(!a||!f||!a[0]||!f[0])return!d.s||!m.s||a&&!a[0]&&!f||f&&!f[0]&&!a?m.c=m.e=m.s=null:(m.s*=d.s,!a||!f?m.c=m.e=null:(m.c=[0],m.e=0)),m;for(R=C(d.e/E)+C(m.e/E),m.s*=d.s,o=a.length,A=f.length,o<A&&(pe=a,a=f,f=pe,F=o,o=A,A=F),F=o+A,pe=[];F--;pe.push(0));for(ge=y,_e=U,F=A;--F>=0;){for(B=0,$=f[F]%_e,se=f[F]/_e|0,h=o,P=F+h;P>F;)p=a[--h]%_e,b=a[h]/_e|0,s=se*p+b*$,p=$*p+s%_e*_e+pe[P]+B,B=(p/ge|0)+(s/_e|0)+se*b,pe[P--]=p%ge;pe[P]=B}return B?++R:pe.splice(0,1),de(m,pe,R)},K.negated=function(){var m=new g(this);return m.s=-m.s||null,m},K.plus=function(m,x){var B,R=this,F=R.s;if(m=new g(m,x),x=m.s,!F||!x)return new g(NaN);if(F!=x)return m.s=-x,R.minus(m);var P=R.e/E,h=m.e/E,s=R.c,o=m.c;if(!P||!h){if(!s||!o)return new g(F/0);if(!s[0]||!o[0])return o[0]?m:new g(s[0]?R:F*0)}if(P=C(P),h=C(h),s=s.slice(),F=P-h){for(F>0?(h=P,B=o):(F=-F,B=s),B.reverse();F--;B.push(0));B.reverse()}for(F=s.length,x=o.length,F-x<0&&(B=o,o=s,s=B,x=F),F=0;x;)F=(s[--x]=s[x]+o[x]+F)/y|0,s[x]=y===s[x]?0:s[x]%y;return F&&(s=[F].concat(s),++h),de(m,s,h)},K.precision=K.sd=function(m,x){var B,R,F,P=this;if(m!=null&&m!==!!m)return j(m,1,v),x==null?x=S:j(x,0,8),te(new g(P),m,x);if(!(B=P.c))return null;if(F=B.length-1,R=F*E+1,F=B[F]){for(;F%10==0;F/=10,R--);for(F=B[0];F>=10;F/=10,R++);}return m&&P.e+1>R&&(R=P.e+1),R},K.shiftedBy=function(m){return j(m,-I,I),this.times("1e"+m)},K.squareRoot=K.sqrt=function(){var m,x,B,R,F,P=this,h=P.c,s=P.s,o=P.e,p=he+4,b=new g("0.5");if(s!==1||!h||!h[0])return new g(!s||s<0&&(!h||h[0])?NaN:h?P:1/0);if(s=Math.sqrt(+ae(P)),s==0||s==1/0?(x=k(h),(x.length+o)%2==0&&(x+="0"),s=Math.sqrt(+x),o=C((o+1)/2)-(o<0||o%2),s==1/0?x="5e"+o:(x=s.toExponential(),x=x.slice(0,x.indexOf("e")+1)+o),B=new g(x)):B=new g(s+""),B.c[0]){for(o=B.e,s=o+p,s<3&&(s=0);;)if(F=B,B=b.times(F.plus(Y(P,F,p,1))),k(F.c).slice(0,s)===(x=k(B.c)).slice(0,s))if(B.e<o&&--s,x=x.slice(s-3,s+1),x=="9999"||!R&&x=="4999"){if(!R&&(te(F,F.e+he+2,0),F.times(F).eq(P))){B=F;break}p+=4,s+=4,R=1}else{(!+x||!+x.slice(1)&&x.charAt(0)=="5")&&(te(B,B.e+he+2,1),m=!B.times(B).eq(P));break}}return te(B,B.e+he+1,S,m)},K.toExponential=function(m,x){return m!=null&&(j(m,0,v),m++),ne(this,m,x,1)},K.toFixed=function(m,x){return m!=null&&(j(m,0,v),m=m+this.e+1),ne(this,m,x)},K.toFormat=function(m,x,B){var R,F=this;if(B==null)m!=null&&x&&typeof x=="object"?(B=x,x=null):m&&typeof m=="object"?(B=m,m=x=null):B=oe;else if(typeof B!="object")throw Error(l+"Argument not an object: "+B);if(R=F.toFixed(m,x),F.c){var P,h=R.split("."),s=+B.groupSize,o=+B.secondaryGroupSize,p=B.groupSeparator||"",b=h[0],A=h[1],$=F.s<0,se=$?b.slice(1):b,pe=se.length;if(o&&(P=s,s=o,o=P,pe-=P),s>0&&pe>0){for(P=pe%s||s,b=se.substr(0,P);P<pe;P+=s)b+=p+se.substr(P,s);o>0&&(b+=p+se.slice(P)),$&&(b="-"+b)}R=A?b+(B.decimalSeparator||"")+((o=+B.fractionGroupSize)?A.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+(B.fractionGroupSeparator||"")):A):b}return(B.prefix||"")+R+(B.suffix||"")},K.toFraction=function(m){var x,B,R,F,P,h,s,o,p,b,A,$,se=this,pe=se.c;if(m!=null&&(s=new g(m),!s.isInteger()&&(s.c||s.s!==1)||s.lt(ye)))throw Error(l+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+ae(s));if(!pe)return new g(se);for(x=new g(ye),p=B=new g(ye),R=o=new g(ye),$=k(pe),P=x.e=$.length-se.e-1,x.c[0]=T[(h=P%E)<0?E+h:h],m=!m||s.comparedTo(x)>0?P>0?x:p:s,h=Z,Z=1/0,s=new g($),o.c[0]=0;b=Y(s,x,0,1),F=B.plus(b.times(R)),F.comparedTo(m)!=1;)B=R,R=F,p=o.plus(b.times(F=p)),o=F,x=s.minus(b.times(F=x)),s=F;return F=Y(m.minus(B),R,0,1),o=o.plus(F.times(p)),B=B.plus(F.times(R)),o.s=p.s=se.s,P=P*2,A=Y(p,R,P,S).minus(se).abs().comparedTo(Y(o,B,P,S).minus(se).abs())<1?[p,R]:[o,B],Z=h,A},K.toNumber=function(){return+ae(this)},K.toPrecision=function(m,x){return m!=null&&j(m,1,v),ne(this,m,x,2)},K.toString=function(m){var x,B=this,R=B.s,F=B.e;return F===null?R?(x="Infinity",R<0&&(x="-"+x)):x="NaN":(m==null?x=F<=L||F>=V?ie(k(B.c),F):M(k(B.c),F,"0"):m===10&&Q?(B=te(new g(B),he+F+1,S),x=M(k(B.c),B.e,"0")):(j(m,2,fe.length,"Base"),x=J(M(k(B.c),F,"0"),10,m,R,!0)),R<0&&B.c[0]&&(x="-"+x)),x},K.valueOf=K.toJSON=function(){return ae(this)},K._isBigNumber=!0,W!=null&&g.set(W),g}function C(W){var Y=W|0;return W>0||W===Y?Y:Y-1}function k(W){for(var Y,J,re=1,K=W.length,ye=W[0]+"";re<K;){for(Y=W[re++]+"",J=E-Y.length;J--;Y="0"+Y);ye+=Y}for(K=ye.length;ye.charCodeAt(--K)===48;);return ye.slice(0,K+1||1)}function z(W,Y){var J,re,K=W.c,ye=Y.c,he=W.s,S=Y.s,L=W.e,V=Y.e;if(!he||!S)return null;if(J=K&&!K[0],re=ye&&!ye[0],J||re)return J?re?0:-S:he;if(he!=S)return he;if(J=he<0,re=L==V,!K||!ye)return re?0:!K^J?1:-1;if(!re)return L>V^J?1:-1;for(S=(L=K.length)<(V=ye.length)?L:V,he=0;he<S;he++)if(K[he]!=ye[he])return K[he]>ye[he]^J?1:-1;return L==V?0:L>V^J?1:-1}function j(W,Y,J,re){if(W<Y||W>J||W!==c(W))throw Error(l+(re||"Argument")+(typeof W=="number"?W<Y||W>J?" out of range: ":" not an integer: ":" not a primitive number: ")+String(W))}function q(W){var Y=W.c.length-1;return C(W.e/E)==Y&&W.c[Y]%2!=0}function ie(W,Y){return(W.length>1?W.charAt(0)+"."+W.slice(1):W)+(Y<0?"e":"e+")+Y}function M(W,Y,J){var re,K;if(Y<0){for(K=J+".";++Y;K+=J);W=K+W}else if(re=W.length,++Y>re){for(K=J,Y-=re;--Y;K+=J);W+=K}else Y<re&&(W=W.slice(0,Y)+"."+W.slice(Y));return W}t=w(),t.default=t.BigNumber=t,r.exports?r.exports=t:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=t)})(Ar)})(Mo);var Kn=Mo.exports,qc=function(e,t,n){var i=new e.Uint8Array(n),c=t.pushInt,l=t.pushInt32,u=t.pushInt32Neg,y=t.pushInt64,E=t.pushInt64Neg,I=t.pushFloat,T=t.pushFloatSingle,U=t.pushFloatDouble,v=t.pushTrue,w=t.pushFalse,C=t.pushUndefined,k=t.pushNull,z=t.pushInfinity,j=t.pushInfinityNeg,q=t.pushNaN,ie=t.pushNaNNeg,M=t.pushArrayStart,W=t.pushArrayStartFixed,Y=t.pushArrayStartFixed32,J=t.pushArrayStartFixed64,re=t.pushObjectStart,K=t.pushObjectStartFixed,ye=t.pushObjectStartFixed32,he=t.pushObjectStartFixed64,S=t.pushByteString,L=t.pushByteStringStart,V=t.pushUtf8String,X=t.pushUtf8StringStart,Z=t.pushSimpleUnassigned,G=t.pushTagStart,ee=t.pushTagStart4,le=t.pushTagStart8,oe=t.pushTagUnassigned,fe=t.pushBreak,Q=e.Math.pow,g=0,ne=0,ue=0;function de(N){for(N=N|0,g=0,ne=N;(g|0)<(ne|0)&&(ue=Qa[i[g]&255](i[g]|0)|0,!((ue|0)>0)););return ue|0}function te(N){return N=N|0,((g|0)+(N|0)|0)<(ne|0)?0:1}function ae(N){return N=N|0,i[N|0]<<8|i[N+1|0]|0}function m(N){return N=N|0,i[N|0]<<24|i[N+1|0]<<16|i[N+2|0]<<8|i[N+3|0]|0}function x(N){return N=N|0,c(N|0),g=g+1|0,0}function B(N){return N=N|0,te(1)|0?1:(c(i[g+1|0]|0),g=g+2|0,0)}function R(N){return N=N|0,te(2)|0?1:(c(ae(g+1|0)|0),g=g+3|0,0)}function F(N){return N=N|0,te(4)|0?1:(l(ae(g+1|0)|0,ae(g+3|0)|0),g=g+5|0,0)}function P(N){return N=N|0,te(8)|0?1:(y(ae(g+1|0)|0,ae(g+3|0)|0,ae(g+5|0)|0,ae(g+7|0)|0),g=g+9|0,0)}function h(N){return N=N|0,c(-1-(N-32|0)|0),g=g+1|0,0}function s(N){return N=N|0,te(1)|0?1:(c(-1-(i[g+1|0]|0)|0),g=g+2|0,0)}function o(N){N=N|0;var ve=0;return te(2)|0?1:(ve=ae(g+1|0)|0,c(-1-(ve|0)|0),g=g+3|0,0)}function p(N){return N=N|0,te(4)|0?1:(u(ae(g+1|0)|0,ae(g+3|0)|0),g=g+5|0,0)}function b(N){return N=N|0,te(8)|0?1:(E(ae(g+1|0)|0,ae(g+3|0)|0,ae(g+5|0)|0,ae(g+7|0)|0),g=g+9|0,0)}function A(N){N=N|0;var ve=0,Te=0,Ae=0;return Ae=N-64|0,te(Ae|0)|0?1:(ve=g+1|0,Te=(g+1|0)+(Ae|0)|0,S(ve|0,Te|0),g=Te|0,0)}function $(N){N=N|0;var ve=0,Te=0,Ae=0;return te(1)|0||(Ae=i[g+1|0]|0,ve=g+2|0,Te=(g+2|0)+(Ae|0)|0,te(Ae+1|0)|0)?1:(S(ve|0,Te|0),g=Te|0,0)}function se(N){N=N|0;var ve=0,Te=0,Ae=0;return te(2)|0||(Ae=ae(g+1|0)|0,ve=g+3|0,Te=(g+3|0)+(Ae|0)|0,te(Ae+2|0)|0)?1:(S(ve|0,Te|0),g=Te|0,0)}function pe(N){N=N|0;var ve=0,Te=0,Ae=0;return te(4)|0||(Ae=m(g+1|0)|0,ve=g+5|0,Te=(g+5|0)+(Ae|0)|0,te(Ae+4|0)|0)?1:(S(ve|0,Te|0),g=Te|0,0)}function ge(N){return N=N|0,1}function _e(N){return N=N|0,L(),g=g+1|0,0}function d(N){N=N|0;var ve=0,Te=0,Ae=0;return Ae=N-96|0,te(Ae|0)|0?1:(ve=g+1|0,Te=(g+1|0)+(Ae|0)|0,V(ve|0,Te|0),g=Te|0,0)}function a(N){N=N|0;var ve=0,Te=0,Ae=0;return te(1)|0||(Ae=i[g+1|0]|0,ve=g+2|0,Te=(g+2|0)+(Ae|0)|0,te(Ae+1|0)|0)?1:(V(ve|0,Te|0),g=Te|0,0)}function f(N){N=N|0;var ve=0,Te=0,Ae=0;return te(2)|0||(Ae=ae(g+1|0)|0,ve=g+3|0,Te=(g+3|0)+(Ae|0)|0,te(Ae+2|0)|0)?1:(V(ve|0,Te|0),g=Te|0,0)}function _(N){N=N|0;var ve=0,Te=0,Ae=0;return te(4)|0||(Ae=m(g+1|0)|0,ve=g+5|0,Te=(g+5|0)+(Ae|0)|0,te(Ae+4|0)|0)?1:(V(ve|0,Te|0),g=Te|0,0)}function O(N){return N=N|0,1}function H(N){return N=N|0,X(),g=g+1|0,0}function D(N){return N=N|0,W(N-128|0),g=g+1|0,0}function xe(N){return N=N|0,te(1)|0?1:(W(i[g+1|0]|0),g=g+2|0,0)}function Ie(N){return N=N|0,te(2)|0?1:(W(ae(g+1|0)|0),g=g+3|0,0)}function Ee(N){return N=N|0,te(4)|0?1:(Y(ae(g+1|0)|0,ae(g+3|0)|0),g=g+5|0,0)}function be(N){return N=N|0,te(8)|0?1:(J(ae(g+1|0)|0,ae(g+3|0)|0,ae(g+5|0)|0,ae(g+7|0)|0),g=g+9|0,0)}function Ne(N){return N=N|0,M(),g=g+1|0,0}function Pe(N){N=N|0;var ve=0;return ve=N-160|0,te(ve|0)|0?1:(K(ve|0),g=g+1|0,0)}function Pa(N){return N=N|0,te(1)|0?1:(K(i[g+1|0]|0),g=g+2|0,0)}function Ma(N){return N=N|0,te(2)|0?1:(K(ae(g+1|0)|0),g=g+3|0,0)}function ka(N){return N=N|0,te(4)|0?1:(ye(ae(g+1|0)|0,ae(g+3|0)|0),g=g+5|0,0)}function Ca(N){return N=N|0,te(8)|0?1:(he(ae(g+1|0)|0,ae(g+3|0)|0,ae(g+5|0)|0,ae(g+7|0)|0),g=g+9|0,0)}function $a(N){return N=N|0,re(),g=g+1|0,0}function lr(N){return N=N|0,G(N-192|0|0),g=g+1|0,0}function L0(N){return N=N|0,G(N|0),g=g+1|0,0}function P0(N){return N=N|0,G(N|0),g=g+1|0,0}function M0(N){return N=N|0,G(N|0),g=g+1|0,0}function k0(N){return N=N|0,G(N|0),g=g+1|0,0}function Ye(N){return N=N|0,G(N-192|0|0),g=g+1|0,0}function C0(N){return N=N|0,G(N|0),g=g+1|0,0}function $0(N){return N=N|0,G(N|0),g=g+1|0,0}function D0(N){return N=N|0,G(N|0),g=g+1|0,0}function Da(N){return N=N|0,te(1)|0?1:(G(i[g+1|0]|0),g=g+2|0,0)}function qa(N){return N=N|0,te(2)|0?1:(G(ae(g+1|0)|0),g=g+3|0,0)}function Ga(N){return N=N|0,te(4)|0?1:(ee(ae(g+1|0)|0,ae(g+3|0)|0),g=g+5|0,0)}function Ha(N){return N=N|0,te(8)|0?1:(le(ae(g+1|0)|0,ae(g+3|0)|0,ae(g+5|0)|0,ae(g+7|0)|0),g=g+9|0,0)}function qe(N){return N=N|0,Z((N|0)-224|0),g=g+1|0,0}function Va(N){return N=N|0,w(),g=g+1|0,0}function za(N){return N=N|0,v(),g=g+1|0,0}function ja(N){return N=N|0,k(),g=g+1|0,0}function Ya(N){return N=N|0,C(),g=g+1|0,0}function Za(N){return N=N|0,te(1)|0?1:(Z(i[g+1|0]|0),g=g+2|0,0)}function Wa(N){N=N|0;var ve=0,Te=0,Ae=1,rn=0,Fr=0,q0=0;return te(2)|0?1:(ve=i[g+1|0]|0,Te=i[g+2|0]|0,(ve|0)&128&&(Ae=-1),rn=+(((ve|0)&124)>>2),Fr=+(((ve|0)&3)<<8|Te),+rn==0?I(+(+Ae*5960464477539063e-23*+Fr)):+rn==31?+Ae==1?+Fr>0?q():z():+Fr>0?ie():j():I(+(+Ae*Q(2,+(+rn-25))*+(1024+Fr))),g=g+3|0,0)}function Ka(N){return N=N|0,te(4)|0?1:(T(i[g+1|0]|0,i[g+2|0]|0,i[g+3|0]|0,i[g+4|0]|0),g=g+5|0,0)}function Xa(N){return N=N|0,te(8)|0?1:(U(i[g+1|0]|0,i[g+2|0]|0,i[g+3|0]|0,i[g+4|0]|0,i[g+5|0]|0,i[g+6|0]|0,i[g+7|0]|0,i[g+8|0]|0),g=g+9|0,0)}function Re(N){return N=N|0,1}function Ja(N){return N=N|0,fe(),g=g+1|0,0}var Qa=[x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,B,R,F,P,Re,Re,Re,Re,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,s,o,p,b,Re,Re,Re,Re,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,$,se,pe,ge,Re,Re,Re,_e,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,a,f,_,O,Re,Re,Re,H,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,xe,Ie,Ee,be,Re,Re,Re,Ne,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pe,Pa,Ma,ka,Ca,Re,Re,Re,$a,lr,lr,lr,lr,lr,lr,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Ye,Da,qa,Ga,Ha,Re,Re,Re,Re,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,qe,Va,za,ja,Ya,Za,Wa,Ka,Xa,Re,Re,Re,Ja];return{parse:de}},Xn={},rt={};const Vi=Kn.BigNumber;rt.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7};rt.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36};rt.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31};rt.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23};rt.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")};rt.SHIFT32=Math.pow(2,32);rt.SHIFT16=Math.pow(2,16);rt.MAX_SAFE_HIGH=2097151;rt.NEG_ONE=new Vi(-1);rt.TEN=new Vi(10);rt.TWO=new Vi(2);rt.PARENT={ARRAY:0,OBJECT:1,MAP:2,TAG:3,BYTE_STRING:4,UTF8_STRING:5};(function(r){const{Buffer:e}=Jr,t=Kn.BigNumber,n=rt,i=n.SHIFT32,c=n.SHIFT16,l=2097151;r.parseHalf=function(E){var I,T,U;return U=E[0]&128?-1:1,I=(E[0]&124)>>2,T=(E[0]&3)<<8|E[1],I?I===31?U*(T?0/0:1/0):U*Math.pow(2,I-25)*(1024+T):U*5960464477539063e-23*T};function u(y){return y<16?"0"+y.toString(16):y.toString(16)}r.arrayBufferToBignumber=function(y){const E=y.byteLength;let I="";for(let T=0;T<E;T++)I+=u(y[T]);return new t(I,16)},r.buildMap=y=>{const E=new Map,I=Object.keys(y),T=I.length;for(let U=0;U<T;U++)E.set(I[U],y[I[U]]);return E},r.buildInt32=(y,E)=>y*c+E,r.buildInt64=(y,E,I,T)=>{const U=r.buildInt32(y,E),v=r.buildInt32(I,T);return U>l?new t(U).times(i).plus(v):U*i+v},r.writeHalf=function(E,I){const T=e.allocUnsafe(4);T.writeFloatBE(I,0);const U=T.readUInt32BE(0);if(U&8191)return!1;var v=U>>16&32768;const w=U>>23&255,C=U&8388607;if(w>=113&&w<=142)v+=(w-112<<10)+(C>>13);else if(w>=103&&w<113){if(C&(1<<126-w)-1)return!1;v+=C+8388608>>126-w}else return!1;return E.writeUInt16BE(v,0),!0},r.keySorter=function(y,E){var I=y[0].byteLength,T=E[0].byteLength;return I>T?1:T>I?-1:y[0].compare(E[0])},r.isNegativeZero=y=>y===0&&1/y<0,r.nextPowerOf2=y=>{let E=0;if(y&&!(y&y-1))return y;for(;y!==0;)y>>=1,E+=1;return 1<<E}})(Xn);const zi=rt,Gc=zi.MT,sn=zi.SIMPLE,si=zi.SYMS;let Hc=class Ei{constructor(e){if(typeof e!="number")throw new Error("Invalid Simple type: "+typeof e);if(e<0||e>255||(e|0)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}inspect(){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,Gc.SIMPLE_FLOAT)}static isSimple(e){return e instanceof Ei}static decode(e,t){switch(t==null&&(t=!0),e){case sn.FALSE:return!1;case sn.TRUE:return!0;case sn.NULL:return t?null:si.NULL;case sn.UNDEFINED:return t?void 0:si.UNDEFINED;case-1:if(!t)throw new Error("Invalid BREAK");return si.BREAK;default:return new Ei(e)}}};var ko=Hc;let Vc=class _i{constructor(e,t,n){if(this.tag=e,this.value=t,this.err=n,typeof this.tag!="number")throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(this.tag|0)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){var t,n;if(n=e!=null?e[this.tag]:void 0,typeof n!="function"&&(n=_i["_tag"+this.tag],typeof n!="function"))return this;try{return n.call(_i,this.value)}catch(i){return t=i,this.err=t,this}}};var Co=Vc;const $o=self.location?self.location.protocol+"//"+self.location.host:"",Bi=self.URL;let zc=class{constructor(e="",t=$o){this.super=new Bi(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function jc(r){if(typeof r=="string")return new Bi(r).toString();if(!(r instanceof Bi)){const e=r.username&&r.password?`${r.username}:${r.password}@`:"",t=r.auth?r.auth+"@":"",n=r.port?":"+r.port:"",i=r.protocol?r.protocol+"//":"",c=r.host||"",l=r.hostname||"",u=r.search||(r.query?"?"+r.query:""),y=r.hash||"",E=r.pathname||"",I=r.path||E+u;return`${i}${e||t}${c||l+n}${I}${y}`}}var Do={URLWithLegacySupport:zc,URLSearchParams:self.URLSearchParams,defaultBase:$o,format:jc};const{URLWithLegacySupport:is,format:Yc}=Do;var Zc=(r,e={},t={},n)=>{let i=e.protocol?e.protocol.replace(":",""):"http";i=(t[i]||n||i)+":";let c;try{c=new is(r)}catch{c={}}const l=Object.assign({},e,{protocol:i||c.protocol,host:e.host||c.host});return new is(r,Yc(l)).toString()};const{URLWithLegacySupport:Wc,format:Kc,URLSearchParams:Xc,defaultBase:Jc}=Do,Qc=Zc;var qo={URL:Wc,URLSearchParams:Xc,format:Kc,relative:Qc,defaultBase:Jc};const{Buffer:pr}=Jr,ss=Kr,eu=Kn.BigNumber,tu=qc,nt=Xn,Fe=rt,ru=ko,nu=Co,{URL:iu}=qo;let Ii=class Ai{constructor(e){e=e||{},!e.size||e.size<65536?e.size=65536:e.size=nt.nextPowerOf2(e.size),this._heap=new ArrayBuffer(e.size),this._heap8=new Uint8Array(this._heap),this._buffer=pr.from(this._heap),this._reset(),this._knownTags=Object.assign({0:t=>new Date(t),1:t=>new Date(t*1e3),2:t=>nt.arrayBufferToBignumber(t),3:t=>Fe.NEG_ONE.minus(nt.arrayBufferToBignumber(t)),4:t=>Fe.TEN.pow(t[0]).times(t[1]),5:t=>Fe.TWO.pow(t[0]).times(t[1]),32:t=>new iu(t),35:t=>new RegExp(t)},e.tags),this.parser=tu(Ar,{log:console.log.bind(console),pushInt:this.pushInt.bind(this),pushInt32:this.pushInt32.bind(this),pushInt32Neg:this.pushInt32Neg.bind(this),pushInt64:this.pushInt64.bind(this),pushInt64Neg:this.pushInt64Neg.bind(this),pushFloat:this.pushFloat.bind(this),pushFloatSingle:this.pushFloatSingle.bind(this),pushFloatDouble:this.pushFloatDouble.bind(this),pushTrue:this.pushTrue.bind(this),pushFalse:this.pushFalse.bind(this),pushUndefined:this.pushUndefined.bind(this),pushNull:this.pushNull.bind(this),pushInfinity:this.pushInfinity.bind(this),pushInfinityNeg:this.pushInfinityNeg.bind(this),pushNaN:this.pushNaN.bind(this),pushNaNNeg:this.pushNaNNeg.bind(this),pushArrayStart:this.pushArrayStart.bind(this),pushArrayStartFixed:this.pushArrayStartFixed.bind(this),pushArrayStartFixed32:this.pushArrayStartFixed32.bind(this),pushArrayStartFixed64:this.pushArrayStartFixed64.bind(this),pushObjectStart:this.pushObjectStart.bind(this),pushObjectStartFixed:this.pushObjectStartFixed.bind(this),pushObjectStartFixed32:this.pushObjectStartFixed32.bind(this),pushObjectStartFixed64:this.pushObjectStartFixed64.bind(this),pushByteString:this.pushByteString.bind(this),pushByteStringStart:this.pushByteStringStart.bind(this),pushUtf8String:this.pushUtf8String.bind(this),pushUtf8StringStart:this.pushUtf8StringStart.bind(this),pushSimpleUnassigned:this.pushSimpleUnassigned.bind(this),pushTagUnassigned:this.pushTagUnassigned.bind(this),pushTagStart:this.pushTagStart.bind(this),pushTagStart4:this.pushTagStart4.bind(this),pushTagStart8:this.pushTagStart8.bind(this),pushBreak:this.pushBreak.bind(this)},this._heap)}get _depth(){return this._parents.length}get _currentParent(){return this._parents[this._depth-1]}get _ref(){return this._currentParent.ref}_closeParent(){var e=this._parents.pop();if(e.length>0)throw new Error(`Missing ${e.length} elements`);switch(e.type){case Fe.PARENT.TAG:this._push(this.createTag(e.ref[0],e.ref[1]));break;case Fe.PARENT.BYTE_STRING:this._push(this.createByteString(e.ref,e.length));break;case Fe.PARENT.UTF8_STRING:this._push(this.createUtf8String(e.ref,e.length));break;case Fe.PARENT.MAP:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createMap(e.ref,e.length));break;case Fe.PARENT.OBJECT:if(e.values%2>0)throw new Error("Odd number of elements in the map");this._push(this.createObject(e.ref,e.length));break;case Fe.PARENT.ARRAY:this._push(this.createArray(e.ref,e.length));break}this._currentParent&&this._currentParent.type===Fe.PARENT.TAG&&this._dec()}_dec(){const e=this._currentParent;e.length<0||(e.length--,e.length===0&&this._closeParent())}_push(e,t){const n=this._currentParent;switch(n.values++,n.type){case Fe.PARENT.ARRAY:case Fe.PARENT.BYTE_STRING:case Fe.PARENT.UTF8_STRING:n.length>-1?this._ref[this._ref.length-n.length]=e:this._ref.push(e),this._dec();break;case Fe.PARENT.OBJECT:n.tmpKey!=null?(this._ref[n.tmpKey]=e,n.tmpKey=null,this._dec()):(n.tmpKey=e,typeof n.tmpKey!="string"&&(n.type=Fe.PARENT.MAP,n.ref=nt.buildMap(n.ref)));break;case Fe.PARENT.MAP:n.tmpKey!=null?(this._ref.set(n.tmpKey,e),n.tmpKey=null,this._dec()):n.tmpKey=e;break;case Fe.PARENT.TAG:this._ref.push(e),t||this._dec();break;default:throw new Error("Unknown parent type")}}_createParent(e,t,n){this._parents[this._depth]={type:t,length:n,ref:e,values:0,tmpKey:null}}_reset(){this._res=[],this._parents=[{type:Fe.PARENT.ARRAY,length:-1,ref:this._res,values:0,tmpKey:null}]}createTag(e,t){const n=this._knownTags[e];return n?n(t):new nu(e,t)}createMap(e,t){return e}createObject(e,t){return e}createArray(e,t){return e}createByteString(e,t){return pr.concat(e)}createByteStringFromHeap(e,t){return e===t?pr.alloc(0):pr.from(this._heap.slice(e,t))}createInt(e){return e}createInt32(e,t){return nt.buildInt32(e,t)}createInt64(e,t,n,i){return nt.buildInt64(e,t,n,i)}createFloat(e){return e}createFloatSingle(e,t,n,i){return ss.read([e,t,n,i],0,!1,23,4)}createFloatDouble(e,t,n,i,c,l,u,y){return ss.read([e,t,n,i,c,l,u,y],0,!1,52,8)}createInt32Neg(e,t){return-1-nt.buildInt32(e,t)}createInt64Neg(e,t,n,i){const c=nt.buildInt32(e,t),l=nt.buildInt32(n,i);return c>Fe.MAX_SAFE_HIGH?Fe.NEG_ONE.minus(new eu(c).times(Fe.SHIFT32).plus(l)):-1-(c*Fe.SHIFT32+l)}createTrue(){return!0}createFalse(){return!1}createNull(){return null}createUndefined(){}createInfinity(){return 1/0}createInfinityNeg(){return-1/0}createNaN(){return NaN}createNaNNeg(){return NaN}createUtf8String(e,t){return e.join("")}createUtf8StringFromHeap(e,t){return e===t?"":this._buffer.toString("utf8",e,t)}createSimpleUnassigned(e){return new ru(e)}pushInt(e){this._push(this.createInt(e))}pushInt32(e,t){this._push(this.createInt32(e,t))}pushInt64(e,t,n,i){this._push(this.createInt64(e,t,n,i))}pushFloat(e){this._push(this.createFloat(e))}pushFloatSingle(e,t,n,i){this._push(this.createFloatSingle(e,t,n,i))}pushFloatDouble(e,t,n,i,c,l,u,y){this._push(this.createFloatDouble(e,t,n,i,c,l,u,y))}pushInt32Neg(e,t){this._push(this.createInt32Neg(e,t))}pushInt64Neg(e,t,n,i){this._push(this.createInt64Neg(e,t,n,i))}pushTrue(){this._push(this.createTrue())}pushFalse(){this._push(this.createFalse())}pushNull(){this._push(this.createNull())}pushUndefined(){this._push(this.createUndefined())}pushInfinity(){this._push(this.createInfinity())}pushInfinityNeg(){this._push(this.createInfinityNeg())}pushNaN(){this._push(this.createNaN())}pushNaNNeg(){this._push(this.createNaNNeg())}pushArrayStart(){this._createParent([],Fe.PARENT.ARRAY,-1)}pushArrayStartFixed(e){this._createArrayStartFixed(e)}pushArrayStartFixed32(e,t){const n=nt.buildInt32(e,t);this._createArrayStartFixed(n)}pushArrayStartFixed64(e,t,n,i){const c=nt.buildInt64(e,t,n,i);this._createArrayStartFixed(c)}pushObjectStart(){this._createObjectStartFixed(-1)}pushObjectStartFixed(e){this._createObjectStartFixed(e)}pushObjectStartFixed32(e,t){const n=nt.buildInt32(e,t);this._createObjectStartFixed(n)}pushObjectStartFixed64(e,t,n,i){const c=nt.buildInt64(e,t,n,i);this._createObjectStartFixed(c)}pushByteStringStart(){this._parents[this._depth]={type:Fe.PARENT.BYTE_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushByteString(e,t){this._push(this.createByteStringFromHeap(e,t))}pushUtf8StringStart(){this._parents[this._depth]={type:Fe.PARENT.UTF8_STRING,length:-1,ref:[],values:0,tmpKey:null}}pushUtf8String(e,t){this._push(this.createUtf8StringFromHeap(e,t))}pushSimpleUnassigned(e){this._push(this.createSimpleUnassigned(e))}pushTagStart(e){this._parents[this._depth]={type:Fe.PARENT.TAG,length:1,ref:[e]}}pushTagStart4(e,t){this.pushTagStart(nt.buildInt32(e,t))}pushTagStart8(e,t,n,i){this.pushTagStart(nt.buildInt64(e,t,n,i))}pushTagUnassigned(e){this._push(this.createTag(e))}pushBreak(){if(this._currentParent.length>-1)throw new Error("Unexpected break");this._closeParent()}_createObjectStartFixed(e){if(e===0){this._push(this.createObject({}));return}this._createParent({},Fe.PARENT.OBJECT,e)}_createArrayStartFixed(e){if(e===0){this._push(this.createArray([]));return}this._createParent(new Array(e),Fe.PARENT.ARRAY,e)}_decode(e){if(e.byteLength===0)throw new Error("Input too short");this._reset(),this._heap8.set(e);const t=this.parser.parse(e.byteLength);if(this._depth>1){for(;this._currentParent.length===0;)this._closeParent();if(this._depth>1)throw new Error("Undeterminated nesting")}if(t>0)throw new Error("Failed to parse");if(this._res.length===0)throw new Error("No valid result")}decodeFirst(e){return this._decode(e),this._res[0]}decodeAll(e){return this._decode(e),this._res}static decode(e,t){return typeof e=="string"&&(e=pr.from(e,t||"hex")),new Ai({size:e.length}).decodeFirst(e)}static decodeAll(e,t){return typeof e=="string"&&(e=pr.from(e,t||"hex")),new Ai({size:e.length}).decodeAll(e)}};Ii.decodeFirst=Ii.decode;var Go=Ii;const{Buffer:oi}=Jr,su=Go,ou=Xn;class ji extends su{createTag(e,t){return`${e}(${t})`}createInt(e){return super.createInt(e).toString()}createInt32(e,t){return super.createInt32(e,t).toString()}createInt64(e,t,n,i){return super.createInt64(e,t,n,i).toString()}createInt32Neg(e,t){return super.createInt32Neg(e,t).toString()}createInt64Neg(e,t,n,i){return super.createInt64Neg(e,t,n,i).toString()}createTrue(){return"true"}createFalse(){return"false"}createFloat(e){const t=super.createFloat(e);return ou.isNegativeZero(e)?"-0_1":`${t}_1`}createFloatSingle(e,t,n,i){return`${super.createFloatSingle(e,t,n,i)}_2`}createFloatDouble(e,t,n,i,c,l,u,y){return`${super.createFloatDouble(e,t,n,i,c,l,u,y)}_3`}createByteString(e,t){const n=e.join(", ");return t===-1?`(_ ${n})`:`h'${n}`}createByteStringFromHeap(e,t){return`h'${oi.from(super.createByteStringFromHeap(e,t)).toString("hex")}'`}createInfinity(){return"Infinity_1"}createInfinityNeg(){return"-Infinity_1"}createNaN(){return"NaN_1"}createNaNNeg(){return"-NaN_1"}createNull(){return"null"}createUndefined(){return"undefined"}createSimpleUnassigned(e){return`simple(${e})`}createArray(e,t){const n=super.createArray(e,t);return t===-1?`[_ ${n.join(", ")}]`:`[${n.join(", ")}]`}createMap(e,t){const n=super.createMap(e),i=Array.from(n.keys()).reduce(os(n),"");return t===-1?`{_ ${i}}`:`{${i}}`}createObject(e,t){const n=super.createObject(e),i=Object.keys(n).reduce(os(n),"");return t===-1?`{_ ${i}}`:`{${i}}`}createUtf8String(e,t){const n=e.join(", ");return t===-1?`(_ ${n})`:`"${n}"`}createUtf8StringFromHeap(e,t){return`"${oi.from(super.createUtf8StringFromHeap(e,t)).toString("utf8")}"`}static diagnose(e,t){return typeof e=="string"&&(e=oi.from(e,t||"hex")),new ji().decodeFirst(e)}}var au=ji;function os(r){return(e,t)=>e?`${e}, ${t}: ${r[t]}`:`${t}: ${r[t]}`}const{Buffer:vt}=Jr,{URL:cu}=qo,Si=Kn.BigNumber,ai=Xn,je=rt,dt=je.MT,on=je.NUMBYTES,as=je.SHIFT32,cs=je.SYMS,yr=je.TAG,uu=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.TWO,fu=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.FOUR,lu=je.MT.SIMPLE_FLOAT<<5|je.NUMBYTES.EIGHT,hu=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.TRUE,du=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.FALSE,pu=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.UNDEFINED,us=je.MT.SIMPLE_FLOAT<<5|je.SIMPLE.NULL,yu=new Si("0x20000000000000"),wu=vt.from("f97e00","hex"),gu=vt.from("f9fc00","hex"),mu=vt.from("f97c00","hex");function bu(r){return{}.toString.call(r).slice(8,-1)}class Cn{constructor(e){e=e||{},this.streaming=typeof e.stream=="function",this.onData=e.stream,this.semanticTypes=[[cu,this._pushUrl],[Si,this._pushBigNumber]];const t=e.genTypes||[],n=t.length;for(let i=0;i<n;i++)this.addSemanticType(t[i][0],t[i][1]);this._reset()}addSemanticType(e,t){const n=this.semanticTypes.length;for(let i=0;i<n;i++)if(this.semanticTypes[i][0]===e){const l=this.semanticTypes[i][1];return this.semanticTypes[i][1]=t,l}return this.semanticTypes.push([e,t]),null}push(e){return e&&(this.result[this.offset]=e,this.resultMethod[this.offset]=0,this.resultLength[this.offset]=e.length,this.offset++,this.streaming&&this.onData(this.finalize())),!0}pushWrite(e,t,n){return this.result[this.offset]=e,this.resultMethod[this.offset]=t,this.resultLength[this.offset]=n,this.offset++,this.streaming&&this.onData(this.finalize()),!0}_pushUInt8(e){return this.pushWrite(e,1,1)}_pushUInt16BE(e){return this.pushWrite(e,2,2)}_pushUInt32BE(e){return this.pushWrite(e,3,4)}_pushDoubleBE(e){return this.pushWrite(e,4,8)}_pushNaN(){return this.push(wu)}_pushInfinity(e){const t=e<0?gu:mu;return this.push(t)}_pushFloat(e){const t=vt.allocUnsafe(2);if(ai.writeHalf(t,e)&&ai.parseHalf(t)===e)return this._pushUInt8(uu)&&this.push(t);const n=vt.allocUnsafe(4);return n.writeFloatBE(e,0),n.readFloatBE(0)===e?this._pushUInt8(fu)&&this.push(n):this._pushUInt8(lu)&&this._pushDoubleBE(e)}_pushInt(e,t,n){const i=t<<5;return e<24?this._pushUInt8(i|e):e<=255?this._pushUInt8(i|on.ONE)&&this._pushUInt8(e):e<=65535?this._pushUInt8(i|on.TWO)&&this._pushUInt16BE(e):e<=4294967295?this._pushUInt8(i|on.FOUR)&&this._pushUInt32BE(e):e<=Number.MAX_SAFE_INTEGER?this._pushUInt8(i|on.EIGHT)&&this._pushUInt32BE(Math.floor(e/as))&&this._pushUInt32BE(e%as):t===dt.NEG_INT?this._pushFloat(n):this._pushFloat(e)}_pushIntNum(e){return e<0?this._pushInt(-e-1,dt.NEG_INT,e):this._pushInt(e,dt.POS_INT)}_pushNumber(e){switch(!1){case e===e:return this._pushNaN(e);case isFinite(e):return this._pushInfinity(e);case e%1!==0:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){const t=vt.byteLength(e,"utf8");return this._pushInt(t,dt.UTF8_STRING)&&this.pushWrite(e,5,t)}_pushBoolean(e){return this._pushUInt8(e?hu:du)}_pushUndefined(e){return this._pushUInt8(pu)}_pushArray(e,t){const n=t.length;if(!e._pushInt(n,dt.ARRAY))return!1;for(let i=0;i<n;i++)if(!e.pushAny(t[i]))return!1;return!0}_pushTag(e){return this._pushInt(e,dt.TAG)}_pushDate(e,t){return e._pushTag(yr.DATE_EPOCH)&&e.pushAny(Math.round(t/1e3))}_pushBuffer(e,t){return e._pushInt(t.length,dt.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(yr.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,dt.ARRAY))return!1;for(const n of t)if(!e.pushAny(n))return!1;return!0}_pushUrl(e,t){return e._pushTag(yr.URI)&&e.pushAny(t.format())}_pushBigint(e){let t=yr.POS_BIGINT;e.isNegative()&&(e=e.negated().minus(1),t=yr.NEG_BIGINT);let n=e.toString(16);n.length%2&&(n="0"+n);const i=vt.from(n,"hex");return this._pushTag(t)&&this._pushBuffer(this,i)}_pushBigNumber(e,t){if(t.isNaN())return e._pushNaN();if(!t.isFinite())return e._pushInfinity(t.isNegative()?-1/0:1/0);if(t.isInteger())return e._pushBigint(t);if(!(e._pushTag(yr.DECIMAL_FRAC)&&e._pushInt(2,dt.ARRAY)))return!1;const n=t.decimalPlaces(),i=t.multipliedBy(new Si(10).pow(n));return e._pushIntNum(-n)?i.abs().isLessThan(yu)?e._pushIntNum(i.toNumber()):e._pushBigint(i):!1}_pushMap(e,t){return e._pushInt(t.size,dt.MAP)?this._pushRawMap(t.size,Array.from(t)):!1}_pushObject(e){if(!e)return this._pushUInt8(us);for(var t=this.semanticTypes.length,n=0;n<t;n++)if(e instanceof this.semanticTypes[n][0])return this.semanticTypes[n][1].call(e,this,e);var i=e.encodeCBOR;if(typeof i=="function")return i.call(e,this);var c=Object.keys(e),l=c.length;return this._pushInt(l,dt.MAP)?this._pushRawMap(l,c.map(u=>[u,e[u]])):!1}_pushRawMap(e,t){t=t.map(function(i){return i[0]=Cn.encode(i[0]),i}).sort(ai.keySorter);for(var n=0;n<e;n++)if(!this.push(t[n][0])||!this.pushAny(t[n][1]))return!1;return!0}write(e){return this.pushAny(e)}pushAny(e){var t=bu(e);switch(t){case"Number":return this._pushNumber(e);case"String":return this._pushString(e);case"Boolean":return this._pushBoolean(e);case"Object":return this._pushObject(e);case"Array":return this._pushArray(this,e);case"Uint8Array":return this._pushBuffer(this,vt.isBuffer(e)?e:vt.from(e));case"Null":return this._pushUInt8(us);case"Undefined":return this._pushUndefined(e);case"Map":return this._pushMap(this,e);case"Set":return this._pushSet(this,e);case"URL":return this._pushUrl(this,e);case"BigNumber":return this._pushBigNumber(this,e);case"Date":return this._pushDate(this,e);case"RegExp":return this._pushRegexp(this,e);case"Symbol":switch(e){case cs.NULL:return this._pushObject(null);case cs.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}finalize(){if(this.offset===0)return null;for(var e=this.result,t=this.resultLength,n=this.resultMethod,i=this.offset,c=0,l=0;l<i;l++)c+=t[l];var u=vt.allocUnsafe(c),y=0,E=0;for(l=0;l<i;l++){switch(E=t[l],n[l]){case 0:e[l].copy(u,y);break;case 1:u.writeUInt8(e[l],y,!0);break;case 2:u.writeUInt16BE(e[l],y,!0);break;case 3:u.writeUInt32BE(e[l],y,!0);break;case 4:u.writeDoubleBE(e[l],y,!0);break;case 5:u.write(e[l],y,E,"utf8");break;default:throw new Error("unkown method")}y+=E}var I=u;return this._reset(),I}_reset(){this.result=[],this.resultMethod=[],this.resultLength=[],this.offset=0}static encode(e){const t=new Cn;if(!t.pushAny(e))throw new Error("Failed to encode input");return t.finalize()}}var xu=Cn;(function(r){r.Diagnose=au,r.Decoder=Go,r.Encoder=xu,r.Simple=ko,r.Tagged=Co,r.decodeAll=r.Decoder.decodeAll,r.decodeFirst=r.Decoder.decodeFirst,r.diagnose=r.Diagnose.diagnose,r.encode=r.Encoder.encode,r.decode=r.Decoder.decode,r.leveldb={decode:r.Decoder.decodeAll,encode:r.Encoder.encode,buffer:!0,name:"cbor"}})(Po);const Ho=ec(Po);function mt(r){return wn(Di.create().update(new Uint8Array(r)).digest())}function mn(r){if(r instanceof Ho.Tagged)return mn(r.value);if(typeof r=="string")return Vo(r);if(typeof r=="number")return mt(Ce(r));if(r instanceof ArrayBuffer||ArrayBuffer.isView(r))return mt(r);if(Array.isArray(r)){const e=r.map(mn);return mt(bt(...e))}else{if(r&&typeof r=="object"&&r._isPrincipal)return mt(r.toUint8Array());if(typeof r=="object"&&r!==null&&typeof r.toHash=="function")return mn(r.toHash());if(typeof r=="object")return $n(r);if(typeof r=="bigint")return mt(Ce(r))}throw Object.assign(new Error(`Attempt to hash a value of unsupported type: ${r}`),{value:r})}const Vo=r=>{const e=new TextEncoder().encode(r);return mt(e)};function vi(r){return $n(r)}function $n(r){const n=Object.entries(r).filter(([,l])=>l!==void 0).map(([l,u])=>{const y=Vo(l),E=mn(u);return[y,E]}).sort(([l],[u])=>Ks(l,u)),i=bt(...n.map(l=>bt(...l)));return mt(i)}var Eu=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const _u=new TextEncoder().encode(`
ic-request`);class z0{getPrincipal(){return this._principal||(this._principal=Le.selfAuthenticating(new Uint8Array(this.getPublicKey().toDer()))),this._principal}async transformRequest(e){const{body:t}=e,n=Eu(e,["body"]),i=vi(t);return Object.assign(Object.assign({},n),{body:{content:t,sender_pubkey:this.getPublicKey().toDer(),sender_sig:await this.sign(bt(_u,i))}})}}class fs{getPrincipal(){return Le.anonymous()}async transformRequest(e){return Object.assign(Object.assign({},e),{body:{content:e.body}})}}var Pt={},Ur={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});const Bu=9007199254740992;function kt(r,...e){const t=new Uint8Array(r.byteLength+e.reduce((i,c)=>i+c.byteLength,0));t.set(new Uint8Array(r),0);let n=r.byteLength;for(const i of e)t.set(new Uint8Array(i),n),n+=i.byteLength;return t.buffer}function xt(r,e,t){t=t.replace(/[^0-9a-fA-F]/g,"");const n=2**(e-24);t=t.slice(-n*2).padStart(n*2,"0");const i=[(r<<5)+e].concat(t.match(/../g).map(c=>parseInt(c,16)));return new Uint8Array(i).buffer}function Jn(r,e){if(e<24)return new Uint8Array([(r<<5)+e]).buffer;{const t=e<=255?24:e<=65535?25:e<=4294967295?26:27;return xt(r,t,e.toString(16))}}function zo(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n<128?e.push(n):n<2048?e.push(192|n>>6,128|n&63):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|n&63):(t++,n=(n&1023)<<10|r.charCodeAt(t)&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63))}return kt(new Uint8Array(Jn(3,r.length)),new Uint8Array(e))}function Iu(r,e){if(r==14277111)return kt(new Uint8Array([217,217,247]),e);if(r<24)return kt(new Uint8Array([192+r]),e);{const t=r<=255?24:r<=65535?25:r<=4294967295?26:27,n=2**(t-24),i=r.toString(16).slice(-n*2).padStart(n*2,"0"),c=[192+t].concat(i.match(/../g).map(l=>parseInt(l,16)));return new Uint8Array(c).buffer}}Oe.tagged=Iu;function Qr(r){return new Uint8Array(r).buffer}Oe.raw=Qr;function Yi(r){if(isNaN(r))throw new RangeError("Invalid number.");r=Math.min(Math.max(0,r),23);const e=[0+r];return new Uint8Array(e).buffer}Oe.uSmall=Yi;function jo(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,r),255),r=r.toString(16),xt(0,24,r)}Oe.u8=jo;function Yo(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,r),65535),r=r.toString(16),xt(0,25,r)}Oe.u16=Yo;function Zo(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,r),4294967295),r=r.toString(16),xt(0,26,r)}Oe.u32=Zo;function Zi(r,e){if(typeof r=="string"&&e==16){if(r.match(/[^0-9a-fA-F]/))throw new RangeError("Invalid number.");return xt(0,27,r)}if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,r),Bu),r=r.toString(16),xt(0,27,r)}Oe.u64=Zi;function Wo(r){if(isNaN(r))throw new RangeError("Invalid number.");if(r===0)return Yi(0);r=Math.min(Math.max(0,-r),24)-1;const e=[32+r];return new Uint8Array(e).buffer}Oe.iSmall=Wo;function Ko(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,-r-1),255),r=r.toString(16),xt(1,24,r)}Oe.i8=Ko;function Xo(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,-r-1),65535),r=r.toString(16),xt(1,25,r)}Oe.i16=Xo;function Jo(r,e){if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,-r-1),4294967295),r=r.toString(16),xt(1,26,r)}Oe.i32=Jo;function Qo(r,e){if(typeof r=="string"&&e==16){if(r.startsWith("-")?r=r.slice(1):r="0",r.match(/[^0-9a-fA-F]/)||r.length>16)throw new RangeError("Invalid number.");let t=!1,n=r.split("").reduceRight((i,c)=>{if(t)return c+i;let l=parseInt(c,16)-1;return l>=0?(t=!0,l.toString(16)+i):"f"+i},"");return t?xt(1,27,n):Zi(0)}if(r=parseInt(""+r,e),isNaN(r))throw new RangeError("Invalid number.");return r=Math.min(Math.max(0,-r-1),9007199254740992),r=r.toString(16),xt(1,27,r)}Oe.i64=Qo;function Au(r){return r>=0?r<24?Yi(r):r<=255?jo(r):r<=65535?Yo(r):r<=4294967295?Zo(r):Zi(r):r>=-24?Wo(r):r>=-255?Ko(r):r>=-65535?Xo(r):r>=-4294967295?Jo(r):Qo(r)}Oe.number=Au;function Su(r){return kt(Jn(2,r.byteLength),r)}Oe.bytes=Su;function vu(r){return zo(r)}Oe.string=vu;function Tu(r){return kt(Jn(4,r.length),...r)}Oe.array=Tu;function Nu(r,e=!1){r instanceof Map||(r=new Map(Object.entries(r)));let t=Array.from(r.entries());return e&&(t=t.sort(([n],[i])=>n.localeCompare(i))),kt(Jn(5,r.size),...t.map(([n,i])=>kt(zo(n),i)))}Oe.map=Nu;function Uu(r){const e=new Float32Array([r]);return kt(new Uint8Array([224+26]),new Uint8Array(e.buffer))}Oe.singleFloat=Uu;function Fu(r){const e=new Float64Array([r]);return kt(new Uint8Array([224+27]),new Uint8Array(e.buffer))}Oe.doubleFloat=Fu;function Ru(r){return r?ea():ta()}Oe.bool=Ru;function ea(){return Qr(new Uint8Array([224+21]))}Oe.true_=ea;function ta(){return Qr(new Uint8Array([224+20]))}Oe.false_=ta;function Ou(){return Qr(new Uint8Array([224+22]))}Oe.null_=Ou;function Lu(){return Qr(new Uint8Array([224+23]))}Oe.undefined_=Lu;var Pu=Ar&&Ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e};Object.defineProperty(Ur,"__esModule",{value:!0});const pt=Pu(Oe),Mu=[ArrayBuffer,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array];class ra{constructor(e,t=!1){this._serializer=e,this._stable=t,this.name="jsonDefault",this.priority=-100}match(e){return["undefined","boolean","number","string","object"].indexOf(typeof e)!=-1}encode(e){switch(typeof e){case"undefined":return pt.undefined_();case"boolean":return pt.bool(e);case"number":return Math.floor(e)===e?pt.number(e):pt.doubleFloat(e);case"string":return pt.string(e);case"object":if(e===null)return pt.null_();if(Array.isArray(e))return pt.array(e.map(t=>this._serializer.serializeValue(t)));if(Mu.find(t=>e instanceof t))return pt.bytes(e.buffer);if(Object.getOwnPropertyNames(e).indexOf("toJSON")!==-1)return this.encode(e.toJSON());if(e instanceof Map){const t=new Map;for(const[n,i]of e.entries())t.set(n,this._serializer.serializeValue(i));return pt.map(t,this._stable)}else{const t=new Map;for(const[n,i]of Object.entries(e))t.set(n,this._serializer.serializeValue(i));return pt.map(t,this._stable)}default:throw new Error("Invalid value.")}}}Ur.JsonDefaultCborEncoder=ra;class na{constructor(){this.name="cborEncoder",this.priority=-90}match(e){return typeof e=="object"&&typeof e.toCBOR=="function"}encode(e){return e.toCBOR()}}Ur.ToCborEncoder=na;class ia{constructor(){this._encoders=new Set}static withDefaultEncoders(e=!1){const t=new this;return t.addEncoder(new ra(t,e)),t.addEncoder(new na),t}removeEncoder(e){for(const t of this._encoders.values())t.name==e&&this._encoders.delete(t)}addEncoder(e){this._encoders.add(e)}getEncoderFor(e){let t=null;for(const n of this._encoders)(!t||n.priority>t.priority)&&n.match(e)&&(t=n);if(t===null)throw new Error("Could not find an encoder for value.");return t}serializeValue(e){return this.getEncoderFor(e).encode(e)}serialize(e){return this.serializeValue(e)}}Ur.CborSerializer=ia;class ku extends ia{serialize(e){return pt.raw(new Uint8Array([...new Uint8Array([217,217,247]),...new Uint8Array(super.serializeValue(e))]))}}Ur.SelfDescribeCborSerializer=ku;(function(r){function e(i){for(var c in i)r.hasOwnProperty(c)||(r[c]=i[c])}var t=Ar&&Ar.__importStar||function(i){if(i&&i.__esModule)return i;var c={};if(i!=null)for(var l in i)Object.hasOwnProperty.call(i,l)&&(c[l]=i[l]);return c.default=i,c};Object.defineProperty(r,"__esModule",{value:!0}),e(Ur);const n=t(Oe);r.value=n})(Pt);class Cu{get name(){return"Principal"}get priority(){return 0}match(e){return e&&e._isPrincipal===!0}encode(e){return Pt.value.bytes(e.toUint8Array())}}class $u{get name(){return"Buffer"}get priority(){return 1}match(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}encode(e){return Pt.value.bytes(new Uint8Array(e))}}class Du{get name(){return"BigInt"}get priority(){return 1}match(e){return typeof e=="bigint"}encode(e){return e>BigInt(0)?Pt.value.tagged(2,Pt.value.bytes(Mn(e.toString(16)))):Pt.value.tagged(3,Pt.value.bytes(Mn((BigInt("-1")*e).toString(16))))}}const Qn=Pt.SelfDescribeCborSerializer.withDefaultEncoders(!0);Qn.addEncoder(new Cu);Qn.addEncoder(new $u);Qn.addEncoder(new Du);var Ti;(function(r){r[r.Uint64LittleEndian=71]="Uint64LittleEndian",r[r.Semantic=55799]="Semantic"})(Ti||(Ti={}));function ci(r){return Qn.serialize(r)}function ls(r){const e=r.byteLength;let t=BigInt(0);for(let n=0;n<e;n++)t=t*BigInt(256)+BigInt(r[n]);return t}class qu extends Ho.Decoder{createByteString(e){return bt(...e)}createByteStringFromHeap(e,t){return e===t?new ArrayBuffer(0):new Uint8Array(this._heap.slice(e,t))}}function Mt(r){const e=new Uint8Array(r),t=new qu({size:e.byteLength,tags:{2:n=>ls(n),3:n=>-ls(n),[Ti.Semantic]:n=>n}});try{return t.decodeFirst(e)}catch(n){throw new Error(`Failed to decode CBOR: ${n}, input: ${ct(e)}`)}}const an=()=>{if(typeof window<"u"&&window.crypto&&window.crypto.getRandomValues){const r=new Uint32Array(1);return window.crypto.getRandomValues(r),r[0]}if(typeof crypto<"u"&&crypto.getRandomValues){const r=new Uint32Array(1);return crypto.getRandomValues(r),r[0]}return typeof crypto<"u"&&crypto.randomInt?crypto.randomInt(0,4294967295):Math.floor(Math.random()*4294967295)};var Ni;(function(r){r.Call="call"})(Ni||(Ni={}));function Ui(){const r=new ArrayBuffer(16),e=new DataView(r),t=an(),n=an(),i=an(),c=an();return e.setUint32(0,t),e.setUint32(4,n),e.setUint32(8,i),e.setUint32(12,c),r}const hs=BigInt(1e6),Gu=60*1e3;class cn{constructor(e){if(e<90*1e3){const u=BigInt(Date.now()+e)*hs/BigInt(1e9);this._value=u*BigInt(1e9);return}const c=BigInt(Math.floor(Date.now()+e-Gu))*hs/BigInt(1e9)/BigInt(60)*BigInt(60)*BigInt(1e9);this._value=c}toCBOR(){return Pt.value.u64(this._value.toString(16),16)}toHash(){return Ce(this._value)}}function ds(r=Ui){return async e=>{const t=e.request.headers;e.request.headers=t,e.endpoint==="call"&&(e.body.nonce=r())}}function Lr(r){const e=[];return r.forEach((t,n)=>{e.push([n,t])}),e}class ui extends Ve{constructor(e,t){super(e),this.response=t,this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}class Hu extends Ve{constructor(e,t,n,i,c,l){super(e),this.response=t,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentCallError",Object.setPrototypeOf(this,new.target.prototype)}}class Vu extends Ve{constructor(e,t,n,i,c,l){super(e),this.response=t,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentQueryError",Object.setPrototypeOf(this,new.target.prototype)}}class zu extends Ve{constructor(e,t,n,i,c,l){super(e),this.response=t,this.requestId=n,this.senderPubkey=i,this.senderSig=c,this.ingressExpiry=l,this.name="AgentReadStateError",Object.setPrototypeOf(this,new.target.prototype)}}const un=BigInt(2**32-1),Fi=BigInt(32);function sa(r,e=!1){return e?{h:Number(r&un),l:Number(r>>Fi&un)}:{h:Number(r>>Fi&un)|0,l:Number(r&un)|0}}function ju(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:c,l}=sa(r[i],e);[t[i],n[i]]=[c,l]}return[t,n]}const Yu=(r,e)=>BigInt(r>>>0)<<Fi|BigInt(e>>>0),Zu=(r,e,t)=>r>>>t,Wu=(r,e,t)=>r<<32-t|e>>>t,Ku=(r,e,t)=>r>>>t|e<<32-t,Xu=(r,e,t)=>r<<32-t|e>>>t,Ju=(r,e,t)=>r<<64-t|e>>>t-32,Qu=(r,e,t)=>r>>>t-32|e<<64-t,ef=(r,e)=>e,tf=(r,e)=>r,rf=(r,e,t)=>r<<t|e>>>32-t,nf=(r,e,t)=>e<<t|r>>>32-t,sf=(r,e,t)=>e<<t-32|r>>>64-t,of=(r,e,t)=>r<<t-32|e>>>64-t;function af(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const cf=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),uf=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,ff=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),lf=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,hf=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),df=(r,e,t,n,i,c)=>e+t+n+i+c+(r/2**32|0)|0,pf={fromBig:sa,split:ju,toBig:Yu,shrSH:Zu,shrSL:Wu,rotrSH:Ku,rotrSL:Xu,rotrBH:Ju,rotrBL:Qu,rotr32H:ef,rotr32L:tf,rotlSH:rf,rotlSL:nf,rotlBH:sf,rotlBL:of,add:af,add3L:cf,add3H:uf,add4L:ff,add4H:lf,add5H:df,add5L:hf},Be=pf,[yf,wf]=(()=>Be.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),qt=new Uint32Array(80),Gt=new Uint32Array(80);class gf extends Zs{constructor(e=64){super(128,e,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:c,Cl:l,Dh:u,Dl:y,Eh:E,El:I,Fh:T,Fl:U,Gh:v,Gl:w,Hh:C,Hl:k}=this;return[e,t,n,i,c,l,u,y,E,I,T,U,v,w,C,k]}set(e,t,n,i,c,l,u,y,E,I,T,U,v,w,C,k){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=c|0,this.Cl=l|0,this.Dh=u|0,this.Dl=y|0,this.Eh=E|0,this.El=I|0,this.Fh=T|0,this.Fl=U|0,this.Gh=v|0,this.Gl=w|0,this.Hh=C|0,this.Hl=k|0}process(e,t){for(let q=0;q<16;q++,t+=4)qt[q]=e.getUint32(t),Gt[q]=e.getUint32(t+=4);for(let q=16;q<80;q++){const ie=qt[q-15]|0,M=Gt[q-15]|0,W=Be.rotrSH(ie,M,1)^Be.rotrSH(ie,M,8)^Be.shrSH(ie,M,7),Y=Be.rotrSL(ie,M,1)^Be.rotrSL(ie,M,8)^Be.shrSL(ie,M,7),J=qt[q-2]|0,re=Gt[q-2]|0,K=Be.rotrSH(J,re,19)^Be.rotrBH(J,re,61)^Be.shrSH(J,re,6),ye=Be.rotrSL(J,re,19)^Be.rotrBL(J,re,61)^Be.shrSL(J,re,6),he=Be.add4L(Y,ye,Gt[q-7],Gt[q-16]),S=Be.add4H(he,W,K,qt[q-7],qt[q-16]);qt[q]=S|0,Gt[q]=he|0}let{Ah:n,Al:i,Bh:c,Bl:l,Ch:u,Cl:y,Dh:E,Dl:I,Eh:T,El:U,Fh:v,Fl:w,Gh:C,Gl:k,Hh:z,Hl:j}=this;for(let q=0;q<80;q++){const ie=Be.rotrSH(T,U,14)^Be.rotrSH(T,U,18)^Be.rotrBH(T,U,41),M=Be.rotrSL(T,U,14)^Be.rotrSL(T,U,18)^Be.rotrBL(T,U,41),W=T&v^~T&C,Y=U&w^~U&k,J=Be.add5L(j,M,Y,wf[q],Gt[q]),re=Be.add5H(J,z,ie,W,yf[q],qt[q]),K=J|0,ye=Be.rotrSH(n,i,28)^Be.rotrBH(n,i,34)^Be.rotrBH(n,i,39),he=Be.rotrSL(n,i,28)^Be.rotrBL(n,i,34)^Be.rotrBL(n,i,39),S=n&c^n&u^c&u,L=i&l^i&y^l&y;z=C|0,j=k|0,C=v|0,k=w|0,v=T|0,w=U|0,{h:T,l:U}=Be.add(E|0,I|0,re|0,K|0),E=u|0,I=y|0,u=c|0,y=l|0,c=n|0,l=i|0;const V=Be.add3L(K,he,L);n=Be.add3H(V,re,ye,S),i=V|0}({h:n,l:i}=Be.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:c,l}=Be.add(this.Bh|0,this.Bl|0,c|0,l|0),{h:u,l:y}=Be.add(this.Ch|0,this.Cl|0,u|0,y|0),{h:E,l:I}=Be.add(this.Dh|0,this.Dl|0,E|0,I|0),{h:T,l:U}=Be.add(this.Eh|0,this.El|0,T|0,U|0),{h:v,l:w}=Be.add(this.Fh|0,this.Fl|0,v|0,w|0),{h:C,l:k}=Be.add(this.Gh|0,this.Gl|0,C|0,k|0),{h:z,l:j}=Be.add(this.Hh|0,this.Hl|0,z|0,j|0),this.set(n,i,c,l,u,y,E,I,T,U,v,w,C,k,z,j)}roundClean(){qt.fill(0),Gt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const mf=$i(()=>new gf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wi=BigInt(0),Dn=BigInt(1);function ei(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Kt(r){if(!ei(r))throw new Error("Uint8Array expected")}function Dr(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}function oa(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Wi:BigInt("0x"+r)}const aa=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",bf=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function fr(r){if(Kt(r),aa)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=bf[r[t]];return e}const Ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function ps(r){if(r>=Ft._0&&r<=Ft._9)return r-Ft._0;if(r>=Ft.A&&r<=Ft.F)return r-(Ft.A-10);if(r>=Ft.a&&r<=Ft.f)return r-(Ft.a-10)}function ca(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(aa)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,c=0;i<t;i++,c+=2){const l=ps(r.charCodeAt(c)),u=ps(r.charCodeAt(c+1));if(l===void 0||u===void 0){const y=r[c]+r[c+1];throw new Error('hex string expected, got non-hex character "'+y+'" at index '+c)}n[i]=l*16+u}return n}function gt(r){return oa(fr(r))}function qr(r){return Kt(r),oa(fr(Uint8Array.from(r).reverse()))}function Je(r,e){return ca(r.toString(16).padStart(e*2,"0"))}function qn(r,e){return Je(r,e).reverse()}function at(r,e,t){let n;if(typeof e=="string")try{n=ca(e)}catch(c){throw new Error(r+" must be hex string or Uint8Array, cause: "+c)}else if(ei(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function Ge(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Kt(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const c=r[n];t.set(c,i),i+=c.length}return t}function Ki(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}const fi=r=>typeof r=="bigint"&&Wi<=r;function ua(r,e,t){return fi(r)&&fi(e)&&fi(t)&&e<=r&&r<t}function Yt(r,e,t,n){if(!ua(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Gr(r){let e;for(e=0;r>Wi;r>>=Dn,e+=1);return e}function xf(r,e){return r>>BigInt(e)&Dn}const Br=r=>(Dn<<BigInt(r))-Dn,Ef={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||ei(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function en(r,e,t={}){const n=(i,c,l)=>{const u=Ef[c];if(typeof u!="function")throw new Error("invalid validator function");const y=r[i];if(!(l&&y===void 0)&&!u(y,r))throw new Error("param "+String(i)+" is invalid. Expected "+c+", got "+y)};for(const[i,c]of Object.entries(e))n(i,c,!1);for(const[i,c]of Object.entries(t))n(i,c,!0);return r}const ys=()=>{throw new Error("not implemented")};function jr(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const c=r(t,...n);return e.set(t,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ke=BigInt(0),Me=BigInt(1),Zt=BigInt(2),_f=BigInt(3),Ri=BigInt(4),ws=BigInt(5),gs=BigInt(8);function ke(r,e){const t=r%e;return t>=Ke?t:e+t}function Bf(r,e,t){if(e<Ke)throw new Error("invalid exponent, negatives unsupported");if(t<=Ke)throw new Error("invalid modulus");if(t===Me)return Ke;let n=Me;for(;e>Ke;)e&Me&&(n=n*r%t),r=r*r%t,e>>=Me;return n}function _t(r,e,t){let n=r;for(;e-- >Ke;)n*=n,n%=t;return n}function ms(r,e){if(r===Ke)throw new Error("invert: expected non-zero number");if(e<=Ke)throw new Error("invert: expected positive modulus, got "+e);let t=ke(r,e),n=e,i=Ke,c=Me;for(;t!==Ke;){const u=n/t,y=n%t,E=i-c*u;n=t,t=y,i=c,c=E}if(n!==Me)throw new Error("invert: does not exist");return ke(i,e)}function If(r){const e=(r-Me)/Zt;let t,n,i;for(t=r-Me,n=0;t%Zt===Ke;t/=Zt,n++);for(i=Zt;i<r&&Bf(i,e,r)!==r-Me;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const l=(r+Me)/Ri;return function(y,E){const I=y.pow(E,l);if(!y.eql(y.sqr(I),E))throw new Error("Cannot find square root");return I}}const c=(t+Me)/Zt;return function(u,y){if(u.pow(y,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let E=n,I=u.pow(u.mul(u.ONE,i),t),T=u.pow(y,c),U=u.pow(y,t);for(;!u.eql(U,u.ONE);){if(u.eql(U,u.ZERO))return u.ZERO;let v=1;for(let C=u.sqr(U);v<E&&!u.eql(C,u.ONE);v++)C=u.sqr(C);const w=u.pow(I,Me<<BigInt(E-v-1));I=u.sqr(w),T=u.mul(T,w),U=u.mul(U,I),E=v}return T}}function Af(r){if(r%Ri===_f){const e=(r+Me)/Ri;return function(n,i){const c=n.pow(i,e);if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}if(r%gs===ws){const e=(r-ws)/gs;return function(n,i){const c=n.mul(i,Zt),l=n.pow(c,e),u=n.mul(i,l),y=n.mul(n.mul(u,Zt),l),E=n.mul(u,n.sub(y,n.ONE));if(!n.eql(n.sqr(E),i))throw new Error("Cannot find square root");return E}}return If(r)}const Sf=(r,e)=>(ke(r,e)&Me)===Me,vf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fa(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=vf.reduce((n,i)=>(n[i]="function",n),e);return en(r,t)}function bn(r,e,t){if(t<Ke)throw new Error("invalid exponent, negatives unsupported");if(t===Ke)return r.ONE;if(t===Me)return e;let n=r.ONE,i=e;for(;t>Ke;)t&Me&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Me;return n}function xn(r,e){const t=new Array(e.length),n=e.reduce((c,l,u)=>r.is0(l)?c:(t[u]=c,r.mul(c,l)),r.ONE),i=r.inv(n);return e.reduceRight((c,l,u)=>r.is0(l)?c:(t[u]=r.mul(c,t[u]),r.mul(c,l)),i),t}function Tf(r){const e=(r-Me)/Zt;return(t,n)=>t.pow(n,e)}function la(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function tn(r,e,t=!1,n={}){if(r<=Ke)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:i,nByteLength:c}=la(r,e);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const u=Object.freeze({ORDER:r,isLE:t,BITS:i,BYTES:c,MASK:Br(i),ZERO:Ke,ONE:Me,create:y=>ke(y,r),isValid:y=>{if(typeof y!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof y);return Ke<=y&&y<r},is0:y=>y===Ke,isOdd:y=>(y&Me)===Me,neg:y=>ke(-y,r),eql:(y,E)=>y===E,sqr:y=>ke(y*y,r),add:(y,E)=>ke(y+E,r),sub:(y,E)=>ke(y-E,r),mul:(y,E)=>ke(y*E,r),pow:(y,E)=>bn(u,y,E),div:(y,E)=>ke(y*ms(E,r),r),sqrN:y=>y*y,addN:(y,E)=>y+E,subN:(y,E)=>y-E,mulN:(y,E)=>y*E,inv:y=>ms(y,r),sqrt:n.sqrt||(y=>(l||(l=Af(r)),l(u,y))),invertBatch:y=>xn(u,y),cmov:(y,E,I)=>I?E:y,toBytes:y=>t?qn(y,c):Je(y,c),fromBytes:y=>{if(y.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+y.length);return t?qr(y):gt(y)}});return Object.freeze(u)}function ha(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function da(r){const e=ha(r);return e+Math.ceil(e/2)}function Nf(r,e,t=!1){const n=r.length,i=ha(e),c=da(e);if(n<16||n<c||n>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+n);const l=t?qr(r):gt(r),u=ke(l,e-Me)+Me;return t?qn(u,i):Je(u,i)}const Uf=gt;function zt(r,e){if(Yr(r),Yr(e),r<0||r>=1<<8*e)throw new Error("invalid I2OSP input: "+r);const t=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)t[n]=r&255,r>>>=8;return new Uint8Array(t)}function Ff(r,e){const t=new Uint8Array(r.length);for(let n=0;n<r.length;n++)t[n]=r[n]^e[n];return t}function Yr(r){if(!Number.isSafeInteger(r))throw new Error("number expected")}function Rf(r,e,t,n){Kt(r),Kt(e),Yr(t),e.length>255&&(e=n(Ge(Ki("H2C-OVERSIZE-DST-"),e)));const{outputLen:i,blockLen:c}=n,l=Math.ceil(t/i);if(t>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");const u=Ge(e,zt(e.length,1)),y=zt(0,c),E=zt(t,2),I=new Array(l),T=n(Ge(y,r,E,zt(0,1),u));I[0]=n(Ge(T,zt(1,1),u));for(let v=1;v<=l;v++){const w=[Ff(T,I[v-1]),zt(v+1,1),u];I[v]=n(Ge(...w))}return Ge(...I).slice(0,t)}function Of(r,e,t,n,i){if(Kt(r),Kt(e),Yr(t),e.length>255){const c=Math.ceil(2*n/8);e=i.create({dkLen:c}).update(Ki("H2C-OVERSIZE-DST-")).update(e).digest()}if(t>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:t}).update(r).update(zt(t,2)).update(e).update(zt(e.length,1)).digest()}function bs(r,e,t){en(t,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:n,k:i,m:c,hash:l,expand:u,DST:y}=t;Kt(r),Yr(e);const E=typeof y=="string"?Ki(y):y,I=n.toString(2).length,T=Math.ceil((I+i)/8),U=e*c*T;let v;if(u==="xmd")v=Rf(r,E,U,l);else if(u==="xof")v=Of(r,E,U,i,l);else if(u==="_internal_pass")v=r;else throw new Error('expand must be "xmd" or "xof"');const w=new Array(e);for(let C=0;C<e;C++){const k=new Array(c);for(let z=0;z<c;z++){const j=T*(z+C*c),q=v.subarray(j,j+T);k[z]=ke(Uf(q),n)}w[C]=k}return w}function pa(r,e){const t=e.map(n=>Array.from(n).reverse());return(n,i)=>{const[c,l,u,y]=t.map(E=>E.reduce((I,T)=>r.add(r.mul(I,n),T)));if(r.is0(l)||r.is0(y))throw new Error("bad point: ZERO");return n=r.div(c,l),i=r.mul(i,r.div(u,y)),{x:n,y:i}}}function xs(r,e,t){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const c=bs(n,2,{...t,DST:t.DST,...i}),l=r.fromAffine(e(c[0])),u=r.fromAffine(e(c[1])),y=l.add(u).clearCofactor();return y.assertValidity(),y},encodeToCurve(n,i){const c=bs(n,1,{...t,DST:t.encodeDST,...i}),l=r.fromAffine(e(c[0])).clearCofactor();return l.assertValidity(),l},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const c of n)if(typeof c!="bigint")throw new Error("mapToCurve: expected array of bigints");const i=r.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Es=BigInt(0),Oi=BigInt(1);function li(r,e){const t=e.negate();return r?t:e}function ya(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function hi(r,e){ya(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,c=Br(r),l=BigInt(r);return{windows:t,windowSize:n,mask:c,maxNumber:i,shiftBy:l}}function _s(r,e,t){const{windowSize:n,mask:i,maxNumber:c,shiftBy:l}=t;let u=Number(r&i),y=r>>l;u>n&&(u-=c,y+=Oi);const E=e*n,I=E+Math.abs(u)-1,T=u===0,U=u<0,v=e%2!==0;return{nextN:y,offset:I,isZero:T,isNeg:U,isNegF:v,offsetF:E}}function Lf(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Pf(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const di=new WeakMap,wa=new WeakMap;function pi(r){return wa.get(r)||1}function ga(r,e){return{constTimeNegate:li,hasPrecomputes(t){return pi(t)!==1},unsafeLadder(t,n,i=r.ZERO){let c=t;for(;n>Es;)n&Oi&&(i=i.add(c)),c=c.double(),n>>=Oi;return i},precomputeWindow(t,n){const{windows:i,windowSize:c}=hi(n,e),l=[];let u=t,y=u;for(let E=0;E<i;E++){y=u,l.push(y);for(let I=1;I<c;I++)y=y.add(u),l.push(y);u=y.double()}return l},wNAF(t,n,i){let c=r.ZERO,l=r.BASE;const u=hi(t,e);for(let y=0;y<u.windows;y++){const{nextN:E,offset:I,isZero:T,isNeg:U,isNegF:v,offsetF:w}=_s(i,y,u);i=E,T?l=l.add(li(v,n[w])):c=c.add(li(U,n[I]))}return{p:c,f:l}},wNAFUnsafe(t,n,i,c=r.ZERO){const l=hi(t,e);for(let u=0;u<l.windows&&i!==Es;u++){const{nextN:y,offset:E,isZero:I,isNeg:T}=_s(i,u,l);if(i=y,!I){const U=n[E];c=c.add(T?U.negate():U)}}return c},getPrecomputes(t,n,i){let c=di.get(n);return c||(c=this.precomputeWindow(n,t),t!==1&&di.set(n,i(c))),c},wNAFCached(t,n,i){const c=pi(t);return this.wNAF(c,this.getPrecomputes(c,t,i),n)},wNAFCachedUnsafe(t,n,i,c){const l=pi(t);return l===1?this.unsafeLadder(t,n,c):this.wNAFUnsafe(l,this.getPrecomputes(l,t,i),n,c)},setWindowSize(t,n){ya(n,e),wa.set(t,n),di.delete(t)}}}function ma(r,e,t,n){if(Lf(t,r),Pf(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=r.ZERO,c=Gr(BigInt(t.length)),l=c>12?c-3:c>4?c-2:c?2:1,u=Br(l),y=new Array(Number(u)+1).fill(i),E=Math.floor((e.BITS-1)/l)*l;let I=i;for(let T=E;T>=0;T-=l){y.fill(i);for(let v=0;v<n.length;v++){const w=n[v],C=Number(w>>BigInt(T)&u);y[C]=y[C].add(t[v])}let U=i;for(let v=y.length-1,w=i;v>0;v--)w=w.add(y[v]),U=U.add(w);if(I=I.add(U),T!==0)for(let v=0;v<l;v++)I=I.double()}return I}function ba(r){return fa(r.Fp),en(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...la(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mf(r){const e=ba(r);en(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const nr=BigInt(0),$e=BigInt(1),Ht=BigInt(2),Gn=BigInt(3),Bs=BigInt(4);function Is(r){const e=Mf(r),{Fp:t}=e,n=tn(e.n,e.nBitLength),i=e.toBytes||((C,k,z)=>{const j=k.toAffine();return Ge(Uint8Array.from([4]),t.toBytes(j.x),t.toBytes(j.y))}),c=e.fromBytes||(C=>{const k=C.subarray(1),z=t.fromBytes(k.subarray(0,t.BYTES)),j=t.fromBytes(k.subarray(t.BYTES,2*t.BYTES));return{x:z,y:j}});function l(C){const{a:k,b:z}=e,j=t.sqr(C),q=t.mul(j,C);return t.add(t.add(q,t.mul(C,k)),z)}if(!t.eql(t.sqr(e.Gy),l(e.Gx)))throw new Error("bad generator point: equation left != right");function u(C){return ua(C,$e,e.n)}function y(C){const{allowedPrivateKeyLengths:k,nByteLength:z,wrapPrivateKey:j,n:q}=e;if(k&&typeof C!="bigint"){if(ei(C)&&(C=fr(C)),typeof C!="string"||!k.includes(C.length))throw new Error("invalid private key");C=C.padStart(z*2,"0")}let ie;try{ie=typeof C=="bigint"?C:gt(at("private key",C,z))}catch{throw new Error("invalid private key, expected hex or "+z+" bytes, got "+typeof C)}return j&&(ie=ke(ie,q)),Yt("private key",ie,$e,q),ie}function E(C){if(!(C instanceof U))throw new Error("ProjectivePoint expected")}const I=jr((C,k)=>{const{px:z,py:j,pz:q}=C;if(t.eql(q,t.ONE))return{x:z,y:j};const ie=C.is0();k==null&&(k=ie?t.ONE:t.inv(q));const M=t.mul(z,k),W=t.mul(j,k),Y=t.mul(q,k);if(ie)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Y,t.ONE))throw new Error("invZ was invalid");return{x:M,y:W}}),T=jr(C=>{if(C.is0()){if(e.allowInfinityPoint&&!t.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:k,y:z}=C.toAffine();if(!t.isValid(k)||!t.isValid(z))throw new Error("bad point: x or y not FE");const j=t.sqr(z),q=l(k);if(!t.eql(j,q))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class U{constructor(k,z,j){if(k==null||!t.isValid(k))throw new Error("x required");if(z==null||!t.isValid(z))throw new Error("y required");if(j==null||!t.isValid(j))throw new Error("z required");this.px=k,this.py=z,this.pz=j,Object.freeze(this)}static fromAffine(k){const{x:z,y:j}=k||{};if(!k||!t.isValid(z)||!t.isValid(j))throw new Error("invalid affine point");if(k instanceof U)throw new Error("projective point not allowed");const q=ie=>t.eql(ie,t.ZERO);return q(z)&&q(j)?U.ZERO:new U(z,j,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){const z=t.invertBatch(k.map(j=>j.pz));return k.map((j,q)=>j.toAffine(z[q])).map(U.fromAffine)}static fromHex(k){const z=U.fromAffine(c(at("pointHex",k)));return z.assertValidity(),z}static fromPrivateKey(k){return U.BASE.multiply(y(k))}static msm(k,z){return ma(U,n,k,z)}_setWindowSize(k){w.setWindowSize(this,k)}assertValidity(){T(this)}hasEvenY(){const{y:k}=this.toAffine();if(t.isOdd)return!t.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){E(k);const{px:z,py:j,pz:q}=this,{px:ie,py:M,pz:W}=k,Y=t.eql(t.mul(z,W),t.mul(ie,q)),J=t.eql(t.mul(j,W),t.mul(M,q));return Y&&J}negate(){return new U(this.px,t.neg(this.py),this.pz)}double(){const{a:k,b:z}=e,j=t.mul(z,Gn),{px:q,py:ie,pz:M}=this;let W=t.ZERO,Y=t.ZERO,J=t.ZERO,re=t.mul(q,q),K=t.mul(ie,ie),ye=t.mul(M,M),he=t.mul(q,ie);return he=t.add(he,he),J=t.mul(q,M),J=t.add(J,J),W=t.mul(k,J),Y=t.mul(j,ye),Y=t.add(W,Y),W=t.sub(K,Y),Y=t.add(K,Y),Y=t.mul(W,Y),W=t.mul(he,W),J=t.mul(j,J),ye=t.mul(k,ye),he=t.sub(re,ye),he=t.mul(k,he),he=t.add(he,J),J=t.add(re,re),re=t.add(J,re),re=t.add(re,ye),re=t.mul(re,he),Y=t.add(Y,re),ye=t.mul(ie,M),ye=t.add(ye,ye),re=t.mul(ye,he),W=t.sub(W,re),J=t.mul(ye,K),J=t.add(J,J),J=t.add(J,J),new U(W,Y,J)}add(k){E(k);const{px:z,py:j,pz:q}=this,{px:ie,py:M,pz:W}=k;let Y=t.ZERO,J=t.ZERO,re=t.ZERO;const K=e.a,ye=t.mul(e.b,Gn);let he=t.mul(z,ie),S=t.mul(j,M),L=t.mul(q,W),V=t.add(z,j),X=t.add(ie,M);V=t.mul(V,X),X=t.add(he,S),V=t.sub(V,X),X=t.add(z,q);let Z=t.add(ie,W);return X=t.mul(X,Z),Z=t.add(he,L),X=t.sub(X,Z),Z=t.add(j,q),Y=t.add(M,W),Z=t.mul(Z,Y),Y=t.add(S,L),Z=t.sub(Z,Y),re=t.mul(K,X),Y=t.mul(ye,L),re=t.add(Y,re),Y=t.sub(S,re),re=t.add(S,re),J=t.mul(Y,re),S=t.add(he,he),S=t.add(S,he),L=t.mul(K,L),X=t.mul(ye,X),S=t.add(S,L),L=t.sub(he,L),L=t.mul(K,L),X=t.add(X,L),he=t.mul(S,X),J=t.add(J,he),he=t.mul(Z,X),Y=t.mul(V,Y),Y=t.sub(Y,he),he=t.mul(V,S),re=t.mul(Z,re),re=t.add(re,he),new U(Y,J,re)}subtract(k){return this.add(k.negate())}is0(){return this.equals(U.ZERO)}wNAF(k){return w.wNAFCached(this,k,U.normalizeZ)}multiplyUnsafe(k){const{endo:z,n:j}=e;Yt("scalar",k,nr,j);const q=U.ZERO;if(k===nr)return q;if(this.is0()||k===$e)return this;if(!z||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,k,U.normalizeZ);let{k1neg:ie,k1:M,k2neg:W,k2:Y}=z.splitScalar(k),J=q,re=q,K=this;for(;M>nr||Y>nr;)M&$e&&(J=J.add(K)),Y&$e&&(re=re.add(K)),K=K.double(),M>>=$e,Y>>=$e;return ie&&(J=J.negate()),W&&(re=re.negate()),re=new U(t.mul(re.px,z.beta),re.py,re.pz),J.add(re)}multiply(k){const{endo:z,n:j}=e;Yt("scalar",k,$e,j);let q,ie;if(z){const{k1neg:M,k1:W,k2neg:Y,k2:J}=z.splitScalar(k);let{p:re,f:K}=this.wNAF(W),{p:ye,f:he}=this.wNAF(J);re=w.constTimeNegate(M,re),ye=w.constTimeNegate(Y,ye),ye=new U(t.mul(ye.px,z.beta),ye.py,ye.pz),q=re.add(ye),ie=K.add(he)}else{const{p:M,f:W}=this.wNAF(k);q=M,ie=W}return U.normalizeZ([q,ie])[0]}multiplyAndAddUnsafe(k,z,j){const q=U.BASE,ie=(W,Y)=>Y===nr||Y===$e||!W.equals(q)?W.multiplyUnsafe(Y):W.multiply(Y),M=ie(this,z).add(ie(k,j));return M.is0()?void 0:M}toAffine(k){return I(this,k)}isTorsionFree(){const{h:k,isTorsionFree:z}=e;if(k===$e)return!0;if(z)return z(U,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:k,clearCofactor:z}=e;return k===$e?this:z?z(U,this):this.multiplyUnsafe(e.h)}toRawBytes(k=!0){return Dr("isCompressed",k),this.assertValidity(),i(U,this,k)}toHex(k=!0){return Dr("isCompressed",k),fr(this.toRawBytes(k))}}U.BASE=new U(e.Gx,e.Gy,t.ONE),U.ZERO=new U(t.ZERO,t.ONE,t.ZERO);const v=e.nBitLength,w=ga(U,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:U,normPrivateKeyToScalar:y,weierstrassEquation:l,isWithinCurveOrder:u}}function kf(r,e){const t=r.ORDER;let n=nr;for(let w=t-$e;w%Ht===nr;w/=Ht)n+=$e;const i=n,c=Ht<<i-$e-$e,l=c*Ht,u=(t-$e)/l,y=(u-$e)/Ht,E=l-$e,I=c,T=r.pow(e,u),U=r.pow(e,(u+$e)/Ht);let v=(w,C)=>{let k=T,z=r.pow(C,E),j=r.sqr(z);j=r.mul(j,C);let q=r.mul(w,j);q=r.pow(q,y),q=r.mul(q,z),z=r.mul(q,C),j=r.mul(q,w);let ie=r.mul(j,z);q=r.pow(ie,I);let M=r.eql(q,r.ONE);z=r.mul(j,U),q=r.mul(ie,k),j=r.cmov(z,j,M),ie=r.cmov(q,ie,M);for(let W=i;W>$e;W--){let Y=W-Ht;Y=Ht<<Y-$e;let J=r.pow(ie,Y);const re=r.eql(J,r.ONE);z=r.mul(j,k),k=r.mul(k,k),J=r.mul(ie,k),j=r.cmov(z,j,re),ie=r.cmov(J,ie,re)}return{isValid:M,value:j}};if(r.ORDER%Bs===Gn){const w=(r.ORDER-Gn)/Bs,C=r.sqrt(r.neg(e));v=(k,z)=>{let j=r.sqr(z);const q=r.mul(k,z);j=r.mul(j,q);let ie=r.pow(j,w);ie=r.mul(ie,q);const M=r.mul(ie,C),W=r.mul(r.sqr(ie),z),Y=r.eql(W,k);let J=r.cmov(M,ie,Y);return{isValid:Y,value:J}}}return v}function xa(r,e){if(fa(r),!r.isValid(e.A)||!r.isValid(e.B)||!r.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const t=kf(r,e.Z);if(!r.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,c,l,u,y,E,I,T;i=r.sqr(n),i=r.mul(i,e.Z),c=r.sqr(i),c=r.add(c,i),l=r.add(c,r.ONE),l=r.mul(l,e.B),u=r.cmov(e.Z,r.neg(c),!r.eql(c,r.ZERO)),u=r.mul(u,e.A),c=r.sqr(l),E=r.sqr(u),y=r.mul(E,e.A),c=r.add(c,y),c=r.mul(c,l),E=r.mul(E,u),y=r.mul(E,e.B),c=r.add(c,y),I=r.mul(i,l);const{isValid:U,value:v}=t(c,E);T=r.mul(i,n),T=r.mul(T,v),I=r.cmov(I,l,U),T=r.cmov(T,v,U);const w=r.isOdd(n)===r.isOdd(T);return T=r.cmov(r.neg(T),T,w),I=r.div(I,u),{x:I,y:T}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Cf=BigInt(0),fn=BigInt(1),As=BigInt(2),xr=BigInt(3);function $f(r){const e=[];for(;r>fn;r>>=fn)(r&fn)===Cf?e.unshift(0):(r&xr)===xr?(e.unshift(-1),r+=fn):e.unshift(1);return e}function Df(r){const{Fp:e,Fr:t,Fp2:n,Fp6:i,Fp12:c}=r.fields,l=r.params.xNegative,u=r.params.twistType,y=Is({n:t.ORDER,...r.G1}),E=Object.assign(y,xs(y.ProjectivePoint,r.G1.mapToCurve,{...r.htfDefaults,...r.G1.htfDefaults})),I=Is({n:t.ORDER,...r.G2}),T=Object.assign(I,xs(I.ProjectivePoint,r.G2.mapToCurve,{...r.htfDefaults,...r.G2.htfDefaults}));let U;if(u==="multiplicative")U=(Q,g,ne,ue,de,te)=>c.mul014(ue,Q,n.mul(g,de),n.mul(ne,te));else if(u==="divisive")U=(Q,g,ne,ue,de,te)=>c.mul034(ue,n.mul(ne,te),n.mul(g,de),Q);else throw new Error("bls: unknown twist type");const v=n.div(n.ONE,n.mul(n.ONE,As));function w(Q,g,ne,ue){const de=n.sqr(ne),te=n.sqr(ue),ae=n.mulByB(n.mul(te,xr)),m=n.mul(ae,xr),x=n.sub(n.sub(n.sqr(n.add(ne,ue)),te),de),B=n.sub(ae,de),R=n.mul(n.sqr(g),xr),F=n.neg(x);return Q.push([B,R,F]),g=n.mul(n.mul(n.mul(n.sub(de,m),g),ne),v),ne=n.sub(n.sqr(n.mul(n.add(de,m),v)),n.mul(n.sqr(ae),xr)),ue=n.mul(de,x),{Rx:g,Ry:ne,Rz:ue}}function C(Q,g,ne,ue,de,te){const ae=n.sub(ne,n.mul(te,ue)),m=n.sub(g,n.mul(de,ue)),x=n.sub(n.mul(ae,de),n.mul(m,te)),B=n.neg(ae),R=m;Q.push([x,B,R]);const F=n.sqr(m),P=n.mul(F,m),h=n.mul(F,g),s=n.add(n.sub(P,n.mul(h,As)),n.mul(n.sqr(ae),ue));return g=n.mul(m,s),ne=n.sub(n.mul(n.sub(h,s),ae),n.mul(P,ne)),ue=n.mul(ue,P),{Rx:g,Ry:ne,Rz:ue}}const k=$f(r.params.ateLoopSize),z=jr(Q=>{const g=Q,{x:ne,y:ue}=g.toAffine(),de=ne,te=ue,ae=n.neg(ue);let m=de,x=te,B=n.ONE;const R=[];for(const F of k){const P=[];({Rx:m,Ry:x,Rz:B}=w(P,m,x,B)),F&&({Rx:m,Ry:x,Rz:B}=C(P,m,x,B,de,F===-1?ae:te)),R.push(P)}if(r.postPrecompute){const F=R[R.length-1];r.postPrecompute(m,x,B,de,te,C.bind(null,F))}return R});function j(Q,g=!1){let ne=c.ONE;if(Q.length){const ue=Q[0][0].length;for(let de=0;de<ue;de++){ne=c.sqr(ne);for(const[te,ae,m]of Q)for(const[x,B,R]of te[de])ne=U(x,B,R,ne,ae,m)}}return l&&(ne=c.conjugate(ne)),g?c.finalExponentiate(ne):ne}function q(Q,g=!0){const ne=[];E.ProjectivePoint.normalizeZ(Q.map(({g1:ue})=>ue)),T.ProjectivePoint.normalizeZ(Q.map(({g2:ue})=>ue));for(const{g1:ue,g2:de}of Q){if(ue.equals(E.ProjectivePoint.ZERO)||de.equals(T.ProjectivePoint.ZERO))throw new Error("pairing is not available for ZERO point");ue.assertValidity(),de.assertValidity();const te=ue.toAffine();ne.push([z(de),te.x,te.y])}return j(ne,g)}function ie(Q,g,ne=!0){return q([{g1:Q,g2:g}],ne)}const M={randomPrivateKey:()=>{const Q=da(t.ORDER);return Nf(r.randomBytes(Q),t.ORDER)},calcPairingPrecomputes:z},{ShortSignature:W}=r.G1,{Signature:Y}=r.G2;function J(Q){return Q instanceof E.ProjectivePoint?Q:E.ProjectivePoint.fromHex(Q)}function re(Q,g){return Q instanceof E.ProjectivePoint?Q:E.hashToCurve(at("point",Q),g)}function K(Q){return Q instanceof T.ProjectivePoint?Q:Y.fromHex(Q)}function ye(Q,g){return Q instanceof T.ProjectivePoint?Q:T.hashToCurve(at("point",Q),g)}function he(Q){return E.ProjectivePoint.fromPrivateKey(Q).toRawBytes(!0)}function S(Q){return T.ProjectivePoint.fromPrivateKey(Q).toRawBytes(!0)}function L(Q,g,ne){const ue=ye(Q,ne);ue.assertValidity();const de=ue.multiply(E.normPrivateKeyToScalar(g));return Q instanceof T.ProjectivePoint?de:Y.toRawBytes(de)}function V(Q,g,ne){const ue=re(Q,ne);ue.assertValidity();const de=ue.multiply(E.normPrivateKeyToScalar(g));return Q instanceof E.ProjectivePoint?de:W.toRawBytes(de)}function X(Q,g,ne,ue){const de=J(ne),te=ye(g,ue),ae=E.ProjectivePoint.BASE,m=K(Q),x=q([{g1:de.negate(),g2:te},{g1:ae,g2:m}]);return c.eql(x,c.ONE)}function Z(Q,g,ne,ue){const de=K(ne),te=re(g,ue),ae=T.ProjectivePoint.BASE,m=J(Q),x=q([{g1:te,g2:de},{g1:m,g2:ae.negate()}]);return c.eql(x,c.ONE)}function G(Q){if(!Array.isArray(Q)||Q.length===0)throw new Error("expected non-empty array")}function ee(Q){G(Q);const ne=Q.map(J).reduce((ue,de)=>ue.add(de),E.ProjectivePoint.ZERO);return Q[0]instanceof E.ProjectivePoint?(ne.assertValidity(),ne):ne.toRawBytes(!0)}function le(Q){G(Q);const ne=Q.map(K).reduce((ue,de)=>ue.add(de),T.ProjectivePoint.ZERO);return Q[0]instanceof T.ProjectivePoint?(ne.assertValidity(),ne):Y.toRawBytes(ne)}function oe(Q){G(Q);const ne=Q.map(J).reduce((ue,de)=>ue.add(de),E.ProjectivePoint.ZERO);return Q[0]instanceof E.ProjectivePoint?(ne.assertValidity(),ne):W.toRawBytes(ne)}function fe(Q,g,ne,ue){if(G(g),ne.length!==g.length)throw new Error("amount of public keys and messages should be equal");const de=K(Q),te=g.map(B=>ye(B,ue)),ae=ne.map(J),m=new Map;for(let B=0;B<ae.length;B++){const R=ae[B],F=te[B];let P=m.get(F);P===void 0&&(P=[],m.set(F,P)),P.push(R)}const x=[];try{for(const[B,R]of m){const F=R.reduce((P,h)=>P.add(h));x.push({g1:F,g2:B})}return x.push({g1:E.ProjectivePoint.BASE.negate(),g2:de}),c.eql(q(x),c.ONE)}catch{return!1}}return E.ProjectivePoint.BASE._setWindowSize(4),{getPublicKey:he,getPublicKeyForShortSignatures:S,sign:L,signShortSignature:V,verify:X,verifyBatch:fe,verifyShortSignature:Z,aggregatePublicKeys:ee,aggregateSignatures:le,aggregateShortSignatures:oe,millerLoopBatch:j,pairing:ie,pairingBatch:q,G1:E,G2:T,Signature:Y,ShortSignature:W,fields:{Fr:t,Fp:e,Fp2:n,Fp6:i,Fp12:c},params:{ateLoopSize:r.params.ateLoopSize,r:r.params.r,G1b:r.G1.b,G2b:r.G2.b},utils:M}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qf=BigInt(0),Er=BigInt(1),Ot=BigInt(2),Ss=BigInt(3);function yi(r,e,t,n,i=1,c){const l=BigInt(c===void 0?n:c),u=t**BigInt(n),y=[];for(let E=0;E<i;E++){const I=BigInt(E+1),T=[];for(let U=0,v=Er;U<n;U++){const w=(I*v-I)/l%u;T.push(r.pow(e,w)),v*=t}y.push(T)}return y}function Gf(r,e,t){const n=e.pow(t,(r.ORDER-Er)/Ss),i=e.pow(t,(r.ORDER-Er)/Ot);function c(U,v){const w=e.mul(e.frobeniusMap(U,1),n),C=e.mul(e.frobeniusMap(v,1),i);return[w,C]}const l=e.pow(t,(r.ORDER**Ot-Er)/Ss),u=e.pow(t,(r.ORDER**Ot-Er)/Ot);if(!e.eql(u,e.neg(e.ONE)))throw new Error("psiFrobenius: PSI2_Y!==-1");function y(U,v){return[e.mul(U,l),e.neg(v)]}const E=U=>(v,w)=>{const C=w.toAffine(),k=U(C.x,C.y);return v.fromAffine({x:k[0],y:k[1]})},I=E(c),T=E(y);return{psi:c,psi2:y,G2psi:I,G2psi2:T,PSI_X:n,PSI_Y:i,PSI2_X:l,PSI2_Y:u}}function Hf(r){const{ORDER:e}=r,t=tn(e),n=t.create(r.NONRESIDUE||BigInt(-1)),i=Tf(e),c=t.div(t.ONE,Ot),l=yi(t,n,t.ORDER,2)[0],u=({c0:S,c1:L},{c0:V,c1:X})=>({c0:t.add(S,V),c1:t.add(L,X)}),y=({c0:S,c1:L},{c0:V,c1:X})=>({c0:t.sub(S,V),c1:t.sub(L,X)}),E=({c0:S,c1:L},V)=>{if(typeof V=="bigint")return{c0:t.mul(S,V),c1:t.mul(L,V)};const{c0:X,c1:Z}=V;let G=t.mul(S,X),ee=t.mul(L,Z);const le=t.sub(G,ee),oe=t.sub(t.mul(t.add(S,L),t.add(X,Z)),t.add(G,ee));return{c0:le,c1:oe}},I=({c0:S,c1:L})=>{const V=t.add(S,L),X=t.sub(S,L),Z=t.add(S,S);return{c0:t.mul(V,X),c1:t.mul(Z,L)}},T=S=>{if(S.length!==2)throw new Error("invalid tuple");const L=S.map(V=>t.create(V));return{c0:L[0],c1:L[1]}},U=e*e,v=T(r.FP2_NONRESIDUE),w={ORDER:U,isLE:t.isLE,NONRESIDUE:v,BITS:Gr(U),BYTES:Math.ceil(Gr(U)/8),MASK:Br(Gr(U)),ZERO:{c0:t.ZERO,c1:t.ZERO},ONE:{c0:t.ONE,c1:t.ZERO},create:S=>S,isValid:({c0:S,c1:L})=>typeof S=="bigint"&&typeof L=="bigint",is0:({c0:S,c1:L})=>t.is0(S)&&t.is0(L),eql:({c0:S,c1:L},{c0:V,c1:X})=>t.eql(S,V)&&t.eql(L,X),neg:({c0:S,c1:L})=>({c0:t.neg(S),c1:t.neg(L)}),pow:(S,L)=>bn(w,S,L),invertBatch:S=>xn(w,S),add:u,sub:y,mul:E,sqr:I,addN:u,subN:y,mulN:E,sqrN:I,div:(S,L)=>w.mul(S,typeof L=="bigint"?t.inv(t.create(L)):w.inv(L)),inv:({c0:S,c1:L})=>{const V=t.inv(t.create(S*S+L*L));return{c0:t.mul(V,t.create(S)),c1:t.mul(V,t.create(-L))}},sqrt:S=>{if(r.Fp2sqrt)return r.Fp2sqrt(S);const{c0:L,c1:V}=S;if(t.is0(V))return t.eql(i(t,L),t.ONE)?w.create({c0:t.sqrt(L),c1:t.ZERO}):w.create({c0:t.ZERO,c1:t.sqrt(t.div(L,n))});const X=t.sqrt(t.sub(t.sqr(L),t.mul(t.sqr(V),n)));let Z=t.mul(t.add(X,L),c);const G=i(t,Z);!t.is0(G)&&!t.eql(G,t.ONE)&&(Z=t.sub(Z,X));const ee=t.sqrt(Z),le=w.create({c0:ee,c1:t.div(t.mul(V,c),ee)});if(!w.eql(w.sqr(le),S))throw new Error("Cannot find square root");const oe=le,fe=w.neg(oe),{re:Q,im:g}=w.reim(oe),{re:ne,im:ue}=w.reim(fe);return g>ue||g===ue&&Q>ne?oe:fe},isOdd:S=>{const{re:L,im:V}=w.reim(S),X=L%Ot,Z=L===qf,G=V%Ot;return BigInt(X||Z&&G)==Er},fromBytes(S){if(S.length!==w.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:t.fromBytes(S.subarray(0,t.BYTES)),c1:t.fromBytes(S.subarray(t.BYTES))}},toBytes:({c0:S,c1:L})=>Ge(t.toBytes(S),t.toBytes(L)),cmov:({c0:S,c1:L},{c0:V,c1:X},Z)=>({c0:t.cmov(S,V,Z),c1:t.cmov(L,X,Z)}),reim:({c0:S,c1:L})=>({re:S,im:L}),mulByNonresidue:({c0:S,c1:L})=>w.mul({c0:S,c1:L},v),mulByB:r.Fp2mulByB,fromBigTuple:T,frobeniusMap:({c0:S,c1:L},V)=>({c0:S,c1:t.mul(L,l[V%2])})},C=({c0:S,c1:L,c2:V},{c0:X,c1:Z,c2:G})=>({c0:w.add(S,X),c1:w.add(L,Z),c2:w.add(V,G)}),k=({c0:S,c1:L,c2:V},{c0:X,c1:Z,c2:G})=>({c0:w.sub(S,X),c1:w.sub(L,Z),c2:w.sub(V,G)}),z=({c0:S,c1:L,c2:V},X)=>{if(typeof X=="bigint")return{c0:w.mul(S,X),c1:w.mul(L,X),c2:w.mul(V,X)};const{c0:Z,c1:G,c2:ee}=X,le=w.mul(S,Z),oe=w.mul(L,G),fe=w.mul(V,ee);return{c0:w.add(le,w.mulByNonresidue(w.sub(w.mul(w.add(L,V),w.add(G,ee)),w.add(oe,fe)))),c1:w.add(w.sub(w.mul(w.add(S,L),w.add(Z,G)),w.add(le,oe)),w.mulByNonresidue(fe)),c2:w.sub(w.add(oe,w.mul(w.add(S,V),w.add(Z,ee))),w.add(le,fe))}},j=({c0:S,c1:L,c2:V})=>{let X=w.sqr(S),Z=w.mul(w.mul(S,L),Ot),G=w.mul(w.mul(L,V),Ot),ee=w.sqr(V);return{c0:w.add(w.mulByNonresidue(G),X),c1:w.add(w.mulByNonresidue(ee),Z),c2:w.sub(w.sub(w.add(w.add(Z,w.sqr(w.add(w.sub(S,L),V))),G),X),ee)}},[q,ie]=yi(w,v,t.ORDER,6,2,3),M={ORDER:w.ORDER,isLE:w.isLE,BITS:3*w.BITS,BYTES:3*w.BYTES,MASK:Br(3*w.BITS),ZERO:{c0:w.ZERO,c1:w.ZERO,c2:w.ZERO},ONE:{c0:w.ONE,c1:w.ZERO,c2:w.ZERO},create:S=>S,isValid:({c0:S,c1:L,c2:V})=>w.isValid(S)&&w.isValid(L)&&w.isValid(V),is0:({c0:S,c1:L,c2:V})=>w.is0(S)&&w.is0(L)&&w.is0(V),neg:({c0:S,c1:L,c2:V})=>({c0:w.neg(S),c1:w.neg(L),c2:w.neg(V)}),eql:({c0:S,c1:L,c2:V},{c0:X,c1:Z,c2:G})=>w.eql(S,X)&&w.eql(L,Z)&&w.eql(V,G),sqrt:ys,div:(S,L)=>M.mul(S,typeof L=="bigint"?t.inv(t.create(L)):M.inv(L)),pow:(S,L)=>bn(M,S,L),invertBatch:S=>xn(M,S),add:C,sub:k,mul:z,sqr:j,addN:C,subN:k,mulN:z,sqrN:j,inv:({c0:S,c1:L,c2:V})=>{let X=w.sub(w.sqr(S),w.mulByNonresidue(w.mul(V,L))),Z=w.sub(w.mulByNonresidue(w.sqr(V)),w.mul(S,L)),G=w.sub(w.sqr(L),w.mul(S,V)),ee=w.inv(w.add(w.mulByNonresidue(w.add(w.mul(V,Z),w.mul(L,G))),w.mul(S,X)));return{c0:w.mul(ee,X),c1:w.mul(ee,Z),c2:w.mul(ee,G)}},fromBytes:S=>{if(S.length!==M.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:w.fromBytes(S.subarray(0,w.BYTES)),c1:w.fromBytes(S.subarray(w.BYTES,2*w.BYTES)),c2:w.fromBytes(S.subarray(2*w.BYTES))}},toBytes:({c0:S,c1:L,c2:V})=>Ge(w.toBytes(S),w.toBytes(L),w.toBytes(V)),cmov:({c0:S,c1:L,c2:V},{c0:X,c1:Z,c2:G},ee)=>({c0:w.cmov(S,X,ee),c1:w.cmov(L,Z,ee),c2:w.cmov(V,G,ee)}),fromBigSix:S=>{if(!Array.isArray(S)||S.length!==6)throw new Error("invalid Fp6 usage");return{c0:w.fromBigTuple(S.slice(0,2)),c1:w.fromBigTuple(S.slice(2,4)),c2:w.fromBigTuple(S.slice(4,6))}},frobeniusMap:({c0:S,c1:L,c2:V},X)=>({c0:w.frobeniusMap(S,X),c1:w.mul(w.frobeniusMap(L,X),q[X%6]),c2:w.mul(w.frobeniusMap(V,X),ie[X%6])}),mulByFp2:({c0:S,c1:L,c2:V},X)=>({c0:w.mul(S,X),c1:w.mul(L,X),c2:w.mul(V,X)}),mulByNonresidue:({c0:S,c1:L,c2:V})=>({c0:w.mulByNonresidue(V),c1:S,c2:L}),mul1:({c0:S,c1:L,c2:V},X)=>({c0:w.mulByNonresidue(w.mul(V,X)),c1:w.mul(S,X),c2:w.mul(L,X)}),mul01({c0:S,c1:L,c2:V},X,Z){let G=w.mul(S,X),ee=w.mul(L,Z);return{c0:w.add(w.mulByNonresidue(w.sub(w.mul(w.add(L,V),Z),ee)),G),c1:w.sub(w.sub(w.mul(w.add(X,Z),w.add(S,L)),G),ee),c2:w.add(w.sub(w.mul(w.add(S,V),X),G),ee)}}},W=yi(w,v,t.ORDER,12,1,6)[0],Y=({c0:S,c1:L},{c0:V,c1:X})=>({c0:M.add(S,V),c1:M.add(L,X)}),J=({c0:S,c1:L},{c0:V,c1:X})=>({c0:M.sub(S,V),c1:M.sub(L,X)}),re=({c0:S,c1:L},V)=>{if(typeof V=="bigint")return{c0:M.mul(S,V),c1:M.mul(L,V)};let{c0:X,c1:Z}=V,G=M.mul(S,X),ee=M.mul(L,Z);return{c0:M.add(G,M.mulByNonresidue(ee)),c1:M.sub(M.mul(M.add(S,L),M.add(X,Z)),M.add(G,ee))}},K=({c0:S,c1:L})=>{let V=M.mul(S,L);return{c0:M.sub(M.sub(M.mul(M.add(M.mulByNonresidue(L),S),M.add(S,L)),V),M.mulByNonresidue(V)),c1:M.add(V,V)}};function ye(S,L){const V=w.sqr(S),X=w.sqr(L);return{first:w.add(w.mulByNonresidue(X),V),second:w.sub(w.sub(w.sqr(w.add(S,L)),V),X)}}const he={ORDER:w.ORDER,isLE:M.isLE,BITS:2*M.BITS,BYTES:2*M.BYTES,MASK:Br(2*M.BITS),ZERO:{c0:M.ZERO,c1:M.ZERO},ONE:{c0:M.ONE,c1:M.ZERO},create:S=>S,isValid:({c0:S,c1:L})=>M.isValid(S)&&M.isValid(L),is0:({c0:S,c1:L})=>M.is0(S)&&M.is0(L),neg:({c0:S,c1:L})=>({c0:M.neg(S),c1:M.neg(L)}),eql:({c0:S,c1:L},{c0:V,c1:X})=>M.eql(S,V)&&M.eql(L,X),sqrt:ys,inv:({c0:S,c1:L})=>{let V=M.inv(M.sub(M.sqr(S),M.mulByNonresidue(M.sqr(L))));return{c0:M.mul(S,V),c1:M.neg(M.mul(L,V))}},div:(S,L)=>he.mul(S,typeof L=="bigint"?t.inv(t.create(L)):he.inv(L)),pow:(S,L)=>bn(he,S,L),invertBatch:S=>xn(he,S),add:Y,sub:J,mul:re,sqr:K,addN:Y,subN:J,mulN:re,sqrN:K,fromBytes:S=>{if(S.length!==he.BYTES)throw new Error("fromBytes invalid length="+S.length);return{c0:M.fromBytes(S.subarray(0,M.BYTES)),c1:M.fromBytes(S.subarray(M.BYTES))}},toBytes:({c0:S,c1:L})=>Ge(M.toBytes(S),M.toBytes(L)),cmov:({c0:S,c1:L},{c0:V,c1:X},Z)=>({c0:M.cmov(S,V,Z),c1:M.cmov(L,X,Z)}),fromBigTwelve:S=>({c0:M.fromBigSix(S.slice(0,6)),c1:M.fromBigSix(S.slice(6,12))}),frobeniusMap(S,L){const{c0:V,c1:X,c2:Z}=M.frobeniusMap(S.c1,L),G=W[L%12];return{c0:M.frobeniusMap(S.c0,L),c1:M.create({c0:w.mul(V,G),c1:w.mul(X,G),c2:w.mul(Z,G)})}},mulByFp2:({c0:S,c1:L},V)=>({c0:M.mulByFp2(S,V),c1:M.mulByFp2(L,V)}),conjugate:({c0:S,c1:L})=>({c0:S,c1:M.neg(L)}),mul014:({c0:S,c1:L},V,X,Z)=>{let G=M.mul01(S,V,X),ee=M.mul1(L,Z);return{c0:M.add(M.mulByNonresidue(ee),G),c1:M.sub(M.sub(M.mul01(M.add(L,S),V,w.add(X,Z)),G),ee)}},mul034:({c0:S,c1:L},V,X,Z)=>{const G=M.create({c0:w.mul(S.c0,V),c1:w.mul(S.c1,V),c2:w.mul(S.c2,V)}),ee=M.mul01(L,X,Z),le=M.mul01(M.add(S,L),w.add(V,X),Z);return{c0:M.add(M.mulByNonresidue(ee),G),c1:M.sub(le,M.add(G,ee))}},_cyclotomicSquare:r.Fp12cyclotomicSquare,_cyclotomicExp:r.Fp12cyclotomicExp,finalExponentiate:r.Fp12finalExponentiate};return{Fp:t,Fp2:w,Fp6:M,Fp4Square:ye,Fp12:he}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ot=BigInt(0),Hn=BigInt(1),We=BigInt(2),ln=BigInt(3),Hr=BigInt(4),jt=BigInt("0xd201000000010000"),Vf=Gr(jt),{Fp:we,Fp2:me,Fp6:Li,Fp4Square:wi,Fp12:Se}=Hf({ORDER:BigInt("0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaaab"),FP2_NONRESIDUE:[Hn,Hn],Fp2mulByB:({c0:r,c1:e})=>{const t=we.mul(r,Hr),n=we.mul(e,Hr);return{c0:we.sub(t,n),c1:we.add(t,n)}},Fp12cyclotomicSquare:({c0:r,c1:e})=>{const{c0:t,c1:n,c2:i}=r,{c0:c,c1:l,c2:u}=e,{first:y,second:E}=wi(t,l),{first:I,second:T}=wi(c,i),{first:U,second:v}=wi(n,u),w=me.mulByNonresidue(v);return{c0:Li.create({c0:me.add(me.mul(me.sub(y,t),We),y),c1:me.add(me.mul(me.sub(I,n),We),I),c2:me.add(me.mul(me.sub(U,i),We),U)}),c1:Li.create({c0:me.add(me.mul(me.add(w,c),We),w),c1:me.add(me.mul(me.add(E,l),We),E),c2:me.add(me.mul(me.add(T,u),We),T)})}},Fp12cyclotomicExp(r,e){let t=Se.ONE;for(let n=Vf-1;n>=0;n--)t=Se._cyclotomicSquare(t),xf(e,n)&&(t=Se.mul(t,r));return t},Fp12finalExponentiate:r=>{const e=jt,t=Se.div(Se.frobeniusMap(r,6),r),n=Se.mul(Se.frobeniusMap(t,2),t),i=Se.conjugate(Se._cyclotomicExp(n,e)),c=Se.mul(Se.conjugate(Se._cyclotomicSquare(n)),i),l=Se.conjugate(Se._cyclotomicExp(c,e)),u=Se.conjugate(Se._cyclotomicExp(l,e)),y=Se.mul(Se.conjugate(Se._cyclotomicExp(u,e)),Se._cyclotomicSquare(i)),E=Se.conjugate(Se._cyclotomicExp(y,e)),I=Se.frobeniusMap(Se.mul(i,u),2),T=Se.frobeniusMap(Se.mul(l,n),3),U=Se.frobeniusMap(Se.mul(y,Se.conjugate(n)),1),v=Se.mul(Se.mul(E,Se.conjugate(c)),n);return Se.mul(Se.mul(Se.mul(I,T),U),v)}}),vs=tn(BigInt("0x73eda753299d7d483339d80809a1d80553bda402fffe5bfeffffffff00000001")),zf=pa(me,[[["0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97d6"],["0x0","0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71a"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71e","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38d"],["0x171d6541fa38ccfaed6dea691f5fb614cb14b4e7f4e810aa22d6108f142b85757098e38d0f671c7188e2aaaaaaaa5ed1","0x0"]],[["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa63"],["0xc","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa9f"],["0x1","0x0"]],[["0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706","0x1530477c7ab4113b59a4c18b076d11930f7da5d4a07f649bf54439d87d27e500fc8c25ebf8c92f6812cfc71c71c6d706"],["0x0","0x5c759507e8e333ebb5b7a9a47d7ed8532c52d39fd3a042a88b58423c50ae15d5c2638e343d9c71c6238aaaaaaaa97be"],["0x11560bf17baa99bc32126fced787c88f984f87adf7ae0c7f9a208c6b4f20a4181472aaa9cb8d555526a9ffffffffc71c","0x8ab05f8bdd54cde190937e76bc3e447cc27c3d6fbd7063fcd104635a790520c0a395554e5c6aaaa9354ffffffffe38f"],["0x124c9ad43b6cf79bfbf7043de3811ad0761b0f37a1e26286b0e977c69aa274524e79097a56dc4bd9e1b371c71c718b10","0x0"]],[["0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa8fb"],["0x0","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffa9d3"],["0x12","0x1a0111ea397fe69a4b1ba7b6434bacd764774b84f38512bf6730d2a0f6b0f6241eabfffeb153ffffb9feffffffffaa99"],["0x1","0x0"]]].map(r=>r.map(e=>me.fromBigTuple(e.map(BigInt))))),jf=pa(we,[["0x11a05f2b1e833340b809101dd99815856b303e88a2d7005ff2627b56cdb4e2c85610c2d5f2e62d6eaeac1662734649b7","0x17294ed3e943ab2f0588bab22147a81c7c17e75b2f6a8417f565e33c70d1e86b4838f2a6f318c356e834eef1b3cb83bb","0xd54005db97678ec1d1048c5d10a9a1bce032473295983e56878e501ec68e25c958c3e3d2a09729fe0179f9dac9edcb0","0x1778e7166fcc6db74e0609d307e55412d7f5e4656a8dbf25f1b33289f1b330835336e25ce3107193c5b388641d9b6861","0xe99726a3199f4436642b4b3e4118e5499db995a1257fb3f086eeb65982fac18985a286f301e77c451154ce9ac8895d9","0x1630c3250d7313ff01d1201bf7a74ab5db3cb17dd952799b9ed3ab9097e68f90a0870d2dcae73d19cd13c1c66f652983","0xd6ed6553fe44d296a3726c38ae652bfb11586264f0f8ce19008e218f9c86b2a8da25128c1052ecaddd7f225a139ed84","0x17b81e7701abdbe2e8743884d1117e53356de5ab275b4db1a682c62ef0f2753339b7c8f8c8f475af9ccb5618e3f0c88e","0x80d3cf1f9a78fc47b90b33563be990dc43b756ce79f5574a2c596c928c5d1de4fa295f296b74e956d71986a8497e317","0x169b1f8e1bcfa7c42e0c37515d138f22dd2ecb803a0c5c99676314baf4bb1b7fa3190b2edc0327797f241067be390c9e","0x10321da079ce07e272d8ec09d2565b0dfa7dccdde6787f96d50af36003b14866f69b771f8c285decca67df3f1605fb7b","0x6e08c248e260e70bd1e962381edee3d31d79d7e22c837bc23c0bf1bc24c6b68c24b1b80b64d391fa9c8ba2e8ba2d229"],["0x8ca8d548cff19ae18b2e62f4bd3fa6f01d5ef4ba35b48ba9c9588617fc8ac62b558d681be343df8993cf9fa40d21b1c","0x12561a5deb559c4348b4711298e536367041e8ca0cf0800c0126c2588c48bf5713daa8846cb026e9e5c8276ec82b3bff","0xb2962fe57a3225e8137e629bff2991f6f89416f5a718cd1fca64e00b11aceacd6a3d0967c94fedcfcc239ba5cb83e19","0x3425581a58ae2fec83aafef7c40eb545b08243f16b1655154cca8abc28d6fd04976d5243eecf5c4130de8938dc62cd8","0x13a8e162022914a80a6f1d5f43e7a07dffdfc759a12062bb8d6b44e833b306da9bd29ba81f35781d539d395b3532a21e","0xe7355f8e4e667b955390f7f0506c6e9395735e9ce9cad4d0a43bcef24b8982f7400d24bc4228f11c02df9a29f6304a5","0x772caacf16936190f3e0c63e0596721570f5799af53a1894e2e073062aede9cea73b3538f0de06cec2574496ee84a3a","0x14a7ac2a9d64a8b230b3f5b074cf01996e7f63c21bca68a81996e1cdf9822c580fa5b9489d11e2d311f7d99bbdcc5a5e","0xa10ecf6ada54f825e920b3dafc7a3cce07f8d1d7161366b74100da67f39883503826692abba43704776ec3a79a1d641","0x95fc13ab9e92ad4476d6e3eb3a56680f682b4ee96f7d03776df533978f31c1593174e4b4b7865002d6384d168ecdd0a","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"],["0x90d97c81ba24ee0259d1f094980dcfa11ad138e48a869522b52af6c956543d3cd0c7aee9b3ba3c2be9845719707bb33","0x134996a104ee5811d51036d776fb46831223e96c254f383d0f906343eb67ad34d6c56711962fa8bfe097e75a2e41c696","0xcc786baa966e66f4a384c86a3b49942552e2d658a31ce2c344be4b91400da7d26d521628b00523b8dfe240c72de1f6","0x1f86376e8981c217898751ad8746757d42aa7b90eeb791c09e4a3ec03251cf9de405aba9ec61deca6355c77b0e5f4cb","0x8cc03fdefe0ff135caf4fe2a21529c4195536fbe3ce50b879833fd221351adc2ee7f8dc099040a841b6daecf2e8fedb","0x16603fca40634b6a2211e11db8f0a6a074a7d0d4afadb7bd76505c3d3ad5544e203f6326c95a807299b23ab13633a5f0","0x4ab0b9bcfac1bbcb2c977d027796b3ce75bb8ca2be184cb5231413c4d634f3747a87ac2460f415ec961f8855fe9d6f2","0x987c8d5333ab86fde9926bd2ca6c674170a05bfe3bdd81ffd038da6c26c842642f64550fedfe935a15e4ca31870fb29","0x9fc4018bd96684be88c9e221e4da1bb8f3abd16679dc26c1e8b6e6a1f20cabe69d65201c78607a360370e577bdba587","0xe1bba7a1186bdb5223abde7ada14a23c42a0ca7915af6fe06985e7ed1e4d43b9b3f7055dd4eba6f2bafaaebca731c30","0x19713e47937cd1be0dfd0b8f1d43fb93cd2fcbcb6caf493fd1183e416389e61031bf3a5cce3fbafce813711ad011c132","0x18b46a908f36f6deb918c143fed2edcc523559b8aaf0c2462e6bfe7f911f643249d9cdf41b44d606ce07c8a4d0074d8e","0xb182cac101b9399d155096004f53f447aa7b12a3426b08ec02710e807b4633f06c851c1919211f20d4c04f00b971ef8","0x245a394ad1eca9b72fc00ae7be315dc757b3b080d4c158013e6632d3c40659cc6cf90ad1c232a6442d9d3f5db980133","0x5c129645e44cf1102a159f748c4a3fc5e673d81d7e86568d9ab0f5d396a7ce46ba1049b6579afb7866b1e715475224b","0x15e6be4e990f03ce4ea50b3b42df2eb5cb181d8f84965a3957add4fa95af01b2b665027efec01c7704b456be69c8b604"],["0x16112c4c3a9c98b252181140fad0eae9601a6de578980be6eec3232b5be72e7a07f3688ef60c206d01479253b03663c1","0x1962d75c2381201e1a0cbd6c43c348b885c84ff731c4d59ca4a10356f453e01f78a4260763529e3532f6102c2e49a03d","0x58df3306640da276faaae7d6e8eb15778c4855551ae7f310c35a5dd279cd2eca6757cd636f96f891e2538b53dbf67f2","0x16b7d288798e5395f20d23bf89edb4d1d115c5dbddbcd30e123da489e726af41727364f2c28297ada8d26d98445f5416","0xbe0e079545f43e4b00cc912f8228ddcc6d19c9f0f69bbb0542eda0fc9dec916a20b15dc0fd2ededda39142311a5001d","0x8d9e5297186db2d9fb266eaac783182b70152c65550d881c5ecd87b6f0f5a6449f38db9dfa9cce202c6477faaf9b7ac","0x166007c08a99db2fc3ba8734ace9824b5eecfdfa8d0cf8ef5dd365bc400a0051d5fa9c01a58b1fb93d1a1399126a775c","0x16a3ef08be3ea7ea03bcddfabba6ff6ee5a4375efa1f4fd7feb34fd206357132b920f5b00801dee460ee415a15812ed9","0x1866c8ed336c61231a1be54fd1d74cc4f9fb0ce4c6af5920abc5750c4bf39b4852cfe2f7bb9248836b233d9d55535d4a","0x167a55cda70a6e1cea820597d94a84903216f763e13d87bb5308592e7ea7d4fbc7385ea3d529b35e346ef48bb8913f55","0x4d2f259eea405bd48f010a01ad2911d9c6dd039bb61a6290e591b36e636a5c871a5c29f4f83060400f8b49cba8f6aa8","0xaccbb67481d033ff5852c1e48c50c477f94ff8aefce42d28c0f9a88cea7913516f968986f7ebbea9684b529e2561092","0xad6b9514c767fe3c3613144b45f1496543346d98adf02267d5ceef9a00d9b8693000763e3b90ac11e99b138573345cc","0x2660400eb2e4f3b628bdd0d53cd76f2bf565b94e72927c1cb748df27942480e420517bd8714cc80d1fadc1326ed06f7","0xe0fa1d816ddc03e6b24255e0d7819c171c40f65e273b853324efcd6356caa205ca2f570f13497804415473a1d634b8f","0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001"]].map(r=>r.map(e=>BigInt(e)))),Yf=xa(me,{A:me.create({c0:we.create(ot),c1:we.create(BigInt(240))}),B:me.create({c0:we.create(BigInt(1012)),c1:we.create(BigInt(1012))}),Z:me.create({c0:we.create(BigInt(-2)),c1:we.create(BigInt(-1))})}),Zf=xa(we,{A:we.create(BigInt("0x144698a3b8e9433d693a02c96d4982b0ea985383ee66a8d8e8981aefd881ac98936f8da0e0f97f5cf428082d584c1d")),B:we.create(BigInt("0x12e2908d11688030018b12e8753eee3b2016c1f0f24f4070a0b9c14fcef35ef55a23215a316ceaa5d1cc48e98e172be0")),Z:we.create(BigInt(11))}),{G2psi:Ts,G2psi2:Wf}=Gf(we,me,me.div(me.ONE,me.NONRESIDUE)),gi=Object.freeze({DST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",encodeDST:"BLS_SIG_BLS12381G2_XMD:SHA-256_SSWU_RO_NUL_",p:we.ORDER,m:2,k:128,expand:"xmd",hash:Di}),Vn=Zr(we.toBytes(ot),{infinity:!0,compressed:!0});function hn(r){r=r.slice();const e=r[0]&224,t=!!(e>>7&1),n=!!(e>>6&1),i=!!(e>>5&1);return r[0]&=31,{compressed:t,infinity:n,sort:i,value:r}}function Zr(r,e){if(r[0]&224)throw new Error("setMask: non-empty mask");return e.compressed&&(r[0]|=128),e.infinity&&(r[0]|=64),e.sort&&(r[0]|=32),r}function Ns(r){r.assertValidity();const e=r.equals(lt.G1.ProjectivePoint.ZERO),{x:t,y:n}=r.toAffine();if(e)return Vn.slice();const i=we.ORDER,c=!!(n*We/i);return Zr(Je(t,we.BYTES),{compressed:!0,sort:c})}function Us(r){r.assertValidity();const e=we.BYTES;if(r.equals(lt.G2.ProjectivePoint.ZERO))return Ge(Vn,Je(ot,e));const{x:t,y:n}=r.toAffine(),{re:i,im:c}=me.reim(t),{re:l,im:u}=me.reim(n),E=!!((u>ot?u*We:l*We)/we.ORDER&Hn),I=i;return Ge(Zr(Je(c,e),{sort:E,compressed:!0}),Je(I,e))}const lt=Df({fields:{Fp:we,Fp2:me,Fp6:Li,Fp12:Se,Fr:vs},G1:{Fp:we,h:BigInt("0x396c8c005555e1568c00aaab0000aaab"),Gx:BigInt("0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb"),Gy:BigInt("0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1"),a:we.ZERO,b:Hr,htfDefaults:{...gi,m:1,DST:"BLS_SIG_BLS12381G1_XMD:SHA-256_SSWU_RO_NUL_"},wrapPrivateKey:!0,allowInfinityPoint:!0,isTorsionFree:(r,e)=>{const t=BigInt("0x5f19672fdf76ce51ba69c6076a0f77eaddb3a93be6f89688de17d813620a00022e01fffffffefffe"),n=new r(we.mul(e.px,t),e.py,e.pz);return e.multiplyUnsafe(jt).negate().multiplyUnsafe(jt).equals(n)},clearCofactor:(r,e)=>e.multiplyUnsafe(jt).add(e),mapToCurve:r=>{const{x:e,y:t}=Zf(we.create(r[0]));return jf(e,t)},fromBytes:r=>{const{compressed:e,infinity:t,sort:n,value:i}=hn(r);if(i.length===48&&e){const c=we.ORDER,l=gt(i),u=we.create(l&we.MASK);if(t){if(u!==ot)throw new Error("G1: non-empty compressed point at infinity");return{x:ot,y:ot}}const y=we.add(we.pow(u,ln),we.create(lt.params.G1b));let E=we.sqrt(y);if(!E)throw new Error("invalid compressed G1 point");return E*We/c!==BigInt(n)&&(E=we.neg(E)),{x:we.create(u),y:we.create(E)}}else if(i.length===96&&!e){const c=gt(i.subarray(0,we.BYTES)),l=gt(i.subarray(we.BYTES));if(t){if(c!==ot||l!==ot)throw new Error("G1: non-empty point at infinity");return lt.G1.ProjectivePoint.ZERO.toAffine()}return{x:we.create(c),y:we.create(l)}}else throw new Error("invalid point G1, expected 48/96 bytes")},toBytes:(r,e,t)=>{const n=e.equals(r.ZERO),{x:i,y:c}=e.toAffine();if(t){if(n)return Vn.slice();const l=we.ORDER,u=!!(c*We/l);return Zr(Je(i,we.BYTES),{compressed:!0,sort:u})}else return n?Ge(new Uint8Array([64]),new Uint8Array(2*we.BYTES-1)):Ge(Je(i,we.BYTES),Je(c,we.BYTES))},ShortSignature:{fromHex(r){const{infinity:e,sort:t,value:n}=hn(at("signatureHex",r,48)),i=we.ORDER,c=gt(n);if(e)return lt.G1.ProjectivePoint.ZERO;const l=we.create(c&we.MASK),u=we.add(we.pow(l,ln),we.create(lt.params.G1b));let y=we.sqrt(u);if(!y)throw new Error("invalid compressed G1 point");const E=BigInt(t);y*We/i!==E&&(y=we.neg(y));const I=lt.G1.ProjectivePoint.fromAffine({x:l,y});return I.assertValidity(),I},toRawBytes(r){return Ns(r)},toHex(r){return fr(Ns(r))}}},G2:{Fp:me,h:BigInt("0x5d543a95414e7f1091d50792876a202cd91de4547085abaa68a205b2e5a7ddfa628f1cb4d9e82ef21537e293a6691ae1616ec6e786f0c70cf1c38e31c7238e5"),Gx:me.fromBigTuple([BigInt("0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8"),BigInt("0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e")]),Gy:me.fromBigTuple([BigInt("0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801"),BigInt("0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be")]),a:me.ZERO,b:me.fromBigTuple([Hr,Hr]),hEff:BigInt("0xbc69f08f2ee75b3584c6a0ea91b352888e2a8e9145ad7689986ff031508ffe1329c2f178731db956d82bf015d1212b02ec0ec69d7477c1ae954cbc06689f6a359894c0adebbf6b4e8020005aaa95551"),htfDefaults:{...gi},wrapPrivateKey:!0,allowInfinityPoint:!0,mapToCurve:r=>{const{x:e,y:t}=Yf(me.fromBigTuple(r));return zf(e,t)},isTorsionFree:(r,e)=>e.multiplyUnsafe(jt).negate().equals(Ts(r,e)),clearCofactor:(r,e)=>{const t=jt;let n=e.multiplyUnsafe(t).negate(),i=Ts(r,e),c=e.double();return c=Wf(r,c),c=c.subtract(i),i=n.add(i),i=i.multiplyUnsafe(t).negate(),c=c.add(i),c=c.subtract(n),c.subtract(e)},fromBytes:r=>{const{compressed:e,infinity:t,sort:n,value:i}=hn(r);if(!e&&!t&&n||!e&&t&&n||n&&t&&e)throw new Error("invalid encoding flag: "+(r[0]&224));const c=we.BYTES,l=(u,y,E)=>gt(u.slice(y,E));if(i.length===96&&e){const u=lt.params.G2b,y=we.ORDER;if(t){if(i.reduce((C,k)=>C!==0?k+1:k,0)>0)throw new Error("invalid compressed G2 point");return{x:me.ZERO,y:me.ZERO}}const E=l(i,0,c),I=l(i,c,2*c),T=me.create({c0:we.create(I),c1:we.create(E)}),U=me.add(me.pow(T,ln),u);let v=me.sqrt(U);const w=v.c1===ot?v.c0*We/y:v.c1*We/y?Hn:ot;return v=n&&w>0?v:me.neg(v),{x:T,y:v}}else if(i.length===192&&!e){if(t){if(i.reduce((T,U)=>T!==0?U+1:U,0)>0)throw new Error("invalid uncompressed G2 point");return{x:me.ZERO,y:me.ZERO}}const u=l(i,0,c),y=l(i,c,2*c),E=l(i,2*c,3*c),I=l(i,3*c,4*c);return{x:me.fromBigTuple([y,u]),y:me.fromBigTuple([I,E])}}else throw new Error("invalid point G2, expected 96/192 bytes")},toBytes:(r,e,t)=>{const{BYTES:n,ORDER:i}=we,c=e.equals(r.ZERO),{x:l,y:u}=e.toAffine();if(t){if(c)return Ge(Vn,Je(ot,n));const y=!!(u.c1===ot?u.c0*We/i:u.c1*We/i);return Ge(Zr(Je(l.c1,n),{compressed:!0,sort:y}),Je(l.c0,n))}else{if(c)return Ge(new Uint8Array([64]),new Uint8Array(4*n-1));const{re:y,im:E}=me.reim(l),{re:I,im:T}=me.reim(u);return Ge(Je(E,n),Je(y,n),Je(T,n),Je(I,n))}},Signature:{fromHex(r){const{infinity:e,sort:t,value:n}=hn(at("signatureHex",r)),i=we.ORDER,c=n.length/2;if(c!==48&&c!==96)throw new Error("invalid compressed signature length, must be 96 or 192");const l=gt(n.slice(0,c)),u=gt(n.slice(c));if(e)return lt.G2.ProjectivePoint.ZERO;const y=we.create(l&we.MASK),E=we.create(u),I=me.create({c0:E,c1:y}),T=me.add(me.pow(I,ln),lt.params.G2b);let U=me.sqrt(T);if(!U)throw new Error("Failed to find a square root");const{re:v,im:w}=me.reim(U),C=BigInt(t),k=w>ot&&w*We/i!==C,z=w===ot&&v*We/i!==C;(k||z)&&(U=me.neg(U));const j=lt.G2.ProjectivePoint.fromAffine({x:I,y:U});return j.assertValidity(),j},toRawBytes(r){return Us(r)},toHex(r){return fr(Us(r))}}},params:{ateLoopSize:jt,r:vs.ORDER,xNegative:!0,twistType:"multiplicative"},htfDefaults:gi,hash:Di,randomBytes:Ys});function Kf(r,e,t){const n=typeof r=="string"?r:ct(r),i=typeof e=="string"?e:ct(e),c=typeof t=="string"?t:ct(t);return lt.verifyShortSignature(i,c,n)}const Ea=r=>Ze(new Nr(r)),Xi=r=>{const e=Ea(r);return new Date(Number(e)/1e6)};var Xf=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Jf=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},En;class Tt extends Ve{constructor(e){super(`Invalid certificate: ${e}`)}}var ut;(function(r){r[r.Empty=0]="Empty",r[r.Fork=1]="Fork",r[r.Labeled=2]="Labeled",r[r.Leaf=3]="Leaf",r[r.Pruned=4]="Pruned"})(ut||(ut={}));function Qf(r,e){const t=new Uint8Array(r),n=new Uint8Array(e);for(let i=0;i<t.length;i++)if(t[i]>n[i])return!0;return!1}class Vr{constructor(e,t,n,i,c=5,l=!1){this._rootKey=t,this._canisterId=n,this._blsVerify=i,this._maxAgeInMinutes=c,En.set(this,!1),Xf(this,En,l,"f"),this.cert=Mt(new Uint8Array(e))}static async create(e){const t=Vr.createUnverified(e);return await t.verify(),t}static createUnverified(e){let t=e.blsVerify;return t||(t=Kf),new Vr(e.certificate,e.rootKey,e.canisterId,t,e.maxAgeInMinutes,e.disableTimeVerification)}lookup(e){return Tr(e,this.cert.tree)}lookup_label(e){return this.lookup([e])}async verify(){const e=await _n(this.cert.tree),t=await this._checkDelegationAndGetKey(this.cert.delegation),n=this.cert.signature,i=t0(t),c=bt(Pr("ic-state-root"),e);let l=!1;const u=Pi(this.lookup(["time"]));if(!u)throw new Tt("Certificate does not contain a time");if(!Jf(this,En,"f")){const E=this._maxAgeInMinutes*60*1e3,I=Date.now(),T=I-E,U=I+3e5,v=Xi(u);if(v.getTime()<T)throw new Tt(`Certificate is signed more than ${this._maxAgeInMinutes} minutes in the past. Certificate time: `+v.toISOString()+" Current time: "+new Date(I).toISOString());if(v.getTime()>U)throw new Tt("Certificate is signed more than 5 minutes in the future. Certificate time: "+v.toISOString()+" Current time: "+new Date(I).toISOString())}try{l=await this._blsVerify(new Uint8Array(i),new Uint8Array(n),new Uint8Array(c))}catch{l=!1}if(!l)throw new Tt("Signature verification failed")}async _checkDelegationAndGetKey(e){if(!e)return this._rootKey;const t=await Vr.createUnverified({certificate:e.certificate,rootKey:this._rootKey,canisterId:this._canisterId,blsVerify:this._blsVerify,maxAgeInMinutes:1/0});if(t.cert.delegation)throw new Tt("Delegation certificates cannot be nested");if(await t.verify(),this._canisterId.toString()!==A0&&!_a({canisterId:this._canisterId,subnetId:Le.fromUint8Array(new Uint8Array(e.subnet_id)),tree:t.cert.tree}))throw new Tt(`Canister ${this._canisterId} not in range of delegations for subnet 0x${ct(e.subnet_id)}`);const n=Pi(t.lookup(["subnet",e.subnet_id,"public_key"]));if(!n)throw new Error(`Could not find subnet key for subnet 0x${ct(e.subnet_id)}`);return n}}En=new WeakMap;const Rr=Mn("308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100"),e0=96;function t0(r){const e=Rr.byteLength+e0;if(r.byteLength!==e)throw new TypeError(`BLS DER-encoded public key must be ${e} bytes long`);const t=r.slice(0,Rr.byteLength);if(!zn(t,Rr))throw new TypeError(`BLS DER-encoded public key is invalid. Expect the following prefix: ${Rr}, but get ${t}`);return r.slice(Rr.byteLength)}function Pi(r){if(r.status===He.Found){if(r.value instanceof ArrayBuffer)return r.value;if(r.value instanceof Uint8Array)return r.value.buffer}}async function _n(r){switch(r[0]){case ut.Empty:return mt(Pr("ic-hashtree-empty"));case ut.Pruned:return r[1];case ut.Leaf:return mt(bt(Pr("ic-hashtree-leaf"),r[1]));case ut.Labeled:return mt(bt(Pr("ic-hashtree-labeled"),r[1],await _n(r[2])));case ut.Fork:return mt(bt(Pr("ic-hashtree-fork"),await _n(r[1]),await _n(r[2])));default:throw new Error("unreachable")}}function Pr(r){const e=new Uint8Array([r.length]),t=new TextEncoder().encode(r);return bt(e,t)}var He;(function(r){r.Unknown="unknown",r.Absent="absent",r.Found="found"})(He||(He={}));var Lt;(function(r){r.Less="less",r.Greater="greater"})(Lt||(Lt={}));function Tr(r,e){if(r.length===0)switch(e[0]){case ut.Leaf:{if(!e[1])throw new Error("Invalid tree structure for leaf");return e[1]instanceof ArrayBuffer?{status:He.Found,value:e[1]}:e[1]instanceof Uint8Array?{status:He.Found,value:e[1].buffer}:{status:He.Found,value:e[1]}}default:return{status:He.Found,value:e}}const t=typeof r[0]=="string"?new TextEncoder().encode(r[0]):r[0],n=Bn(t,e);switch(n.status){case He.Found:return Tr(r.slice(1),n.value);case Lt.Greater:case Lt.Less:return{status:He.Absent};default:return n}}function Mi(r){switch(r[0]){case ut.Empty:return[];case ut.Fork:return Mi(r[1]).concat(Mi(r[2]));default:return[r]}}function Bn(r,e){switch(e[0]){case ut.Labeled:return Qf(r,e[1])?{status:Lt.Greater}:zn(r,e[1])?{status:He.Found,value:e[2]}:{status:Lt.Less};case ut.Fork:const t=Bn(r,e[1]);switch(t.status){case Lt.Greater:{const n=Bn(r,e[2]);return n.status===Lt.Less?{status:He.Absent}:n}case He.Unknown:{let n=Bn(r,e[2]);return n.status===Lt.Less?{status:He.Unknown}:n}default:return t}case ut.Pruned:return{status:He.Unknown};default:return{status:He.Absent}}}function _a(r){const{canisterId:e,subnetId:t,tree:n}=r,i=Tr(["subnet",t.toUint8Array(),"canister_ranges"],n);if(i.status!==He.Found||!(i.value instanceof ArrayBuffer))throw new Error(`Could not find canister ranges for subnet ${t}`);return Mt(i.value).map(y=>[Le.fromUint8Array(y[0]),Le.fromUint8Array(y[1])]).some(y=>y[0].ltEq(e)&&y[1].gtEq(e))}class r0{constructor(e,t,n){this.key=e,this.path=t,this.decodeStrategy=n}}const Ba=async r=>{const{agent:e,paths:t}=r,n=Le.from(r.canisterId),i=[...new Set(t)],c=i.map(y=>ki(y,n)),l=new Map,u=i.map((y,E)=>(async()=>{var I;try{const T=await e.readState(n,{paths:[c[E]]});if(e.rootKey==null)throw new Error("Agent is missing root key");const U=await Vr.create({certificate:T.certificate,rootKey:e.rootKey,canisterId:n,disableTimeVerification:!0}),v=(k,z)=>{if(z==="subnet"){if(e.rootKey==null)throw new Error("Agent is missing root key");const j=Ia(T.certificate,n,e.rootKey);return{path:z,data:j}}else return{path:z,data:Pi(k.lookup(ki(z,n)))}},{path:w,data:C}=v(U,i[E]);if(!C)console.warn(`Expected to find result for path ${w}, but instead found nothing.`),typeof w=="string"?l.set(w,null):l.set(w.key,null);else switch(w){case"time":{l.set(w,Xi(C));break}case"controllers":{l.set(w,i0(C));break}case"module_hash":{l.set(w,Fs(C));break}case"subnet":{l.set(w,C);break}case"candid":{l.set(w,new TextDecoder().decode(C));break}default:if(typeof w!="string"&&"key"in w&&"path"in w)switch(w.decodeStrategy){case"raw":l.set(w.key,C);break;case"leb128":{l.set(w.key,Ea(C));break}case"cbor":{l.set(w.key,Aa(C));break}case"hex":{l.set(w.key,Fs(C));break}case"utf-8":l.set(w.key,n0(C))}}}catch(T){if(!((I=T==null?void 0:T.message)===null||I===void 0)&&I.includes("Invalid certificate"))throw new Ve(T.message);typeof y!="string"&&"key"in y&&"path"in y?l.set(y.key,null):l.set(y,null),console.group(),console.warn(`Expected to find result for path ${y}, but instead found nothing.`),console.warn(T),console.groupEnd()}})());return await Promise.all(u),l},Ia=(r,e,t)=>{if(!e._isPrincipal)throw new Error("Invalid canisterId");const n=Mt(new Uint8Array(r)),i=n.tree;let c=n.delegation,l;if(c&&c.subnet_id?l=Le.fromUint8Array(new Uint8Array(c.subnet_id)):!c&&typeof t<"u"?(l=Le.selfAuthenticating(new Uint8Array(t)),c={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}):(l=Le.selfAuthenticating(Le.fromText("tdb26-jop6k-aogll-7ltgs-eruif-6kk7m-qpktf-gdiqx-mxtrf-vb5e6-eqe").toUint8Array()),c={subnet_id:l.toUint8Array(),certificate:new ArrayBuffer(0)}),!_a({canisterId:e,subnetId:l,tree:i}))throw new Error("Canister not in range");const y=Tr(["subnet",c.subnet_id,"node"],i);if(y.status!==He.Found)throw new Error("Node not found");if(y.value instanceof ArrayBuffer)throw new Error("Invalid node tree");const E=Mi(y.value),I=new Map;return E.forEach(T=>{const U=Le.from(new Uint8Array(T[1])).toText(),v=Tr(["public_key"],T[2]);if(v.status!==He.Found)throw new Error("Public key not found");const w=v.value;if(w.byteLength!==44)throw new Error("Invalid public key length");I.set(U,w)}),{subnetId:Le.fromUint8Array(new Uint8Array(c.subnet_id)).toText(),nodeKeys:I}},ki=(r,e)=>{const t=new TextEncoder,n=c=>new DataView(t.encode(c).buffer).buffer,i=new DataView(e.toUint8Array().buffer).buffer;switch(r){case"time":return[n("time")];case"controllers":return[n("canister"),i,n("controllers")];case"module_hash":return[n("canister"),i,n("module_hash")];case"subnet":return[n("subnet")];case"candid":return[n("canister"),i,n("metadata"),n("candid:service")];default:if("key"in r&&"path"in r)if(typeof r.path=="string"||r.path instanceof ArrayBuffer){const c=r.path,l=typeof c=="string"?n(c):c;return[n("canister"),i,n("metadata"),l]}else return r.path}throw new Error(`An unexpeected error was encountered while encoding your path for canister status. Please ensure that your path, ${r} was formatted correctly.`)},Fs=r=>ct(r),Aa=r=>Mt(r),n0=r=>new TextDecoder().decode(r),i0=r=>Aa(r).map(t=>Le.fromUint8Array(new Uint8Array(t))),s0=Object.freeze(Object.defineProperty({__proto__:null,CustomPath:r0,encodePath:ki,fetchNodeKeys:Ia,request:Ba},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bt=BigInt(0),it=BigInt(1),Rs=BigInt(2),o0=BigInt(8),a0={zip215:!0};function c0(r){const e=ba(r);return en(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function u0(r){const e=c0(r),{Fp:t,n,prehash:i,hash:c,randomBytes:l,nByteLength:u,h:y}=e,E=Rs<<BigInt(u*8)-it,I=t.create,T=tn(e.n,e.nBitLength),U=e.uvRatio||((Z,G)=>{try{return{isValid:!0,value:t.sqrt(Z*t.inv(G))}}catch{return{isValid:!1,value:Bt}}}),v=e.adjustScalarBytes||(Z=>Z),w=e.domain||((Z,G,ee)=>{if(Dr("phflag",ee),G.length||ee)throw new Error("Contexts/pre-hash are not supported");return Z});function C(Z,G,ee=!1){const le=ee?it:Bt;Yt("coordinate "+Z,G,le,E)}function k(Z){if(!(Z instanceof q))throw new Error("ExtendedPoint expected")}const z=jr((Z,G)=>{const{ex:ee,ey:le,ez:oe}=Z,fe=Z.is0();G==null&&(G=fe?o0:t.inv(oe));const Q=I(ee*G),g=I(le*G),ne=I(oe*G);if(fe)return{x:Bt,y:it};if(ne!==it)throw new Error("invZ was invalid");return{x:Q,y:g}}),j=jr(Z=>{const{a:G,d:ee}=e;if(Z.is0())throw new Error("bad point: ZERO");const{ex:le,ey:oe,ez:fe,et:Q}=Z,g=I(le*le),ne=I(oe*oe),ue=I(fe*fe),de=I(ue*ue),te=I(g*G),ae=I(ue*I(te+ne)),m=I(de+I(ee*I(g*ne)));if(ae!==m)throw new Error("bad point: equation left != right (1)");const x=I(le*oe),B=I(fe*Q);if(x!==B)throw new Error("bad point: equation left != right (2)");return!0});class q{constructor(G,ee,le,oe){C("x",G),C("y",ee),C("z",le,!0),C("t",oe),this.ex=G,this.ey=ee,this.ez=le,this.et=oe,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(G){if(G instanceof q)throw new Error("extended point not allowed");const{x:ee,y:le}=G||{};return C("x",ee),C("y",le),new q(ee,le,it,I(ee*le))}static normalizeZ(G){const ee=t.invertBatch(G.map(le=>le.ez));return G.map((le,oe)=>le.toAffine(ee[oe])).map(q.fromAffine)}static msm(G,ee){return ma(q,T,G,ee)}_setWindowSize(G){W.setWindowSize(this,G)}assertValidity(){j(this)}equals(G){k(G);const{ex:ee,ey:le,ez:oe}=this,{ex:fe,ey:Q,ez:g}=G,ne=I(ee*g),ue=I(fe*oe),de=I(le*g),te=I(Q*oe);return ne===ue&&de===te}is0(){return this.equals(q.ZERO)}negate(){return new q(I(-this.ex),this.ey,this.ez,I(-this.et))}double(){const{a:G}=e,{ex:ee,ey:le,ez:oe}=this,fe=I(ee*ee),Q=I(le*le),g=I(Rs*I(oe*oe)),ne=I(G*fe),ue=ee+le,de=I(I(ue*ue)-fe-Q),te=ne+Q,ae=te-g,m=ne-Q,x=I(de*ae),B=I(te*m),R=I(de*m),F=I(ae*te);return new q(x,B,F,R)}add(G){k(G);const{a:ee,d:le}=e,{ex:oe,ey:fe,ez:Q,et:g}=this,{ex:ne,ey:ue,ez:de,et:te}=G,ae=I(oe*ne),m=I(fe*ue),x=I(g*le*te),B=I(Q*de),R=I((oe+fe)*(ne+ue)-ae-m),F=B-x,P=B+x,h=I(m-ee*ae),s=I(R*F),o=I(P*h),p=I(R*h),b=I(F*P);return new q(s,o,b,p)}subtract(G){return this.add(G.negate())}wNAF(G){return W.wNAFCached(this,G,q.normalizeZ)}multiply(G){const ee=G;Yt("scalar",ee,it,n);const{p:le,f:oe}=this.wNAF(ee);return q.normalizeZ([le,oe])[0]}multiplyUnsafe(G,ee=q.ZERO){const le=G;return Yt("scalar",le,Bt,n),le===Bt?M:this.is0()||le===it?this:W.wNAFCachedUnsafe(this,le,q.normalizeZ,ee)}isSmallOrder(){return this.multiplyUnsafe(y).is0()}isTorsionFree(){return W.unsafeLadder(this,n).is0()}toAffine(G){return z(this,G)}clearCofactor(){const{h:G}=e;return G===it?this:this.multiplyUnsafe(G)}static fromHex(G,ee=!1){const{d:le,a:oe}=e,fe=t.BYTES;G=at("pointHex",G,fe),Dr("zip215",ee);const Q=G.slice(),g=G[fe-1];Q[fe-1]=g&-129;const ne=qr(Q),ue=ee?E:t.ORDER;Yt("pointHex.y",ne,Bt,ue);const de=I(ne*ne),te=I(de-it),ae=I(le*de-oe);let{isValid:m,value:x}=U(te,ae);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const B=(x&it)===it,R=(g&128)!==0;if(!ee&&x===Bt&&R)throw new Error("Point.fromHex: x=0 and x_0=1");return R!==B&&(x=I(-x)),q.fromAffine({x,y:ne})}static fromPrivateKey(G){const{scalar:ee}=re(G);return ie.multiply(ee)}toRawBytes(){const{x:G,y:ee}=this.toAffine(),le=qn(ee,t.BYTES);return le[le.length-1]|=G&it?128:0,le}toHex(){return fr(this.toRawBytes())}}q.BASE=new q(e.Gx,e.Gy,it,I(e.Gx*e.Gy)),q.ZERO=new q(Bt,it,it,Bt);const{BASE:ie,ZERO:M}=q,W=ga(q,u*8);function Y(Z){return ke(Z,n)}function J(Z){return Y(qr(Z))}function re(Z){const G=t.BYTES;Z=at("private key",Z,G);const ee=at("hashed private key",c(Z),2*G),le=v(ee.slice(0,G)),oe=ee.slice(G,2*G),fe=J(le);return{head:le,prefix:oe,scalar:fe}}function K(Z){const{head:G,prefix:ee,scalar:le}=re(Z),oe=ie.multiply(le),fe=oe.toRawBytes();return{head:G,prefix:ee,scalar:le,point:oe,pointBytes:fe}}function ye(Z){return K(Z).pointBytes}function he(Z=new Uint8Array,...G){const ee=Ge(...G);return J(c(w(ee,at("context",Z),!!i)))}function S(Z,G,ee={}){Z=at("message",Z),i&&(Z=i(Z));const{prefix:le,scalar:oe,pointBytes:fe}=K(G),Q=he(ee.context,le,Z),g=ie.multiply(Q).toRawBytes(),ne=he(ee.context,g,fe,Z),ue=Y(Q+ne*oe);Yt("signature.s",ue,Bt,n);const de=Ge(g,qn(ue,t.BYTES));return at("result",de,t.BYTES*2)}const L=a0;function V(Z,G,ee,le=L){const{context:oe,zip215:fe}=le,Q=t.BYTES;Z=at("signature",Z,2*Q),G=at("message",G),ee=at("publicKey",ee,Q),fe!==void 0&&Dr("zip215",fe),i&&(G=i(G));const g=qr(Z.slice(Q,2*Q));let ne,ue,de;try{ne=q.fromHex(ee,fe),ue=q.fromHex(Z.slice(0,Q),fe),de=ie.multiplyUnsafe(g)}catch{return!1}if(!fe&&ne.isSmallOrder())return!1;const te=he(oe,ue.toRawBytes(),ne.toRawBytes(),G);return ue.add(ne.multiplyUnsafe(te)).subtract(de).clearCofactor().equals(q.ZERO)}return ie._setWindowSize(8),{CURVE:e,getPublicKey:ye,sign:S,verify:V,ExtendedPoint:q,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>l(t.BYTES),precompute(Z=8,G=q.BASE){return G._setWindowSize(Z),G.multiply(BigInt(3)),G}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ji=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Os=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const f0=BigInt(1),Ls=BigInt(2);BigInt(3);const l0=BigInt(5),h0=BigInt(8);function d0(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),c=Ji,u=r*r%c*r%c,y=_t(u,Ls,c)*u%c,E=_t(y,f0,c)*r%c,I=_t(E,l0,c)*E%c,T=_t(I,e,c)*I%c,U=_t(T,t,c)*T%c,v=_t(U,n,c)*U%c,w=_t(v,i,c)*v%c,C=_t(w,i,c)*v%c,k=_t(C,e,c)*I%c;return{pow_p_5_8:_t(k,Ls,c)*r%c,b2:u}}function p0(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function y0(r,e){const t=Ji,n=ke(e*e*e,t),i=ke(n*n*e,t),c=d0(r*i).pow_p_5_8;let l=ke(r*n*c,t);const u=ke(e*l*l,t),y=l,E=ke(l*Os,t),I=u===r,T=u===ke(-r,t),U=u===ke(-r*Os,t);return I&&(l=y),(T||U)&&(l=E),Sf(l,t)&&(l=ke(-l,t)),{isValid:I||T,value:l}}const Ps=(()=>tn(Ji,void 0,!0))(),w0=(()=>({a:Ps.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ps,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:h0,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:mf,randomBytes:Ys,adjustScalarBytes:p0,uvRatio:y0}))(),g0=(()=>u0(w0))();var Ms=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},st=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},et,Mr,Sa,va;class m0{constructor(e={}){et.set(this,void 0),Mr.set(this,void 0),this[Sa]=this.entries.bind(this),this[va]="ExpirableMap";const{source:t=[],expirationTime:n=10*60*1e3}=e,i=Date.now();Ms(this,et,new Map([...t].map(([c,l])=>[c,{value:l,timestamp:i}])),"f"),Ms(this,Mr,n,"f")}prune(){const e=Date.now();for(const[t,n]of st(this,et,"f").entries())e-n.timestamp>st(this,Mr,"f")&&st(this,et,"f").delete(t);return this}set(e,t){this.prune();const n={value:t,timestamp:Date.now()};return st(this,et,"f").set(e,n),this}get(e){const t=st(this,et,"f").get(e);if(t!==void 0){if(Date.now()-t.timestamp>st(this,Mr,"f")){st(this,et,"f").delete(e);return}return t.value}}clear(){st(this,et,"f").clear()}entries(){const e=st(this,et,"f").entries();return function*(){for(const[n,i]of e)yield[n,i.value]}()}values(){const e=st(this,et,"f").values();return function*(){for(const n of e)yield n.value}()}keys(){return st(this,et,"f").keys()}forEach(e,t){for(const[n,i]of st(this,et,"f").entries())e.call(t,i.value,n,this)}has(e){return st(this,et,"f").has(e)}delete(e){return st(this,et,"f").delete(e)}get size(){return st(this,et,"f").size}}et=new WeakMap,Mr=new WeakMap,Sa=Symbol.iterator,va=Symbol.toStringTag;const ks=r=>{if(r<=127)return 1;if(r<=255)return 2;if(r<=65535)return 3;if(r<=16777215)return 4;throw new Error("Length too long (> 4 bytes)")},Cs=(r,e,t)=>{if(t<=127)return r[e]=t,1;if(t<=255)return r[e]=129,r[e+1]=t,2;if(t<=65535)return r[e]=130,r[e+1]=t>>8,r[e+2]=t,3;if(t<=16777215)return r[e]=131,r[e+1]=t>>16,r[e+2]=t>>8,r[e+3]=t,4;throw new Error("Length too long (> 4 bytes)")},Ci=(r,e)=>{if(r[e]<128)return 1;if(r[e]===128)throw new Error("Invalid length 0");if(r[e]===129)return 2;if(r[e]===130)return 3;if(r[e]===131)return 4;throw new Error("Length too long (> 4 bytes)")},b0=(r,e)=>{const t=Ci(r,e);if(t===1)return r[e];if(t===2)return r[e+1];if(t===3)return(r[e+1]<<8)+r[e+2];if(t===4)return(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];throw new Error("Length too long (> 4 bytes)")};Uint8Array.from([48,12,6,10,43,6,1,4,1,131,184,67,1,1]);const $s=Uint8Array.from([48,5,6,3,43,101,112]);Uint8Array.from([48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,10]);function x0(r,e){const t=2+ks(r.byteLength+1),n=e.byteLength+t+r.byteLength;let i=0;const c=new Uint8Array(1+ks(n)+n);return c[i++]=48,i+=Cs(c,i,n),c.set(e,i),i+=e.byteLength,c[i++]=3,i+=Cs(c,i,r.byteLength+1),c[i++]=0,c.set(new Uint8Array(r),i),c}const E0=(r,e)=>{let t=0;const n=(u,y)=>{if(i[t++]!==u)throw new Error("Expected: "+y)},i=new Uint8Array(r);if(n(48,"sequence"),t+=Ci(i,t),!zn(i.slice(t,t+e.byteLength),e))throw new Error("Not the expected OID.");t+=e.byteLength,n(3,"bit string");const c=b0(i,t)-1;t+=Ci(i,t),n(0,"0 padding");const l=i.slice(t);if(c!==l.length)throw new Error(`DER payload mismatch: Expected length ${c} actual length ${l.length}`);return l};var Ds=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},qs=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},In,An;class sr{constructor(e){if(In.set(this,void 0),An.set(this,void 0),e.byteLength!==sr.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");Ds(this,In,e,"f"),Ds(this,An,sr.derEncode(e),"f")}static from(e){return this.fromDer(e.toDer())}static fromRaw(e){return new sr(e)}static fromDer(e){return new sr(this.derDecode(e))}static derEncode(e){return x0(e,$s).buffer}static derDecode(e){const t=E0(e,$s);if(t.length!==this.RAW_KEY_LENGTH)throw new Error("An Ed25519 public key must be exactly 32bytes long");return t}get rawKey(){return qs(this,In,"f")}get derKey(){return qs(this,An,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}In=new WeakMap,An=new WeakMap;sr.RAW_KEY_LENGTH=32;class _0{constructor(){this.observers=[]}subscribe(e){this.observers.push(e)}unsubscribe(e){this.observers=this.observers.filter(t=>t!==e)}notify(e,...t){this.observers.forEach(n=>n(e,...t))}}class B0 extends _0{constructor(){super()}print(e,...t){this.notify({message:e,level:"info"},...t)}warn(e,...t){this.notify({message:e,level:"warn"},...t)}error(e,t,...n){this.notify({message:e,level:"error",error:t},...n)}}var It=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Qe=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},At,Sn,vn,Tn,Nn,Un,Fn,Rn,wr;const Ta=.5,Na=1.5,Ua=500,Fa=6e4,Ra=9e5,Oa=10;class ti{constructor(e=ti.default){At.set(this,void 0),Sn.set(this,void 0),vn.set(this,void 0),Tn.set(this,void 0),Nn.set(this,void 0),Un.set(this,void 0),Fn.set(this,void 0),Rn.set(this,void 0),wr.set(this,0);const{initialInterval:t=Ua,randomizationFactor:n=Ta,multiplier:i=Na,maxInterval:c=Fa,maxElapsedTime:l=Ra,maxIterations:u=Oa,date:y=Date}=e;It(this,At,t,"f"),It(this,Sn,n,"f"),It(this,vn,i,"f"),It(this,Tn,c,"f"),It(this,Rn,y,"f"),It(this,Nn,y.now(),"f"),It(this,Un,l,"f"),It(this,Fn,u,"f")}get ellapsedTimeInMsec(){return Qe(this,Rn,"f").now()-Qe(this,Nn,"f")}get currentInterval(){return Qe(this,At,"f")}get count(){return Qe(this,wr,"f")}get randomValueFromInterval(){const e=Qe(this,Sn,"f")*Qe(this,At,"f"),t=Qe(this,At,"f")-e,n=Qe(this,At,"f")+e;return Math.random()*(n-t)+t}incrementCurrentInterval(){var e;return It(this,At,Math.min(Qe(this,At,"f")*Qe(this,vn,"f"),Qe(this,Tn,"f")),"f"),It(this,wr,(e=Qe(this,wr,"f"),e++,e),"f"),Qe(this,At,"f")}next(){return this.ellapsedTimeInMsec>=Qe(this,Un,"f")||Qe(this,wr,"f")>=Qe(this,Fn,"f")?null:(this.incrementCurrentInterval(),this.randomValueFromInterval)}}At=new WeakMap,Sn=new WeakMap,vn=new WeakMap,Tn=new WeakMap,Nn=new WeakMap,Un=new WeakMap,Fn=new WeakMap,Rn=new WeakMap,wr=new WeakMap;ti.default={initialInterval:Ua,randomizationFactor:Ta,multiplier:Na,maxInterval:Fa,maxElapsedTime:Ra,maxIterations:Oa,date:Date};var Xe=globalThis&&globalThis.__classPrivateFieldSet||function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ce=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},tt,Jt,Ir,St,Rt,_r,kr,gr,yt,wt,Qt,er,Cr,mr,br,tr,ir,La,On,Ln,rr,Gs;(function(r){r.Received="received",r.Processing="processing",r.Replied="replied",r.Rejected="rejected",r.Unknown="unknown",r.Done="done"})(Gs||(Gs={}));const dn=60*1e3,I0="308182301d060d2b0601040182dc7c0503010201060c2b0601040182dc7c05030201036100814c0e6ec71fab583b08bd81373c255c3c371b2e84863c98a4f1e08b74235d14fb5d9c0cd546d9685f913a0c0b2cc5341583bf4b4392e467db96d65b9bb4cb717112f8472e0d5a4d14505ffd7484b01291091c5f87b98883463f98091a0baaae",A0="aaaaa-aa",S0="ic0.app",v0=".ic0.app",T0="icp0.io",N0=".icp0.io",U0="icp-api.io",F0=".icp-api.io";class mi extends Ve{constructor(e){super(e),this.message=e}}class pn extends Ve{constructor(e){super(e),this.message=e}}function R0(){let r;if(typeof window<"u")if(window.fetch)r=window.fetch.bind(window);else throw new mi("Fetch implementation was not available. You appear to be in a browser context, but window.fetch was not present.");else if(typeof global<"u")if(global.fetch)r=global.fetch.bind(global);else throw new mi("Fetch implementation was not available. You appear to be in a Node.js context, but global.fetch was not available.");else typeof self<"u"&&self.fetch&&(r=self.fetch.bind(self));if(r)return r;throw new mi("Fetch implementation was not available. Please provide fetch to the HttpAgent constructor, or ensure it is available in the window or global context.")}function O0(r){let e;if(r!==void 0)!r.match(/^[a-z]+:/)&&typeof window<"u"?e=new URL(window.location.protocol+"//"+r):e=new URL(r);else{const t=["ic0.app","icp0.io","127.0.0.1","localhost"],n=[".github.dev",".gitpod.io"],i=typeof window<"u"?window.location:void 0,c=i==null?void 0:i.hostname;let l;c&&typeof c=="string"&&(n.some(u=>c.endsWith(u))?l=c:l=t.find(u=>c.endsWith(u))),i&&l?e=new URL(`${i.protocol}//${l}${i.port?":"+i.port:""}`):e=new URL("https://icp-api.io")}return e.toString()}class $r{constructor(e={}){var t,n;tt.add(this),Jt.set(this,null),Ir.set(this,!1),St.set(this,void 0),Rt.set(this,void 0),_r.set(this,void 0),kr.set(this,void 0),gr.set(this,0),yt.set(this,void 0),wt.set(this,void 0),Qt.set(this,void 0),er.set(this,void 0),this._isAgent=!0,this.config={},Cr.set(this,0),this.log=new B0,mr.set(this,[]),br.set(this,[]),tr.set(this,new m0({expirationTime:5*60*1e3})),ir.set(this,!0),Ln.set(this,(l,u)=>{if(ce(this,ir,"f")===!1)return l;if(!u)throw new Tt("Invalid signature from replica signed query: no matching node key found.");const{status:y,signatures:E=[],requestId:I}=l,T=Or(new TextEncoder().encode("\vic-response"));for(const U of E){const{timestamp:v,identity:w}=U,C=Le.fromUint8Array(w).toText();let k;if(y==="replied"){const{reply:M}=l;k=$n({status:y,reply:M,timestamp:BigInt(v),request_id:I})}else if(y==="rejected"){const{reject_code:M,reject_message:W,error_code:Y}=l;k=$n({status:y,reject_code:M,reject_message:W,error_code:Y,timestamp:BigInt(v),request_id:I})}else throw new Error(`Unknown status: ${y}`);const z=bt(T,Or(new Uint8Array(k))),j=u==null?void 0:u.nodeKeys.get(C);if(!j)throw new Tt("Invalid signature from replica signed query: no matching node key found.");const q=sr.fromDer(j).rawKey;if(g0.verify(U.signature,new Uint8Array(z),new Uint8Array(q)))return l;throw new Tt(`Invalid signature from replica ${C} signed query.`)}return l}),this.config=e,Xe(this,Rt,e.fetch||R0()||fetch.bind(global),"f"),Xe(this,_r,e.fetchOptions,"f"),Xe(this,kr,e.callOptions,"f"),Xe(this,Ir,(t=e.shouldFetchRootKey)!==null&&t!==void 0?t:!1,"f"),e.rootKey?this.rootKey=e.rootKey:ce(this,Ir,"f")?this.rootKey=null:this.rootKey=Mn(I0);const i=O0(e.host);this.host=new URL(i),e.verifyQuerySignatures!==void 0&&Xe(this,ir,e.verifyQuerySignatures,"f"),Xe(this,wt,(n=e.retryTimes)!==null&&n!==void 0?n:3,"f");const c=()=>new ti({maxIterations:ce(this,wt,"f")});if(Xe(this,Qt,e.backoffStrategy||c,"f"),this.host.hostname.endsWith(v0)?this.host.hostname=S0:this.host.hostname.endsWith(N0)?this.host.hostname=T0:this.host.hostname.endsWith(F0)&&(this.host.hostname=U0),e.credentials){const{name:l,password:u}=e.credentials;Xe(this,yt,`${l}${u?":"+u:""}`,"f")}if(Xe(this,St,Promise.resolve(e.identity||new fs),"f"),e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes>5)throw new Ve(`The maximum ingress expiry time is 5 minutes. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);if(e.ingressExpiryInMinutes&&e.ingressExpiryInMinutes<=0)throw new Ve(`Ingress expiry time must be greater than 0. Provided ingress expiry time is ${e.ingressExpiryInMinutes} minutes.`);Xe(this,er,e.ingressExpiryInMinutes||5,"f"),this.addTransform("update",ds(Ui)),e.useQueryNonces&&this.addTransform("query",ds(Ui)),e.logToConsole&&this.log.subscribe(l=>{l.level==="error"?console.error(l.message):l.level==="warn"?console.warn(l.message):console.log(l.message)})}get waterMark(){return ce(this,Cr,"f")}static createSync(e={}){return new this(Object.assign({},e))}static async create(e={shouldFetchRootKey:!1}){const t=$r.createSync(e),n=[t.syncTime()];return t.host.toString()!=="https://icp-api.io"&&e.shouldFetchRootKey&&n.push(t.fetchRootKey()),await Promise.all(n),t}static async from(e){var t;try{return"config"in e?await $r.create(e.config):await $r.create({fetch:e._fetch,fetchOptions:e._fetchOptions,callOptions:e._callOptions,host:e._host.toString(),identity:(t=e._identity)!==null&&t!==void 0?t:void 0})}catch{throw new Ve("Failed to create agent from provided agent")}}isLocal(){const e=this.host.hostname;return e==="127.0.0.1"||e.endsWith("127.0.0.1")}addTransform(e,t,n=t.priority||0){if(e==="update"){const i=ce(this,br,"f").findIndex(c=>(c.priority||0)<n);ce(this,br,"f").splice(i>=0?i:ce(this,br,"f").length,0,Object.assign(t,{priority:n}))}else if(e==="query"){const i=ce(this,mr,"f").findIndex(c=>(c.priority||0)<n);ce(this,mr,"f").splice(i>=0?i:ce(this,mr,"f").length,0,Object.assign(t,{priority:n}))}}async getPrincipal(){if(!ce(this,St,"f"))throw new pn("This identity has expired due this application's security policy. Please refresh your authentication.");return(await ce(this,St,"f")).getPrincipal()}async call(e,t,n){var i,c;await ce(this,tt,"m",rr).call(this);const l=(i=t.callSync)!==null&&i!==void 0?i:!0,u=await(n!==void 0?await n:await ce(this,St,"f"));if(!u)throw new pn("This identity has expired due this application's security policy. Please refresh your authentication.");const y=Le.from(e),E=t.effectiveCanisterId?Le.from(t.effectiveCanisterId):y,I=u.getPrincipal()||Le.anonymous();let T=new cn(ce(this,er,"f")*dn);Math.abs(ce(this,gr,"f"))>1e3*30&&(T=new cn(ce(this,er,"f")*dn+ce(this,gr,"f")));const U={request_type:Ni.Call,canister_id:y,method_name:t.methodName,arg:t.arg,sender:I,ingress_expiry:T};let v=await this._transform({request:{body:null,method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,yt,"f")?{Authorization:"Basic "+btoa(ce(this,yt,"f"))}:{})},endpoint:"call",body:U}),w;t!=null&&t.nonce?w=C(t.nonce):v.body.nonce?w=C(v.body.nonce):w=void 0,U.nonce=w;function C(q){return new Uint8Array(q)}v=await u.transformRequest(v);const k=ci(v.body),z=ce(this,Qt,"f").call(this),j=vi(U);try{const q=()=>(this.log.print(`fetching "/api/v3/canister/${E.toText()}/call" with request:`,v),ce(this,Rt,"f").call(this,""+new URL(`/api/v3/canister/${E.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,kr,"f")),v.request),{body:k}))),ie=()=>(this.log.print(`fetching "/api/v2/canister/${E.toText()}/call" with request:`,v),ce(this,Rt,"f").call(this,""+new URL(`/api/v2/canister/${E.toText()}/call`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,kr,"f")),v.request),{body:k}))),W=await ce(this,tt,"m",On).call(this,{request:l?q:ie,backoff:z,tries:0}),Y=await W.arrayBuffer(),J=W.status===200&&Y.byteLength>0?Mt(Y):null;if(J&&"certificate"in J){const re=await this.parseTimeFromResponse({certificate:J.certificate});Xe(this,Cr,re,"f")}return{requestId:j,response:{ok:W.ok,status:W.status,statusText:W.statusText,body:J,headers:Lr(W.headers)},requestDetails:U}}catch(q){if(q.message.includes("v3 api not supported."))return this.log.warn("v3 api not supported. Fall back to v2"),this.call(e,Object.assign(Object.assign({},t),{callSync:!1}),n);const ie=`Error while making call: ${(c=q.message)!==null&&c!==void 0?c:String(q)}`,M=new Hu(ie,q,ct(j),ct(v.body.sender_pubkey),ct(v.body.sender_sig),String(v.body.content.ingress_expiry._value));throw this.log.error(ie,M),M}}async query(e,t,n){var i,c,l,u;await ce(this,tt,"m",rr).call(this);const y=ce(this,Qt,"f").call(this),E=t.effectiveCanisterId?Le.from(t.effectiveCanisterId):Le.from(e);this.log.print(`ecid ${E.toString()}`),this.log.print(`canisterId ${e.toString()}`);let I,T;const U=await(n!==void 0?n:ce(this,St,"f"));if(!U)throw new pn("This identity has expired due this application's security policy. Please refresh your authentication.");const v=Le.from(e),w=(U==null?void 0:U.getPrincipal())||Le.anonymous(),C={request_type:"query",canister_id:v,method_name:t.methodName,arg:t.arg,sender:w,ingress_expiry:new cn(ce(this,er,"f")*dn)},k=vi(C);I=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,yt,"f")?{Authorization:"Basic "+btoa(ce(this,yt,"f"))}:{})},endpoint:"read",body:C}),I=await(U==null?void 0:U.transformRequest(I));const z=ci(I.body),j={canister:v.toText(),ecid:E,transformedRequest:I,body:z,requestId:k,backoff:y,tries:0},q=async()=>({requestDetails:C,query:await ce(this,tt,"m",La).call(this,j)}),ie=async()=>{if(!ce(this,ir,"f"))return;const M=ce(this,tr,"f").get(E.toString());return M||(await this.fetchSubnetKeys(E.toString()),ce(this,tr,"f").get(E.toString()))};try{const[M,W]=await Promise.all([q(),ie()]);T=M;const{requestDetails:Y,query:J}=T,re=Object.assign(Object.assign({},J),{requestDetails:Y});if(this.log.print("Query response:",re),!ce(this,ir,"f"))return re;try{return ce(this,Ln,"f").call(this,re,W)}catch{this.log.warn("Query response verification failed. Retrying with fresh subnet keys."),ce(this,tr,"f").delete(e.toString()),await this.fetchSubnetKeys(E.toString());const ye=ce(this,tr,"f").get(e.toString());if(!ye)throw new Tt("Invalid signature from replica signed query: no matching node key found.");return ce(this,Ln,"f").call(this,re,ye)}}catch(M){const W=`Error while making call: ${(i=M.message)!==null&&i!==void 0?i:String(M)}`,Y=new Vu(W,M,String(k),ct((c=I==null?void 0:I.body)===null||c===void 0?void 0:c.sender_pubkey),ct((l=I==null?void 0:I.body)===null||l===void 0?void 0:l.sender_sig),String((u=I==null?void 0:I.body)===null||u===void 0?void 0:u.content.ingress_expiry._value));throw this.log.error(W,Y),Y}}async createReadStateRequest(e,t){await ce(this,tt,"m",rr).call(this);const n=await(t!==void 0?await t:await ce(this,St,"f"));if(!n)throw new pn("This identity has expired due this application's security policy. Please refresh your authentication.");const i=(n==null?void 0:n.getPrincipal())||Le.anonymous(),c=await this._transform({request:{method:"POST",headers:Object.assign({"Content-Type":"application/cbor"},ce(this,yt,"f")?{Authorization:"Basic "+btoa(ce(this,yt,"f"))}:{})},endpoint:"read_state",body:{request_type:"read_state",paths:e.paths,sender:i,ingress_expiry:new cn(ce(this,er,"f")*dn)}});return n==null?void 0:n.transformRequest(c)}async readState(e,t,n,i){var c,l,u,y;function E(C){for(const k of C.paths){const[z,j]=k,q=Or(new TextEncoder().encode("request_status"));if(zn(z,q))return j}}const I=E(t);await ce(this,tt,"m",rr).call(this);const T=typeof e=="string"?Le.fromText(e):e,U=i??await this.createReadStateRequest(t,n),v=ci(U.body);this.log.print(`fetching "/api/v2/canister/${T}/read_state" with request:`,U);const w=ce(this,Qt,"f").call(this);try{const C=await ce(this,tt,"m",On).call(this,{request:()=>ce(this,Rt,"f").call(this,""+new URL(`/api/v2/canister/${T.toString()}/read_state`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,_r,"f")),U.request),{body:v})),backoff:w,tries:0});if(!C.ok)throw new Error(`Server returned an error:
  Code: ${C.status} (${C.statusText})
  Body: ${await C.text()}
`);const k=Mt(await C.arrayBuffer());this.log.print("Read state response:",k);const z=await this.parseTimeFromResponse(k);return z>0&&(this.log.print("Read state response time:",z),Xe(this,Cr,z,"f")),k}catch(C){const k=`Caught exception while attempting to read state: ${(c=C.message)!==null&&c!==void 0?c:String(C)}`,z=new zu(k,C,String(I),ct((l=U==null?void 0:U.body)===null||l===void 0?void 0:l.sender_pubkey),ct((u=U==null?void 0:U.body)===null||u===void 0?void 0:u.sender_sig),String((y=U==null?void 0:U.body)===null||y===void 0?void 0:y.content.ingress_expiry._value));throw this.log.error(k,z),z}}async parseTimeFromResponse(e){let t;if(e.certificate){const n=Mt(e.certificate);if(n&&"tree"in n)t=n.tree;else throw new Error("Could not decode time from response");const i=Tr(["time"],t);if(i.status!==He.Found)throw new Error("Time was not found in the response or was not in its expected format.");if(!(i.value instanceof ArrayBuffer)&&!ArrayBuffer.isView(i))throw new Error("Time was not found in the response or was not in its expected format.");const c=Xi(Or(i.value));return this.log.print("Time from response:",c),this.log.print("Time from response in milliseconds:",Number(c)),Number(c)}else this.log.warn("No certificate found in response");return 0}async syncTime(e){await ce(this,tt,"m",rr).call(this);const t=await hc(()=>Promise.resolve().then(()=>s0),void 0),n=Date.now();try{e||this.log.print("Syncing time with the IC. No canisterId provided, so falling back to ryjl3-tyaaa-aaaaa-aaaba-cai");const i=$r.createSync({identity:new fs,host:this.host.toString(),fetch:ce(this,Rt,"f"),retryTimes:0}),l=(await t.request({canisterId:e??Le.from("ryjl3-tyaaa-aaaaa-aaaba-cai"),agent:i,paths:["time"]})).get("time");l&&(Xe(this,gr,Number(l)-Number(n),"f"),this.log.notify({message:`Syncing time: offset of ${ce(this,gr,"f")}`,level:"info"}))}catch(i){this.log.error("Caught exception while attempting to sync time",i)}}async status(){const e=ce(this,yt,"f")?{Authorization:"Basic "+btoa(ce(this,yt,"f"))}:{};this.log.print('fetching "/api/v2/status"');const t=ce(this,Qt,"f").call(this),n=await ce(this,tt,"m",On).call(this,{backoff:t,request:()=>ce(this,Rt,"f").call(this,""+new URL("/api/v2/status",this.host),Object.assign({headers:e},ce(this,_r,"f"))),tries:0});return Mt(await n.arrayBuffer())}async fetchRootKey(){let e;return ce(this,Jt,"f")?e=await ce(this,Jt,"f"):(Xe(this,Jt,new Promise((t,n)=>{this.status().then(i=>{const c=i.root_key;this.rootKey=c,t(c)}).catch(n)}),"f"),e=await ce(this,Jt,"f")),Xe(this,Jt,null,"f"),e}invalidateIdentity(){Xe(this,St,null,"f")}replaceIdentity(e){Xe(this,St,Promise.resolve(e),"f")}async fetchSubnetKeys(e){await ce(this,tt,"m",rr).call(this);const t=Le.from(e),i=(await Ba({canisterId:t,paths:["subnet"],agent:this})).get("subnet");if(i&&typeof i=="object"&&"nodeKeys"in i)return ce(this,tr,"f").set(t.toText(),i),i}_transform(e){let t=Promise.resolve(e);if(e.endpoint==="call")for(const n of ce(this,br,"f"))t=t.then(i=>n(i).then(c=>c||i));else for(const n of ce(this,mr,"f"))t=t.then(i=>n(i).then(c=>c||i));return t}}Jt=new WeakMap,Ir=new WeakMap,St=new WeakMap,Rt=new WeakMap,_r=new WeakMap,kr=new WeakMap,gr=new WeakMap,yt=new WeakMap,wt=new WeakMap,Qt=new WeakMap,er=new WeakMap,Cr=new WeakMap,mr=new WeakMap,br=new WeakMap,tr=new WeakMap,ir=new WeakMap,Ln=new WeakMap,tt=new WeakSet,La=async function r(e){var t,n;const{ecid:i,transformedRequest:c,body:l,requestId:u,backoff:y,tries:E}=e,I=E===0?0:y.next();if(this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with tries:`,{tries:E,backoff:y,delay:I}),I===null)throw new Ve(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,wt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);I>0&&await new Promise(w=>setTimeout(w,I));let T;try{this.log.print(`fetching "/api/v2/canister/${i.toString()}/query" with request:`,c);const w=await ce(this,Rt,"f").call(this,""+new URL(`/api/v2/canister/${i.toString()}/query`,this.host),Object.assign(Object.assign(Object.assign({},ce(this,_r,"f")),c.request),{body:l}));if(w.status===200){const C=Mt(await w.arrayBuffer());T=Object.assign(Object.assign({},C),{httpDetails:{ok:w.ok,status:w.status,statusText:w.statusText,headers:Lr(w.headers)},requestId:u})}else throw new ui(`Gateway returned an error:
  Code: ${w.status} (${w.statusText})
  Body: ${await w.text()}
`,{ok:w.ok,status:w.status,statusText:w.statusText,headers:Lr(w.headers)})}catch(w){if(E<ce(this,wt,"f"))return this.log.warn(`Caught exception while attempting to make query:
  ${w}
  Retrying query.`),await ce(this,tt,"m",r).call(this,Object.assign(Object.assign({},e),{tries:E+1}));throw w}const U=(n=(t=T.signatures)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.timestamp;if(!ce(this,ir,"f"))return T;if(!U)throw new Error("Timestamp not found in query response. This suggests a malformed or malicious response.");const v=Number(BigInt(U)/BigInt(1e6));if(this.log.print("watermark and timestamp",{waterMark:this.waterMark,timestamp:v}),Number(this.waterMark)>v){const w=new Ve("Timestamp is below the watermark. Retrying query.");if(this.log.error("Timestamp is below",w,{timestamp:U,waterMark:this.waterMark}),E<ce(this,wt,"f"))return await ce(this,tt,"m",r).call(this,Object.assign(Object.assign({},e),{tries:E+1}));throw new Ve(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,wt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`)}return T},On=async function r(e){const{request:t,backoff:n,tries:i}=e,c=i===0?0:n.next();if(c===null)throw new Ve(`Timestamp failed to pass the watermark after retrying the configured ${ce(this,wt,"f")} times. We cannot guarantee the integrity of the response since it could be a replay attack.`);c>0&&await new Promise(E=>setTimeout(E,c));let l;try{l=await t()}catch(E){if(ce(this,wt,"f")>i)return this.log.warn(`Caught exception while attempting to make request:
  ${E}
  Retrying request.`),await ce(this,tt,"m",r).call(this,{request:t,backoff:n,tries:i+1});throw E}if(l.ok)return l;const u=await l.clone().text(),y=`Server returned an error:
  Code: ${l.status} (${l.statusText})
  Body: ${u}
`;if(l.status===404&&l.url.includes("api/v3"))throw new ui("v3 api not supported. Fall back to v2",{ok:l.ok,status:l.status,statusText:l.statusText,headers:Lr(l.headers)});if(i<ce(this,wt,"f"))return await ce(this,tt,"m",r).call(this,{request:t,backoff:n,tries:i+1});throw new ui(y,{ok:l.ok,status:l.status,statusText:l.statusText,headers:Lr(l.headers)})},rr=async function(){if(!this.rootKey)if(this.rootKey===null&&ce(this,Ir,"f"))await this.fetchRootKey();else throw new Ve(`Invalid root key detected. The root key for this agent is ${this.rootKey} and the shouldFetchRootKey value is set to ${ce(this,Ir,"f")}. The root key should only be unknown if you are in local development. Otherwise you should avoid fetching and use the default IC Root Key or the known root key of your environment.`)};var Hs;(function(r){r.Error="err",r.GetPrincipal="gp",r.GetPrincipalResponse="gpr",r.Query="q",r.QueryResponse="qr",r.Call="c",r.CallResponse="cr",r.ReadState="rs",r.ReadStateResponse="rsr",r.Status="s",r.StatusResponse="sr"})(Hs||(Hs={}));export{fs as A,Vr as C,$s as E,$r as H,H0 as I,Le as P,Gs as R,z0 as S,Or as a,zn as b,E0 as c,bi as d,g0 as e,Mn as f,Ve as g,Cc as h,Qi as i,$c as j,tc as k,Pi as l,vi as r,Pt as s,ct as t,wn as u,x0 as w};
