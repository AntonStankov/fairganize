import{H as s,P as l}from"./proxy-09190287.js";import{A as m,i as d,c as y}from"./index-8fc13b8b.js";import{A as u}from"./index-b2a2f86f.js";const p=document.getElementById("nameInput"),g=document.getElementById("submitNameButton"),h=document.getElementById("nameStatus"),r=document.getElementById("mainPage"),o=document.getElementById("nameSection"),c=document.getElementById("principalDisplay"),B=document.getElementById("createOrgButton"),w=document.getElementById("viewOrgButton");let i,a;const I=async()=>{const e=new s;await e.fetchRootKey(),i=m.createActor(d,{agent:e,canisterId:y})},E=async()=>{var t;a=(t=(await u.create()).getIdentity().getPrincipal())==null?void 0:t.toText(),a?c.textContent=`Your Principal: ${a}`:alert("Failed to retrieve principal. Please log in again.")},f=async()=>{try{if(!a)throw new Error("User principal is not defined.");const e=l.fromText(a),n=await i.getUserByPrincipal(e);console.log("Retrieved users:",n);const t=n[0];t&&t.name?(o.style.display="none",r.style.display="block",c.textContent=`Welcome back, ${t.name}!`):(console.warn("User or user.name is invalid:",t),o.style.display="block",r.style.display="none")}catch(e){console.error("Error checking user name:",e),alert("An error occurred while checking the user name. Please try again.")}};E().then(f);g.addEventListener("click",async()=>{const e=p.value.trim();if(!e){alert("Please enter a valid name.");return}await i.createUser(e),h.style.display="block",o.style.display="none",r.style.display="block"});B.addEventListener("click",async()=>{const e=prompt("Enter the name of the organization:");if(!e){alert("Organization name cannot be empty.");return}const n=await i.createOrganization(e);alert(`Organization created with ID: ${n}`)});w.addEventListener("click",()=>{window.location.href="./organizations.html"});I();
